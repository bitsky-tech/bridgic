<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Bridge logic and magic together with autonomous AI capabilities"><link href=https://docs.bridgic.ai/v0.3.0b1/reference/bridgic-protocols-mcp/bridgic/protocols/mcp/ rel=canonical><link href=../../../../../extras/protocols/ rel=prev><link rel=icon href=../../../../../assets/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.19"><title>bridgic.protocols.mcp - Bridgic</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Public+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Public Sans";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../stylesheets/extra.css><link rel=stylesheet href=../../../../../stylesheets/sticky_navigation.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link rel=icon id=bridgic-favicon href=../../../../../assets/favicon.ico type=image/x-icon><script>
  (function () {
    var lightHref = "../../../../../assets/favicon.ico";
    var darkHref = "../../../../../assets/favicon_dark.ico";

    function setFavicon(href) {
      var link = document.getElementById("bridgic-favicon");
      if (!link) return;
      if (link.getAttribute("href") === href) return;
      link.setAttribute("href", href);
    }

    function sync(isDark) {
      setFavicon(isDark ? darkHref : lightHref);
    }

    var mq = window.matchMedia("(prefers-color-scheme: dark)");
    sync(mq.matches);
    mq.addEventListener("change", function (e) {
      sync(e.matches);
    });
  })();
</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#mcp class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title=Bridgic class="md-header__button md-logo" aria-label=Bridgic data-md-component=logo> <img src=../../../../../assets/logo.svg alt=logo class=logo-light> <img src=../../../../../assets/logo_dark.svg alt=logo class=logo-dark> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Bridgic </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> bridgic.protocols.mcp </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=gray aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=grey data-md-color-accent=white aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/bitsky-tech/bridgic title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> bitsky-tech/bridgic </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../../../tutorials/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../../../understanding/introduction/ class=md-tabs__link> Understanding </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../../bridgic-core/bridgic/core/agentic/ class=md-tabs__link> API Reference </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../.. title=Bridgic class="md-nav__button md-logo" aria-label=Bridgic data-md-component=logo> <img src=../../../../../assets/logo.svg alt=logo class=logo-light> <img src=../../../../../assets/logo_dark.svg alt=logo class=logo-dark> </a> </label> <div class=md-nav__source> <a href=https://github.com/bitsky-tech/bridgic title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> bitsky-tech/bridgic </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../../../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/items/quick_start/quick_start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__container"> <a href=../../../../../tutorials/items/core_mechanism/ class="md-nav__link "> <span class=md-ellipsis> Core Mechanism </span> </a> <label class="md-nav__link " for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Core Mechanism </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/items/core_mechanism/concurrency_mode/ class=md-nav__link> <span class=md-ellipsis> Concurrency Mode </span> </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/core_mechanism/parameter_resolving/ class=md-nav__link> <span class=md-ellipsis> Parameter Resolving </span> </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/core_mechanism/dynamic_routing/ class=md-nav__link> <span class=md-ellipsis> Dynamic Routing </span> </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/core_mechanism/dynamic_topology/ class=md-nav__link> <span class=md-ellipsis> Dynamic Topology </span> </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/core_mechanism/human_in_the_loop/ class=md-nav__link> <span class=md-ellipsis> Human-in-the-loop </span> </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/core_mechanism/worker_callback/ class=md-nav__link> <span class=md-ellipsis> Worker Callback </span> </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/core_mechanism/modularity/ class=md-nav__link> <span class=md-ellipsis> Modularity </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <div class="md-nav__link md-nav__container"> <a href=../../../../../tutorials/items/agentic_module/ class="md-nav__link "> <span class=md-ellipsis> Agentic Module </span> </a> <label class="md-nav__link " for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Agentic Module </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/items/agentic_module/about_sequential_automa/ class=md-nav__link> <span class=md-ellipsis> SequentialAutoma </span> </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/agentic_module/about_concurrent_automa/ class=md-nav__link> <span class=md-ellipsis> ConcurrentAutoma </span> </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/agentic_module/about_recent_automa/ class=md-nav__link> <span class=md-ellipsis> ReCentAutoma </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/asl/quick_start/ class=md-nav__link> <span class=md-ellipsis> Agent Structure Language </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <div class="md-nav__link md-nav__container"> <a href=../../../../../tutorials/items/model_integration/ class="md-nav__link "> <span class=md-ellipsis> Model Integration </span> </a> <label class="md-nav__link " for=__nav_2_6 id=__nav_2_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Model Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/items/model_integration/llm_integration/ class=md-nav__link> <span class=md-ellipsis> LLM </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <div class="md-nav__link md-nav__container"> <a href=../../../../../tutorials/items/protocol_integration/ class="md-nav__link "> <span class=md-ellipsis> Protocol Integration </span> </a> <label class="md-nav__link " for=__nav_2_7 id=__nav_2_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Protocol Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/items/protocol_integration/mcp_quick_start/ class=md-nav__link> <span class=md-ellipsis> MCP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8> <div class="md-nav__link md-nav__container"> <a href=../../../../../tutorials/items/observability_integration/ class="md-nav__link "> <span class=md-ellipsis> Observability Integration </span> </a> <label class="md-nav__link " for=__nav_2_8 id=__nav_2_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> Observability Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/items/observability_integration/opik_integration/ class=md-nav__link> <span class=md-ellipsis> Opik Integration </span> </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/items/observability_integration/lang_watch_integration/ class=md-nav__link> <span class=md-ellipsis> LangWatch Integration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Understanding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Understanding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../understanding/introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../../../understanding/basics/ class=md-nav__link> <span class=md-ellipsis> Basics </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> Bridgic-Core </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Bridgic-Core </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_1> <div class="md-nav__link md-nav__container"> <a href=../../../../bridgic-core/bridgic/core/agentic/ class="md-nav__link "> <span class=md-ellipsis> bridgic.core.agentic </span> </a> <label class="md-nav__link " for=__nav_4_1_1 id=__nav_4_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_1> <span class="md-nav__icon md-icon"></span> bridgic.core.agentic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../bridgic-core/bridgic/core/agentic/recent/ class=md-nav__link> <span class=md-ellipsis> recent </span> </a> </li> <li class=md-nav__item> <a href=../../../../bridgic-core/bridgic/core/agentic/tool_specs/ class=md-nav__link> <span class=md-ellipsis> tool_specs </span> </a> </li> <li class=md-nav__item> <a href=../../../../bridgic-core/bridgic/core/agentic/types/ class=md-nav__link> <span class=md-ellipsis> types </span> </a> </li> <li class=md-nav__item> <a href=../../../../bridgic-core/bridgic/core/agentic/workers/ class=md-nav__link> <span class=md-ellipsis> workers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_2> <div class="md-nav__link md-nav__container"> <a href=../../../../bridgic-core/bridgic/core/automa/ class="md-nav__link "> <span class=md-ellipsis> bridgic.core.automa </span> </a> <label class="md-nav__link " for=__nav_4_1_2 id=__nav_4_1_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_2> <span class="md-nav__icon md-icon"></span> bridgic.core.automa </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../bridgic-core/bridgic/core/automa/args/ class=md-nav__link> <span class=md-ellipsis> args </span> </a> </li> <li class=md-nav__item> <a href=../../../../bridgic-core/bridgic/core/automa/interaction/ class=md-nav__link> <span class=md-ellipsis> interaction </span> </a> </li> <li class=md-nav__item> <a href=../../../../bridgic-core/bridgic/core/automa/worker/ class=md-nav__link> <span class=md-ellipsis> worker </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_3> <div class="md-nav__link md-nav__container"> <a href=../../../../bridgic-core/bridgic/core/config/ class="md-nav__link "> <span class=md-ellipsis> bridgic.core.config </span> </a> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_3> <span class="md-nav__icon md-icon"></span> bridgic.core.config </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_4> <div class="md-nav__link md-nav__container"> <a href=../../../../bridgic-core/bridgic/core/model/ class="md-nav__link "> <span class=md-ellipsis> bridgic.core.model </span> </a> <label class="md-nav__link " for=__nav_4_1_4 id=__nav_4_1_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_4> <span class="md-nav__icon md-icon"></span> bridgic.core.model </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../bridgic-core/bridgic/core/model/protocols/ class=md-nav__link> <span class=md-ellipsis> protocols </span> </a> </li> <li class=md-nav__item> <a href=../../../../bridgic-core/bridgic/core/model/types/ class=md-nav__link> <span class=md-ellipsis> types </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_5> <div class="md-nav__link md-nav__container"> <a href=../../../../bridgic-core/bridgic/core/prompt/ class="md-nav__link "> <span class=md-ellipsis> bridgic.core.prompt </span> </a> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_5> <span class="md-nav__icon md-icon"></span> bridgic.core.prompt </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_6> <div class="md-nav__link md-nav__container"> <a href=../../../../bridgic-core/bridgic/core/types/ class="md-nav__link "> <span class=md-ellipsis> bridgic.core.types </span> </a> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_6> <span class="md-nav__icon md-icon"></span> bridgic.core.types </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Bridgic-ASL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Bridgic-ASL </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_1> <div class="md-nav__link md-nav__container"> <a href=../../../../bridgic-asl/bridgic/asl/ class="md-nav__link "> <span class=md-ellipsis> bridgic.asl </span> </a> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_1> <span class="md-nav__icon md-icon"></span> bridgic.asl </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3 checked> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> Bridgic-Integration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=true> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Bridgic-Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_1> <div class="md-nav__link md-nav__container"> <a href=../../../../../extras/llms/ class="md-nav__link "> <span class=md-ellipsis> llms </span> </a> <label class="md-nav__link " for=__nav_4_3_1 id=__nav_4_3_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_1> <span class="md-nav__icon md-icon"></span> llms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../bridgic-llms-openai-like/bridgic/llms/openai_like/ class=md-nav__link> <span class=md-ellipsis> bridgic.llms.openai_like </span> </a> </li> <li class=md-nav__item> <a href=../../../../bridgic-llms-openai/bridgic/llms/openai/ class=md-nav__link> <span class=md-ellipsis> bridgic.llms.openai </span> </a> </li> <li class=md-nav__item> <a href=../../../../bridgic-llms-vllm/bridgic/llms/vllm/ class=md-nav__link> <span class=md-ellipsis> bridgic.llms.vllm </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_2> <div class="md-nav__link md-nav__container"> <a href=../../../../../extras/traces/ class="md-nav__link "> <span class=md-ellipsis> traces </span> </a> <label class="md-nav__link " for=__nav_4_3_2 id=__nav_4_3_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> traces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../bridgic-traces-opik/bridgic/traces/opik/ class=md-nav__link> <span class=md-ellipsis> bridgic.traces.opik </span> </a> </li> <li class=md-nav__item> <a href=../../../../bridgic-traces-langwatch/bridgic/traces/langwatch/ class=md-nav__link> <span class=md-ellipsis> bridgic.traces.langwatch </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_3 checked> <div class="md-nav__link md-nav__container"> <a href=../../../../../extras/protocols/ class="md-nav__link "> <span class=md-ellipsis> protocols </span> </a> <label class="md-nav__link " for=__nav_4_3_3 id=__nav_4_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> protocols </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> bridgic.protocols.mcp </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> bridgic.protocols.mcp </span> </a> <nav class="md-nav md-nav--secondary" aria-label=Outline> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Outline </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnection </span> </a> <nav class=md-nav aria-label= McpServerConnection> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.request_timeout class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;request_timeout </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.encoding class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;encoding </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.client_kwargs class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;client_kwargs </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.is_connected class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;is_connected </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.connect class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.close class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;close </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.get_mcp_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_mcp_client </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.list_prompts class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_prompts </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.alist_prompts class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;alist_prompts </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.get_prompt class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_prompt </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.aget_prompt class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;aget_prompt </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.list_tools class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_tools </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.alist_tools class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;alist_tools </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.call_tool class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;call_tool </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.acall_tool class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;acall_tool </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnectionStdio </span> </a> <nav class=md-nav aria-label= McpServerConnectionStdio> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.command class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;command </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.encoding class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;encoding </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.args class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;args </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.env class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;env </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.get_mcp_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_mcp_client </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnectionStreamableHttp </span> </a> <nav class=md-nav aria-label= McpServerConnectionStreamableHttp> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.url class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;url </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.http_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;http_client </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.terminate_on_close class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;terminate_on_close </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.get_mcp_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_mcp_client </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnectionManager </span> </a> <nav class=md-nav aria-label= McpServerConnectionManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.get_instance class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_instance </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.get_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.register_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;register_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.unregister_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unregister_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.get_connection_by_name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_connection_by_name </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.run_sync class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_sync </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.run_async class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_async </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.shutdown class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;shutdown </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpToolSpec </span> </a> <nav class=md-nav aria-label= McpToolSpec> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.tool_info class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;tool_info </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.server_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;server_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.from_raw class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;from_raw </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.to_tool class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_tool </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.create_worker class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_worker </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSetBuilder class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpToolSetBuilder </span> </a> <nav class=md-nav aria-label= McpToolSetBuilder> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSetBuilder.stdio class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stdio </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSetBuilder.streamable_http class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;streamable_http </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSetBuilder.build class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;build </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolWorker class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpToolWorker </span> </a> <nav class=md-nav aria-label= McpToolWorker> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolWorker.tool_name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;tool_name </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolWorker.server_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;server_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolWorker.arun class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;arun </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpPromptTemplate class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpPromptTemplate </span> </a> <nav class=md-nav aria-label= McpPromptTemplate> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpPromptTemplate.prompt_name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;prompt_name </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpPromptTemplate.prompt_info class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;prompt_info </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpPromptTemplate.format_messages class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;format_messages </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionError class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnectionError </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Outline> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Outline </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnection </span> </a> <nav class=md-nav aria-label= McpServerConnection> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.request_timeout class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;request_timeout </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.encoding class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;encoding </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.client_kwargs class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;client_kwargs </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.is_connected class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;is_connected </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.connect class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.close class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;close </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.get_mcp_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_mcp_client </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.list_prompts class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_prompts </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.alist_prompts class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;alist_prompts </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.get_prompt class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_prompt </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.aget_prompt class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;aget_prompt </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.list_tools class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_tools </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.alist_tools class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;alist_tools </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.call_tool class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;call_tool </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnection.acall_tool class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;acall_tool </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnectionStdio </span> </a> <nav class=md-nav aria-label= McpServerConnectionStdio> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.command class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;command </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.encoding class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;encoding </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.args class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;args </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.env class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;env </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.get_mcp_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_mcp_client </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnectionStreamableHttp </span> </a> <nav class=md-nav aria-label= McpServerConnectionStreamableHttp> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.url class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;url </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.http_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;http_client </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.terminate_on_close class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;terminate_on_close </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.get_mcp_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_mcp_client </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnectionManager </span> </a> <nav class=md-nav aria-label= McpServerConnectionManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.get_instance class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_instance </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.get_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.register_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;register_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.unregister_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unregister_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.get_connection_by_name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_connection_by_name </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.run_sync class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_sync </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.run_async class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_async </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.shutdown class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;shutdown </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpToolSpec </span> </a> <nav class=md-nav aria-label= McpToolSpec> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.tool_info class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;tool_info </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.server_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;server_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.from_raw class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;from_raw </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.to_tool class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_tool </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSpec.create_worker class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_worker </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSetBuilder class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpToolSetBuilder </span> </a> <nav class=md-nav aria-label= McpToolSetBuilder> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSetBuilder.stdio class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stdio </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSetBuilder.streamable_http class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;streamable_http </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolSetBuilder.build class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;build </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolWorker class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpToolWorker </span> </a> <nav class=md-nav aria-label= McpToolWorker> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolWorker.tool_name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;tool_name </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolWorker.server_connection class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;server_connection </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpToolWorker.arun class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;arun </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpPromptTemplate class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpPromptTemplate </span> </a> <nav class=md-nav aria-label= McpPromptTemplate> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpPromptTemplate.prompt_name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;prompt_name </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpPromptTemplate.prompt_info class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;prompt_info </span> </a> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpPromptTemplate.format_messages class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;format_messages </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bridgic.protocols.mcp.McpServerConnectionError class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;McpServerConnectionError </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <div><h1 id=mcp>mcp<a class=headerlink href=#mcp title="Permanent link">¶</a></h1> <div class="doc doc-object doc-module"> <div class="doc doc-contents first"> <p>The MCP module provides integration with the Model Context Protocol (MCP) for Bridgic.</p> <p>This module enables Bridgic to connect to and interact with MCP servers, allowing:</p> <ul> <li><strong>Connection Management</strong>: Establish and manage connections to MCP servers via different transport protocols (stdio, streamable HTTP, etc.)</li> <li><strong>Tool Integration</strong>: Use MCP tools as callable tools within Bridgic agentic systems</li> <li><strong>Prompt Integration</strong>: Access and use prompts from MCP servers in Bridgic workflows</li> <li><strong>Worker Integration</strong>: Execute MCP tools through Bridgic's worker system</li> </ul> <details class=core-components open> <summary>Core Components</summary> <ul> <li><code>McpServerConnection</code>: Abstract base class for MCP server connections</li> <li><code>McpServerConnectionStdio</code>: Connection implementation using stdio transport</li> <li><code>McpServerConnectionStreamableHttp</code>: Connection implementation using streamable HTTP</li> <li><code>McpServerConnectionManager</code>: Manager for multiple MCP connections with shared event loop</li> <li><code>McpToolSpec</code>: Tool specification for MCP tools</li> <li><code>McpToolSetBuilder</code>: Builder for creating exclusive McpToolSpec instances for ReCentAutoma</li> <li><code>McpToolWorker</code>: Worker implementation for executing MCP tools</li> <li><code>McpPromptTemplate</code>: Prompt template implementation for MCP prompts</li> </ul> </details> <p><span class=doc-section-title>Examples:</span></p> <p>Create a connection to an MCP server using stdio transport and list available tools:</p> <div class="language-pycon highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1> 1</a></span>
<span class=normal><a href=#__codelineno-0-2> 2</a></span>
<span class=normal><a href=#__codelineno-0-3> 3</a></span>
<span class=normal><a href=#__codelineno-0-4> 4</a></span>
<span class=normal><a href=#__codelineno-0-5> 5</a></span>
<span class=normal><a href=#__codelineno-0-6> 6</a></span>
<span class=normal><a href=#__codelineno-0-7> 7</a></span>
<span class=normal><a href=#__codelineno-0-8> 8</a></span>
<span class=normal><a href=#__codelineno-0-9> 9</a></span>
<span class=normal><a href=#__codelineno-0-10>10</a></span>
<span class=normal><a href=#__codelineno-0-11>11</a></span>
<span class=normal><a href=#__codelineno-0-12>12</a></span>
<span class=normal><a href=#__codelineno-0-13>13</a></span>
<span class=normal><a href=#__codelineno-0-14>14</a></span>
<span class=normal><a href=#__codelineno-0-15>15</a></span>
<span class=normal><a href=#__codelineno-0-16>16</a></span>
<span class=normal><a href=#__codelineno-0-17>17</a></span>
<span class=normal><a href=#__codelineno-0-18>18</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp</span><span class=w> </span><span class=kn>import</span> <span class=n>McpServerConnectionStdio</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span><span class=w> </span><span class=nn>bridgic.core.automa</span><span class=w> </span><span class=kn>import</span> <span class=n>GraphAutoma</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=gp>&gt;&gt;&gt;</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=gp>&gt;&gt;&gt; </span><span class=c1># Create and connect to an MCP server</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=gp>&gt;&gt;&gt; </span><span class=n>connection</span> <span class=o>=</span> <span class=n>McpServerConnectionStdio</span><span class=p>(</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=gp>... </span>    <span class=n>name</span><span class=o>=</span><span class=s2>"my-mcp-server"</span><span class=p>,</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=gp>... </span>    <span class=n>command</span><span class=o>=</span><span class=s2>"npx"</span><span class=p>,</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8></a><span class=gp>... </span>    <span class=n>args</span><span class=o>=</span><span class=p>[</span><span class=s2>"-y"</span><span class=p>,</span> <span class=s2>"@modelcontextprotocol/server-filesystem"</span><span class=p>,</span> <span class=s2>"/path/to/dir"</span><span class=p>],</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10></a><span class=gp>&gt;&gt;&gt; </span><span class=n>connection</span><span class=o>.</span><span class=n>connect</span><span class=p>()</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=gp>&gt;&gt;&gt;</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=gp>&gt;&gt;&gt; </span><span class=c1># List available tools</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=gp>&gt;&gt;&gt; </span><span class=n>tools</span> <span class=o>=</span> <span class=n>connection</span><span class=o>.</span><span class=n>list_tools</span><span class=p>()</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14></a><span class=gp>&gt;&gt;&gt;</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15></a><span class=gp>&gt;&gt;&gt; </span><span class=c1># Use tools in an automa</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16></a><span class=gp>&gt;&gt;&gt; </span><span class=n>automa</span> <span class=o>=</span> <span class=n>GraphAutoma</span><span class=p>()</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>tool_spec</span> <span class=ow>in</span> <span class=n>tools</span><span class=p>:</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=gp>... </span>    <span class=n>automa</span><span class=o>.</span><span class=n>add_worker</span><span class=p>(</span><span class=n>tool_spec</span><span class=o>.</span><span class=n>create_worker</span><span class=p>())</span>
</span></code></pre></div></td></tr></table></div> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=bridgic.protocols.mcp.McpServerConnection class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">McpServerConnection</span> <a href=#bridgic.protocols.mcp.McpServerConnection class=headerlink title="Permanent link">¶</a></h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=abc.ABC>ABC</span></code></p> <p>The abstract base class for Connection to an MCP server.</p> <p>This class is responsible for establishing a connection to an MCP server and providing a session to interact with the server. The connection can be established using different transport protocols, which depends on the specific implementation.</p> <p><span class=doc-section-title>Methods:</span></p> <table> <thead> <tr> <th>Name</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">connect</span> (<code>bridgic.protocols.mcp.McpServerConnection.connect</code>)' href=#bridgic.protocols.mcp.McpServerConnection.connect>connect</a></code></td> <td> <div class=doc-md-description> <p>Establish a connection to an MCP server.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_mcp_client</span> (<code>bridgic.protocols.mcp.McpServerConnection.get_mcp_client</code>)' href=#bridgic.protocols.mcp.McpServerConnection.get_mcp_client>get_mcp_client</a></code></td> <td> <div class=doc-md-description> <p>Get a MCP client to interact with the server.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-26> 26</a></span>
<span class=normal><a href=#__codelineno-0-27> 27</a></span>
<span class=normal><a href=#__codelineno-0-28> 28</a></span>
<span class=normal><a href=#__codelineno-0-29> 29</a></span>
<span class=normal><a href=#__codelineno-0-30> 30</a></span>
<span class=normal><a href=#__codelineno-0-31> 31</a></span>
<span class=normal><a href=#__codelineno-0-32> 32</a></span>
<span class=normal><a href=#__codelineno-0-33> 33</a></span>
<span class=normal><a href=#__codelineno-0-34> 34</a></span>
<span class=normal><a href=#__codelineno-0-35> 35</a></span>
<span class=normal><a href=#__codelineno-0-36> 36</a></span>
<span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span>
<span class=normal><a href=#__codelineno-0-195>195</a></span>
<span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span>
<span class=normal><a href=#__codelineno-0-241>241</a></span>
<span class=normal><a href=#__codelineno-0-242>242</a></span>
<span class=normal><a href=#__codelineno-0-243>243</a></span>
<span class=normal><a href=#__codelineno-0-244>244</a></span>
<span class=normal><a href=#__codelineno-0-245>245</a></span>
<span class=normal><a href=#__codelineno-0-246>246</a></span>
<span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span>
<span class=normal><a href=#__codelineno-0-249>249</a></span>
<span class=normal><a href=#__codelineno-0-250>250</a></span>
<span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span>
<span class=normal><a href=#__codelineno-0-254>254</a></span>
<span class=normal><a href=#__codelineno-0-255>255</a></span>
<span class=normal><a href=#__codelineno-0-256>256</a></span>
<span class=normal><a href=#__codelineno-0-257>257</a></span>
<span class=normal><a href=#__codelineno-0-258>258</a></span>
<span class=normal><a href=#__codelineno-0-259>259</a></span>
<span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span>
<span class=normal><a href=#__codelineno-0-264>264</a></span>
<span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span>
<span class=normal><a href=#__codelineno-0-275>275</a></span>
<span class=normal><a href=#__codelineno-0-276>276</a></span>
<span class=normal><a href=#__codelineno-0-277>277</a></span>
<span class=normal><a href=#__codelineno-0-278>278</a></span>
<span class=normal><a href=#__codelineno-0-279>279</a></span>
<span class=normal><a href=#__codelineno-0-280>280</a></span>
<span class=normal><a href=#__codelineno-0-281>281</a></span>
<span class=normal><a href=#__codelineno-0-282>282</a></span>
<span class=normal><a href=#__codelineno-0-283>283</a></span>
<span class=normal><a href=#__codelineno-0-284>284</a></span>
<span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span>
<span class=normal><a href=#__codelineno-0-302>302</a></span>
<span class=normal><a href=#__codelineno-0-303>303</a></span>
<span class=normal><a href=#__codelineno-0-304>304</a></span>
<span class=normal><a href=#__codelineno-0-305>305</a></span>
<span class=normal><a href=#__codelineno-0-306>306</a></span>
<span class=normal><a href=#__codelineno-0-307>307</a></span>
<span class=normal><a href=#__codelineno-0-308>308</a></span>
<span class=normal><a href=#__codelineno-0-309>309</a></span>
<span class=normal><a href=#__codelineno-0-310>310</a></span>
<span class=normal><a href=#__codelineno-0-311>311</a></span>
<span class=normal><a href=#__codelineno-0-312>312</a></span>
<span class=normal><a href=#__codelineno-0-313>313</a></span>
<span class=normal><a href=#__codelineno-0-314>314</a></span>
<span class=normal><a href=#__codelineno-0-315>315</a></span>
<span class=normal><a href=#__codelineno-0-316>316</a></span>
<span class=normal><a href=#__codelineno-0-317>317</a></span>
<span class=normal><a href=#__codelineno-0-318>318</a></span>
<span class=normal><a href=#__codelineno-0-319>319</a></span>
<span class=normal><a href=#__codelineno-0-320>320</a></span>
<span class=normal><a href=#__codelineno-0-321>321</a></span>
<span class=normal><a href=#__codelineno-0-322>322</a></span>
<span class=normal><a href=#__codelineno-0-323>323</a></span>
<span class=normal><a href=#__codelineno-0-324>324</a></span>
<span class=normal><a href=#__codelineno-0-325>325</a></span>
<span class=normal><a href=#__codelineno-0-326>326</a></span>
<span class=normal><a href=#__codelineno-0-327>327</a></span>
<span class=normal><a href=#__codelineno-0-328>328</a></span>
<span class=normal><a href=#__codelineno-0-329>329</a></span>
<span class=normal><a href=#__codelineno-0-330>330</a></span>
<span class=normal><a href=#__codelineno-0-331>331</a></span>
<span class=normal><a href=#__codelineno-0-332>332</a></span>
<span class=normal><a href=#__codelineno-0-333>333</a></span>
<span class=normal><a href=#__codelineno-0-334>334</a></span>
<span class=normal><a href=#__codelineno-0-335>335</a></span>
<span class=normal><a href=#__codelineno-0-336>336</a></span>
<span class=normal><a href=#__codelineno-0-337>337</a></span>
<span class=normal><a href=#__codelineno-0-338>338</a></span>
<span class=normal><a href=#__codelineno-0-339>339</a></span>
<span class=normal><a href=#__codelineno-0-340>340</a></span>
<span class=normal><a href=#__codelineno-0-341>341</a></span>
<span class=normal><a href=#__codelineno-0-342>342</a></span>
<span class=normal><a href=#__codelineno-0-343>343</a></span>
<span class=normal><a href=#__codelineno-0-344>344</a></span>
<span class=normal><a href=#__codelineno-0-345>345</a></span>
<span class=normal><a href=#__codelineno-0-346>346</a></span>
<span class=normal><a href=#__codelineno-0-347>347</a></span>
<span class=normal><a href=#__codelineno-0-348>348</a></span>
<span class=normal><a href=#__codelineno-0-349>349</a></span>
<span class=normal><a href=#__codelineno-0-350>350</a></span>
<span class=normal><a href=#__codelineno-0-351>351</a></span>
<span class=normal><a href=#__codelineno-0-352>352</a></span>
<span class=normal><a href=#__codelineno-0-353>353</a></span>
<span class=normal><a href=#__codelineno-0-354>354</a></span>
<span class=normal><a href=#__codelineno-0-355>355</a></span>
<span class=normal><a href=#__codelineno-0-356>356</a></span>
<span class=normal><a href=#__codelineno-0-357>357</a></span>
<span class=normal><a href=#__codelineno-0-358>358</a></span>
<span class=normal><a href=#__codelineno-0-359>359</a></span>
<span class=normal><a href=#__codelineno-0-360>360</a></span>
<span class=normal><a href=#__codelineno-0-361>361</a></span>
<span class=normal><a href=#__codelineno-0-362>362</a></span>
<span class=normal><a href=#__codelineno-0-363>363</a></span>
<span class=normal><a href=#__codelineno-0-364>364</a></span>
<span class=normal><a href=#__codelineno-0-365>365</a></span>
<span class=normal><a href=#__codelineno-0-366>366</a></span>
<span class=normal><a href=#__codelineno-0-367>367</a></span>
<span class=normal><a href=#__codelineno-0-368>368</a></span>
<span class=normal><a href=#__codelineno-0-369>369</a></span>
<span class=normal><a href=#__codelineno-0-370>370</a></span>
<span class=normal><a href=#__codelineno-0-371>371</a></span>
<span class=normal><a href=#__codelineno-0-372>372</a></span>
<span class=normal><a href=#__codelineno-0-373>373</a></span>
<span class=normal><a href=#__codelineno-0-374>374</a></span>
<span class=normal><a href=#__codelineno-0-375>375</a></span>
<span class=normal><a href=#__codelineno-0-376>376</a></span>
<span class=normal><a href=#__codelineno-0-377>377</a></span>
<span class=normal><a href=#__codelineno-0-378>378</a></span>
<span class=normal><a href=#__codelineno-0-379>379</a></span>
<span class=normal><a href=#__codelineno-0-380>380</a></span>
<span class=normal><a href=#__codelineno-0-381>381</a></span>
<span class=normal><a href=#__codelineno-0-382>382</a></span>
<span class=normal><a href=#__codelineno-0-383>383</a></span>
<span class=normal><a href=#__codelineno-0-384>384</a></span>
<span class=normal><a href=#__codelineno-0-385>385</a></span>
<span class=normal><a href=#__codelineno-0-386>386</a></span>
<span class=normal><a href=#__codelineno-0-387>387</a></span>
<span class=normal><a href=#__codelineno-0-388>388</a></span>
<span class=normal><a href=#__codelineno-0-389>389</a></span>
<span class=normal><a href=#__codelineno-0-390>390</a></span>
<span class=normal><a href=#__codelineno-0-391>391</a></span>
<span class=normal><a href=#__codelineno-0-392>392</a></span>
<span class=normal><a href=#__codelineno-0-393>393</a></span>
<span class=normal><a href=#__codelineno-0-394>394</a></span>
<span class=normal><a href=#__codelineno-0-395>395</a></span>
<span class=normal><a href=#__codelineno-0-396>396</a></span>
<span class=normal><a href=#__codelineno-0-397>397</a></span>
<span class=normal><a href=#__codelineno-0-398>398</a></span>
<span class=normal><a href=#__codelineno-0-399>399</a></span>
<span class=normal><a href=#__codelineno-0-400>400</a></span>
<span class=normal><a href=#__codelineno-0-401>401</a></span>
<span class=normal><a href=#__codelineno-0-402>402</a></span>
<span class=normal><a href=#__codelineno-0-403>403</a></span>
<span class=normal><a href=#__codelineno-0-404>404</a></span>
<span class=normal><a href=#__codelineno-0-405>405</a></span>
<span class=normal><a href=#__codelineno-0-406>406</a></span>
<span class=normal><a href=#__codelineno-0-407>407</a></span>
<span class=normal><a href=#__codelineno-0-408>408</a></span>
<span class=normal><a href=#__codelineno-0-409>409</a></span>
<span class=normal><a href=#__codelineno-0-410>410</a></span>
<span class=normal><a href=#__codelineno-0-411>411</a></span>
<span class=normal><a href=#__codelineno-0-412>412</a></span>
<span class=normal><a href=#__codelineno-0-413>413</a></span>
<span class=normal><a href=#__codelineno-0-414>414</a></span>
<span class=normal><a href=#__codelineno-0-415>415</a></span>
<span class=normal><a href=#__codelineno-0-416>416</a></span>
<span class=normal><a href=#__codelineno-0-417>417</a></span>
<span class=normal><a href=#__codelineno-0-418>418</a></span>
<span class=normal><a href=#__codelineno-0-419>419</a></span>
<span class=normal><a href=#__codelineno-0-420>420</a></span>
<span class=normal><a href=#__codelineno-0-421>421</a></span>
<span class=normal><a href=#__codelineno-0-422>422</a></span>
<span class=normal><a href=#__codelineno-0-423>423</a></span>
<span class=normal><a href=#__codelineno-0-424>424</a></span>
<span class=normal><a href=#__codelineno-0-425>425</a></span>
<span class=normal><a href=#__codelineno-0-426>426</a></span>
<span class=normal><a href=#__codelineno-0-427>427</a></span>
<span class=normal><a href=#__codelineno-0-428>428</a></span>
<span class=normal><a href=#__codelineno-0-429>429</a></span>
<span class=normal><a href=#__codelineno-0-430>430</a></span>
<span class=normal><a href=#__codelineno-0-431>431</a></span>
<span class=normal><a href=#__codelineno-0-432>432</a></span>
<span class=normal><a href=#__codelineno-0-433>433</a></span>
<span class=normal><a href=#__codelineno-0-434>434</a></span>
<span class=normal><a href=#__codelineno-0-435>435</a></span>
<span class=normal><a href=#__codelineno-0-436>436</a></span>
<span class=normal><a href=#__codelineno-0-437>437</a></span>
<span class=normal><a href=#__codelineno-0-438>438</a></span>
<span class=normal><a href=#__codelineno-0-439>439</a></span>
<span class=normal><a href=#__codelineno-0-440>440</a></span>
<span class=normal><a href=#__codelineno-0-441>441</a></span>
<span class=normal><a href=#__codelineno-0-442>442</a></span>
<span class=normal><a href=#__codelineno-0-443>443</a></span>
<span class=normal><a href=#__codelineno-0-444>444</a></span>
<span class=normal><a href=#__codelineno-0-445>445</a></span>
<span class=normal><a href=#__codelineno-0-446>446</a></span>
<span class=normal><a href=#__codelineno-0-447>447</a></span>
<span class=normal><a href=#__codelineno-0-448>448</a></span>
<span class=normal><a href=#__codelineno-0-449>449</a></span>
<span class=normal><a href=#__codelineno-0-450>450</a></span>
<span class=normal><a href=#__codelineno-0-451>451</a></span>
<span class=normal><a href=#__codelineno-0-452>452</a></span>
<span class=normal><a href=#__codelineno-0-453>453</a></span>
<span class=normal><a href=#__codelineno-0-454>454</a></span>
<span class=normal><a href=#__codelineno-0-455>455</a></span>
<span class=normal><a href=#__codelineno-0-456>456</a></span>
<span class=normal><a href=#__codelineno-0-457>457</a></span>
<span class=normal><a href=#__codelineno-0-458>458</a></span>
<span class=normal><a href=#__codelineno-0-459>459</a></span>
<span class=normal><a href=#__codelineno-0-460>460</a></span>
<span class=normal><a href=#__codelineno-0-461>461</a></span>
<span class=normal><a href=#__codelineno-0-462>462</a></span>
<span class=normal><a href=#__codelineno-0-463>463</a></span>
<span class=normal><a href=#__codelineno-0-464>464</a></span>
<span class=normal><a href=#__codelineno-0-465>465</a></span>
<span class=normal><a href=#__codelineno-0-466>466</a></span>
<span class=normal><a href=#__codelineno-0-467>467</a></span>
<span class=normal><a href=#__codelineno-0-468>468</a></span>
<span class=normal><a href=#__codelineno-0-469>469</a></span>
<span class=normal><a href=#__codelineno-0-470>470</a></span>
<span class=normal><a href=#__codelineno-0-471>471</a></span>
<span class=normal><a href=#__codelineno-0-472>472</a></span>
<span class=normal><a href=#__codelineno-0-473>473</a></span>
<span class=normal><a href=#__codelineno-0-474>474</a></span>
<span class=normal><a href=#__codelineno-0-475>475</a></span>
<span class=normal><a href=#__codelineno-0-476>476</a></span>
<span class=normal><a href=#__codelineno-0-477>477</a></span>
<span class=normal><a href=#__codelineno-0-478>478</a></span>
<span class=normal><a href=#__codelineno-0-479>479</a></span>
<span class=normal><a href=#__codelineno-0-480>480</a></span>
<span class=normal><a href=#__codelineno-0-481>481</a></span>
<span class=normal><a href=#__codelineno-0-482>482</a></span>
<span class=normal><a href=#__codelineno-0-483>483</a></span>
<span class=normal><a href=#__codelineno-0-484>484</a></span>
<span class=normal><a href=#__codelineno-0-485>485</a></span>
<span class=normal><a href=#__codelineno-0-486>486</a></span>
<span class=normal><a href=#__codelineno-0-487>487</a></span>
<span class=normal><a href=#__codelineno-0-488>488</a></span>
<span class=normal><a href=#__codelineno-0-489>489</a></span>
<span class=normal><a href=#__codelineno-0-490>490</a></span>
<span class=normal><a href=#__codelineno-0-491>491</a></span>
<span class=normal><a href=#__codelineno-0-492>492</a></span>
<span class=normal><a href=#__codelineno-0-493>493</a></span>
<span class=normal><a href=#__codelineno-0-494>494</a></span>
<span class=normal><a href=#__codelineno-0-495>495</a></span>
<span class=normal><a href=#__codelineno-0-496>496</a></span>
<span class=normal><a href=#__codelineno-0-497>497</a></span>
<span class=normal><a href=#__codelineno-0-498>498</a></span>
<span class=normal><a href=#__codelineno-0-499>499</a></span>
<span class=normal><a href=#__codelineno-0-500>500</a></span>
<span class=normal><a href=#__codelineno-0-501>501</a></span>
<span class=normal><a href=#__codelineno-0-502>502</a></span>
<span class=normal><a href=#__codelineno-0-503>503</a></span>
<span class=normal><a href=#__codelineno-0-504>504</a></span>
<span class=normal><a href=#__codelineno-0-505>505</a></span>
<span class=normal><a href=#__codelineno-0-506>506</a></span>
<span class=normal><a href=#__codelineno-0-507>507</a></span>
<span class=normal><a href=#__codelineno-0-508>508</a></span>
<span class=normal><a href=#__codelineno-0-509>509</a></span>
<span class=normal><a href=#__codelineno-0-510>510</a></span>
<span class=normal><a href=#__codelineno-0-511>511</a></span>
<span class=normal><a href=#__codelineno-0-512>512</a></span>
<span class=normal><a href=#__codelineno-0-513>513</a></span>
<span class=normal><a href=#__codelineno-0-514>514</a></span>
<span class=normal><a href=#__codelineno-0-515>515</a></span>
<span class=normal><a href=#__codelineno-0-516>516</a></span>
<span class=normal><a href=#__codelineno-0-517>517</a></span>
<span class=normal><a href=#__codelineno-0-518>518</a></span>
<span class=normal><a href=#__codelineno-0-519>519</a></span>
<span class=normal><a href=#__codelineno-0-520>520</a></span>
<span class=normal><a href=#__codelineno-0-521>521</a></span>
<span class=normal><a href=#__codelineno-0-522>522</a></span>
<span class=normal><a href=#__codelineno-0-523>523</a></span>
<span class=normal><a href=#__codelineno-0-524>524</a></span>
<span class=normal><a href=#__codelineno-0-525>525</a></span>
<span class=normal><a href=#__codelineno-0-526>526</a></span>
<span class=normal><a href=#__codelineno-0-527>527</a></span>
<span class=normal><a href=#__codelineno-0-528>528</a></span>
<span class=normal><a href=#__codelineno-0-529>529</a></span>
<span class=normal><a href=#__codelineno-0-530>530</a></span>
<span class=normal><a href=#__codelineno-0-531>531</a></span>
<span class=normal><a href=#__codelineno-0-532>532</a></span>
<span class=normal><a href=#__codelineno-0-533>533</a></span>
<span class=normal><a href=#__codelineno-0-534>534</a></span>
<span class=normal><a href=#__codelineno-0-535>535</a></span>
<span class=normal><a href=#__codelineno-0-536>536</a></span>
<span class=normal><a href=#__codelineno-0-537>537</a></span>
<span class=normal><a href=#__codelineno-0-538>538</a></span>
<span class=normal><a href=#__codelineno-0-539>539</a></span>
<span class=normal><a href=#__codelineno-0-540>540</a></span>
<span class=normal><a href=#__codelineno-0-541>541</a></span>
<span class=normal><a href=#__codelineno-0-542>542</a></span>
<span class=normal><a href=#__codelineno-0-543>543</a></span>
<span class=normal><a href=#__codelineno-0-544>544</a></span>
<span class=normal><a href=#__codelineno-0-545>545</a></span>
<span class=normal><a href=#__codelineno-0-546>546</a></span>
<span class=normal><a href=#__codelineno-0-547>547</a></span>
<span class=normal><a href=#__codelineno-0-548>548</a></span>
<span class=normal><a href=#__codelineno-0-549>549</a></span>
<span class=normal><a href=#__codelineno-0-550>550</a></span>
<span class=normal><a href=#__codelineno-0-551>551</a></span>
<span class=normal><a href=#__codelineno-0-552>552</a></span>
<span class=normal><a href=#__codelineno-0-553>553</a></span>
<span class=normal><a href=#__codelineno-0-554>554</a></span>
<span class=normal><a href=#__codelineno-0-555>555</a></span>
<span class=normal><a href=#__codelineno-0-556>556</a></span>
<span class=normal><a href=#__codelineno-0-557>557</a></span>
<span class=normal><a href=#__codelineno-0-558>558</a></span>
<span class=normal><a href=#__codelineno-0-559>559</a></span>
<span class=normal><a href=#__codelineno-0-560>560</a></span>
<span class=normal><a href=#__codelineno-0-561>561</a></span>
<span class=normal><a href=#__codelineno-0-562>562</a></span>
<span class=normal><a href=#__codelineno-0-563>563</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=k>class</span><span class=w> </span><span class=nc>McpServerConnection</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a><span class=sd>    The abstract base class for Connection to an MCP server.</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a><span class=sd>    This class is responsible for establishing a connection to an MCP server and providing a </span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a><span class=sd>    session to interact with the server. The connection can be established using different </span>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a><span class=sd>    transport protocols, which depends on the specific implementation.</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=sd>    Methods</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a><span class=sd>    -------</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a><span class=sd>    connect</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a><span class=sd>        Establish a connection to an MCP server.</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a><span class=sd>    get_mcp_client</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a><span class=sd>        Get a MCP client to interact with the server.</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a><span class=sd>    """</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=w>    </span><span class=sd>"""The name of the connected MCP server."""</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>    <span class=n>request_timeout</span><span class=p>:</span> <span class=nb>int</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=w>    </span><span class=sd>"""The timeout in seconds for the requests to the MCP server. Default is 30 seconds."""</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a>    <span class=n>encoding</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a><span class=w>    </span><span class=sd>"""The encoding to use for the connection."""</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a>    <span class=n>client_kwargs</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a><span class=w>    </span><span class=sd>"""The keyword arguments to pass to the MCP client."""</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>    <span class=n>_manager</span><span class=p>:</span> <span class=n>McpServerConnectionManager</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a>    <span class=n>_session</span><span class=p>:</span> <span class=n>ClientSession</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a>    <span class=n>_exit_stack</span><span class=p>:</span> <span class=n>AsyncExitStack</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>    <span class=n>_lifecycle_task</span><span class=p>:</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>Task</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a>    <span class=n>_connection_ready_event</span><span class=p>:</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>Event</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>    <span class=n>_connection_stop_event</span><span class=p>:</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>Event</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>    <span class=n>_connection_error</span><span class=p>:</span> <span class=ne>Exception</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>    <span class=n>is_connected</span><span class=p>:</span> <span class=nb>bool</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a><span class=w>    </span><span class=sd>"""Whether the connection is established."""</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>        <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>        <span class=n>request_timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a>        <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>    <span class=p>):</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a>        <span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>=</span> <span class=n>request_timeout</span> <span class=ow>or</span> <span class=mi>30</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=bp>self</span><span class=o>.</span><span class=n>client_kwargs</span> <span class=o>=</span> <span class=n>kwargs</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_manager</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_exit_stack</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_stop_event</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>Event</span><span class=p>()</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_ready_event</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>Event</span><span class=p>()</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a>        <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_error</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>    <span class=k>def</span><span class=w> </span><span class=nf>_get_manager</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>McpServerConnectionManager</span><span class=p>:</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_manager</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>            <span class=n>manager</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_instance</span><span class=p>()</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>            <span class=n>manager</span><span class=o>.</span><span class=n>register_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>            <span class=k>assert</span> <span class=n>manager</span> <span class=ow>is</span> <span class=bp>self</span><span class=o>.</span><span class=n>_manager</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_manager</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a>    <span class=k>def</span><span class=w> </span><span class=nf>connect</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=sd>        Establish a connection to the MCP server. Call this method once before using the connection.</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=sd>        If the connection is not registered in a specific manager explicitly, it will be registered</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=sd>        in the default manager (manager_name="default-mcp-manager"). If the connection needs to be</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>        registered in a specific manager, the `connect` method should be called after the registration.</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=sd>        Notes</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=sd>        -----</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>        The event loop responsible for managing the session is determined at the time when `connect()` is called.</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a><span class=sd>        Therefore, it is required to register the connection to the desired manager *before* calling `connect()`.</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>        Otherwise, the connection will be registered to the default manager. All registrations could not be changed later.</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>        Examples</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>        --------</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a><span class=sd>        Create a connection to a streamable HTTP MCP server and register it to a manager:</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a><span class=sd>        &gt;&gt;&gt; connection = McpServerConnectionStreamableHttp(</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=sd>        ...     name="streamable-http-server-connection",</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=sd>        ...     url="http://localhost:8000",</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=sd>        ...     request_timeout=5,</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a><span class=sd>        ... )</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=sd>        &gt;&gt;&gt; manager = McpServerConnectionManager.get_instance("my-manager")</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a><span class=sd>        &gt;&gt;&gt; manager.register_connection(connection)</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a><span class=sd>        &gt;&gt;&gt; connection.connect()</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=sd>        """</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span><span class=p>:</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>            <span class=k>return</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>        <span class=c1># Create events and lifecycle task in the manager's event loop.</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>        <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>setup_and_wait</span><span class=p>():</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>            <span class=c1># Create events in the manager's event loop.</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_connection_stop_event</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_connection_ready_event</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_connection_error</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>            <span class=c1># Create the lifecycle task.</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task_coro</span><span class=p>())</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>            <span class=c1># Wait for connection to be ready</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_ready_event</span><span class=o>.</span><span class=n>wait</span><span class=p>()</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>            <span class=c1># Check if there was an error</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_error</span><span class=p>:</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>                <span class=k>raise</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_error</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>        <span class=c1># Setup the connection and make sure it could be closed within the same lifecycle task.</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>            <span class=n>coro</span><span class=o>=</span><span class=n>setup_and_wait</span><span class=p>(),</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>        <span class=p>)</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>    <span class=k>def</span><span class=w> </span><span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>        Close the connection to the MCP server.</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=sd>        """</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span><span class=p>:</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>            <span class=k>return</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a>        <span class=c1># Signal the lifecycle task to stop and wait for it to complete.</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>        <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>stop_and_wait</span><span class=p>():</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_stop_event</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a>                <span class=bp>self</span><span class=o>.</span><span class=n>_connection_stop_event</span><span class=o>.</span><span class=n>set</span><span class=p>()</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a>                <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a>                    <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>                <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>                    <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Exception occurred while waiting for the lifecycle task to complete: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a>                <span class=k>finally</span><span class=p>:</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>_manager</span><span class=o>.</span><span class=n>unregister_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a>            <span class=n>coro</span><span class=o>=</span><span class=n>stop_and_wait</span><span class=p>(),</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a>        <span class=p>)</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>    <span class=nd>@abstractmethod</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_mcp_client</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>_AsyncGeneratorContextManager</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=kc>None</span><span class=p>]:</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a><span class=sd>        Get an MCP client.</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a><span class=sd>        Returns</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a><span class=sd>        -------</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a><span class=sd>        _AsyncGeneratorContextManager[Any, None]</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a><span class=sd>            An async context manager for the MCP client transport.</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a><span class=sd>        """</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>        <span class=o>...</span>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a>    <span class=c1>###########################################################################</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a>    <span class=c1># Protected methods that should be called within the dedicated event loop.</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a>    <span class=c1>###########################################################################</span>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>_lifecycle_task_coro</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a><span class=sd>        The lifecycle task coroutine that manages the connection lifecycle.</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a>
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194></a><span class=sd>        This coroutine runs in the manager's dedicated event loop and is responsible for:</span>
</span><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195></a><span class=sd>        1. Establishing the connection to the MCP server</span>
</span><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196></a><span class=sd>        2. Waiting for the stop event</span>
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a><span class=sd>        3. Closing the connection when the stop event is set</span>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a><span class=sd>        This ensures that the connection is created and closed within the same Task,</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a><span class=sd>        which is required by anyio's cancel scope mechanism.</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a><span class=sd>        """</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a>            <span class=c1># Establish connection</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_exit_stack</span> <span class=o>=</span> <span class=n>AsyncExitStack</span><span class=p>()</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a>                <span class=n>transport</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_exit_stack</span><span class=o>.</span><span class=n>enter_async_context</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>get_mcp_client</span><span class=p>())</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a>                <span class=n>session</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_exit_stack</span><span class=o>.</span><span class=n>enter_async_context</span><span class=p>(</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a>                    <span class=n>ClientSession</span><span class=p>(</span>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a>                        <span class=n>read_stream</span><span class=o>=</span><span class=n>transport</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a>                        <span class=n>write_stream</span><span class=o>=</span><span class=n>transport</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a>                        <span class=n>read_timeout_seconds</span><span class=o>=</span><span class=n>timedelta</span><span class=p>(</span><span class=n>seconds</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span><span class=p>),</span>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a>                        <span class=c1># TODO : Callback will be added in the future to support more advanced features.</span>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a>                        <span class=c1># message_handler=...,</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>                        <span class=c1># logging_callback=...,</span>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a>                        <span class=c1># sampling_callback=...,</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a>                    <span class=p>)</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a>                <span class=p>)</span>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a>                <span class=k>await</span> <span class=n>session</span><span class=o>.</span><span class=n>initialize</span><span class=p>()</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>ex</span><span class=p>:</span>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a>                <span class=n>session</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a>                <span class=bp>self</span><span class=o>.</span><span class=n>_connection_error</span> <span class=o>=</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a>                    <span class=sa>f</span><span class=s2>"Failed to create session to MCP server: name=</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a>                <span class=p>)</span><span class=o>.</span><span class=n>with_traceback</span><span class=p>(</span><span class=n>ex</span><span class=o>.</span><span class=n>__traceback__</span><span class=p>)</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a>            <span class=c1># Hold the connected session for later use.</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=o>=</span> <span class=n>session</span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a>            <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span> <span class=o>=</span> <span class=kc>True</span> <span class=k>if</span> <span class=n>session</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=kc>False</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a>            <span class=c1># Signal that the connection is ready.</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_connection_ready_event</span><span class=o>.</span><span class=n>set</span><span class=p>()</span>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a>            <span class=c1># Wait for the stop signal.</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_stop_event</span><span class=o>.</span><span class=n>wait</span><span class=p>()</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a>        <span class=k>finally</span><span class=p>:</span>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a>            <span class=c1># At the final moment, the exit stack must be closed.</span>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_exit_stack</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a>                <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_exit_stack</span><span class=o>.</span><span class=n>aclose</span><span class=p>()</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a>                <span class=bp>self</span><span class=o>.</span><span class=n>_exit_stack</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-241><a id=__codelineno-0-241 name=__codelineno-0-241></a>            <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-242><a id=__codelineno-0-242 name=__codelineno-0-242></a>
</span><span id=__span-0-243><a id=__codelineno-0-243 name=__codelineno-0-243></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>_list_prompts_unsafe</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ListPromptsResult</span><span class=p>:</span>
</span><span id=__span-0-244><a id=__codelineno-0-244 name=__codelineno-0-244></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-245><a id=__codelineno-0-245 name=__codelineno-0-245></a><span class=sd>        Asynchronously list the prompts from the MCP server.</span>
</span><span id=__span-0-246><a id=__codelineno-0-246 name=__codelineno-0-246></a>
</span><span id=__span-0-247><a id=__codelineno-0-247 name=__codelineno-0-247></a><span class=sd>        Since the session used to communicate with the MCP server is bound to a specific event </span>
</span><span id=__span-0-248><a id=__codelineno-0-248 name=__codelineno-0-248></a><span class=sd>        loop, this method should be called within the designated event loop for the connection.</span>
</span><span id=__span-0-249><a id=__codelineno-0-249 name=__codelineno-0-249></a><span class=sd>        """</span>
</span><span id=__span-0-250><a id=__codelineno-0-250 name=__codelineno-0-250></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-251><a id=__codelineno-0-251 name=__codelineno-0-251></a>            <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-252><a id=__codelineno-0-252 name=__codelineno-0-252></a>                <span class=sa>f</span><span class=s2>"Connection to MCP server is not established: name=</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-253><a id=__codelineno-0-253 name=__codelineno-0-253></a>            <span class=p>)</span>
</span><span id=__span-0-254><a id=__codelineno-0-254 name=__codelineno-0-254></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>list_prompts</span><span class=p>()</span>
</span><span id=__span-0-255><a id=__codelineno-0-255 name=__codelineno-0-255></a>
</span><span id=__span-0-256><a id=__codelineno-0-256 name=__codelineno-0-256></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>_get_prompt_unsafe</span><span class=p>(</span>
</span><span id=__span-0-257><a id=__codelineno-0-257 name=__codelineno-0-257></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-258><a id=__codelineno-0-258 name=__codelineno-0-258></a>        <span class=n>prompt_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-259><a id=__codelineno-0-259 name=__codelineno-0-259></a>        <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-260><a id=__codelineno-0-260 name=__codelineno-0-260></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>GetPromptResult</span><span class=p>:</span>
</span><span id=__span-0-261><a id=__codelineno-0-261 name=__codelineno-0-261></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-262><a id=__codelineno-0-262 name=__codelineno-0-262></a><span class=sd>        Asynchronously get a prompt from the MCP server.</span>
</span><span id=__span-0-263><a id=__codelineno-0-263 name=__codelineno-0-263></a>
</span><span id=__span-0-264><a id=__codelineno-0-264 name=__codelineno-0-264></a><span class=sd>        Since the session used to communicate with the MCP server is bound to a specific event </span>
</span><span id=__span-0-265><a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=sd>        loop, this method should be called within the designated event loop for the connection.</span>
</span><span id=__span-0-266><a id=__codelineno-0-266 name=__codelineno-0-266></a><span class=sd>        """</span>
</span><span id=__span-0-267><a id=__codelineno-0-267 name=__codelineno-0-267></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-268><a id=__codelineno-0-268 name=__codelineno-0-268></a>            <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-269><a id=__codelineno-0-269 name=__codelineno-0-269></a>                <span class=sa>f</span><span class=s2>"Connection to MCP server is not established: name=</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-270><a id=__codelineno-0-270 name=__codelineno-0-270></a>            <span class=p>)</span>
</span><span id=__span-0-271><a id=__codelineno-0-271 name=__codelineno-0-271></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>get_prompt</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=n>prompt_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span> <span class=ow>or</span> <span class=p>{})</span>
</span><span id=__span-0-272><a id=__codelineno-0-272 name=__codelineno-0-272></a>
</span><span id=__span-0-273><a id=__codelineno-0-273 name=__codelineno-0-273></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>_list_tools_unsafe</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ListToolsResult</span><span class=p>:</span>
</span><span id=__span-0-274><a id=__codelineno-0-274 name=__codelineno-0-274></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-275><a id=__codelineno-0-275 name=__codelineno-0-275></a><span class=sd>        Asynchronously list the tools from the MCP server.</span>
</span><span id=__span-0-276><a id=__codelineno-0-276 name=__codelineno-0-276></a>
</span><span id=__span-0-277><a id=__codelineno-0-277 name=__codelineno-0-277></a><span class=sd>        Since the session used to communicate with the MCP server is bound to a specific event </span>
</span><span id=__span-0-278><a id=__codelineno-0-278 name=__codelineno-0-278></a><span class=sd>        loop, this method should be called within the designated event loop for the connection.</span>
</span><span id=__span-0-279><a id=__codelineno-0-279 name=__codelineno-0-279></a><span class=sd>        """</span>
</span><span id=__span-0-280><a id=__codelineno-0-280 name=__codelineno-0-280></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-281><a id=__codelineno-0-281 name=__codelineno-0-281></a>            <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-282><a id=__codelineno-0-282 name=__codelineno-0-282></a>                <span class=sa>f</span><span class=s2>"Connection to MCP server is not established: name=</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-283><a id=__codelineno-0-283 name=__codelineno-0-283></a>            <span class=p>)</span>
</span><span id=__span-0-284><a id=__codelineno-0-284 name=__codelineno-0-284></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-285><a id=__codelineno-0-285 name=__codelineno-0-285></a>            <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>list_tools</span><span class=p>()</span>
</span><span id=__span-0-286><a id=__codelineno-0-286 name=__codelineno-0-286></a>        <span class=k>except</span> <span class=n>McpError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-287><a id=__codelineno-0-287 name=__codelineno-0-287></a>            <span class=n>is_timeout</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-288><a id=__codelineno-0-288 name=__codelineno-0-288></a>            <span class=k>for</span> <span class=n>content</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>"timed out"</span><span class=p>,</span> <span class=s2>"timeout"</span><span class=p>]:</span>
</span><span id=__span-0-289><a id=__codelineno-0-289 name=__codelineno-0-289></a>                <span class=k>if</span> <span class=n>content</span> <span class=ow>in</span> <span class=nb>str</span><span class=o>.</span><span class=n>lower</span><span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>error</span><span class=o>.</span><span class=n>message</span><span class=p>):</span>
</span><span id=__span-0-290><a id=__codelineno-0-290 name=__codelineno-0-290></a>                    <span class=n>result</span> <span class=o>=</span> <span class=n>ListToolsResult</span><span class=p>(</span><span class=n>tools</span><span class=o>=</span><span class=p>[])</span>
</span><span id=__span-0-291><a id=__codelineno-0-291 name=__codelineno-0-291></a>                    <span class=n>is_timeout</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-292><a id=__codelineno-0-292 name=__codelineno-0-292></a>                    <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Timeout occurred while listing tools from MCP server: name=</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-0-293><a id=__codelineno-0-293 name=__codelineno-0-293></a>                    <span class=k>break</span>
</span><span id=__span-0-294><a id=__codelineno-0-294 name=__codelineno-0-294></a>            <span class=k>if</span> <span class=ow>not</span> <span class=n>is_timeout</span><span class=p>:</span>
</span><span id=__span-0-295><a id=__codelineno-0-295 name=__codelineno-0-295></a>                <span class=k>raise</span> <span class=n>e</span>
</span><span id=__span-0-296><a id=__codelineno-0-296 name=__codelineno-0-296></a>        <span class=k>return</span> <span class=n>result</span>
</span><span id=__span-0-297><a id=__codelineno-0-297 name=__codelineno-0-297></a>
</span><span id=__span-0-298><a id=__codelineno-0-298 name=__codelineno-0-298></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>_call_tool_unsafe</span><span class=p>(</span>
</span><span id=__span-0-299><a id=__codelineno-0-299 name=__codelineno-0-299></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-300><a id=__codelineno-0-300 name=__codelineno-0-300></a>        <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-301><a id=__codelineno-0-301 name=__codelineno-0-301></a>        <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-302><a id=__codelineno-0-302 name=__codelineno-0-302></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CallToolResult</span><span class=p>:</span>
</span><span id=__span-0-303><a id=__codelineno-0-303 name=__codelineno-0-303></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-304><a id=__codelineno-0-304 name=__codelineno-0-304></a><span class=sd>        Asynchronously call a tool on the MCP server.</span>
</span><span id=__span-0-305><a id=__codelineno-0-305 name=__codelineno-0-305></a>
</span><span id=__span-0-306><a id=__codelineno-0-306 name=__codelineno-0-306></a><span class=sd>        Since the session used to communicate with the MCP server is bound to a specific event </span>
</span><span id=__span-0-307><a id=__codelineno-0-307 name=__codelineno-0-307></a><span class=sd>        loop, this method should be called within the designated event loop for the connection.</span>
</span><span id=__span-0-308><a id=__codelineno-0-308 name=__codelineno-0-308></a><span class=sd>        """</span>
</span><span id=__span-0-309><a id=__codelineno-0-309 name=__codelineno-0-309></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-310><a id=__codelineno-0-310 name=__codelineno-0-310></a>            <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-311><a id=__codelineno-0-311 name=__codelineno-0-311></a>                <span class=sa>f</span><span class=s2>"Connection to MCP server is not established: name=</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-312><a id=__codelineno-0-312 name=__codelineno-0-312></a>            <span class=p>)</span>
</span><span id=__span-0-313><a id=__codelineno-0-313 name=__codelineno-0-313></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>call_tool</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=n>tool_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span> <span class=ow>or</span> <span class=p>{})</span>
</span><span id=__span-0-314><a id=__codelineno-0-314 name=__codelineno-0-314></a>
</span><span id=__span-0-315><a id=__codelineno-0-315 name=__codelineno-0-315></a>    <span class=c1>###########################################################################</span>
</span><span id=__span-0-316><a id=__codelineno-0-316 name=__codelineno-0-316></a>    <span class=c1># Public methods that are safely wrapped and could be called anywhere.</span>
</span><span id=__span-0-317><a id=__codelineno-0-317 name=__codelineno-0-317></a>    <span class=c1>###########################################################################</span>
</span><span id=__span-0-318><a id=__codelineno-0-318 name=__codelineno-0-318></a>
</span><span id=__span-0-319><a id=__codelineno-0-319 name=__codelineno-0-319></a>    <span class=k>def</span><span class=w> </span><span class=nf>list_prompts</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>"McpPromptTemplate"</span><span class=p>]:</span>
</span><span id=__span-0-320><a id=__codelineno-0-320 name=__codelineno-0-320></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-321><a id=__codelineno-0-321 name=__codelineno-0-321></a><span class=sd>        List the prompts from the MCP server.</span>
</span><span id=__span-0-322><a id=__codelineno-0-322 name=__codelineno-0-322></a>
</span><span id=__span-0-323><a id=__codelineno-0-323 name=__codelineno-0-323></a><span class=sd>        Returns</span>
</span><span id=__span-0-324><a id=__codelineno-0-324 name=__codelineno-0-324></a><span class=sd>        -------</span>
</span><span id=__span-0-325><a id=__codelineno-0-325 name=__codelineno-0-325></a><span class=sd>        List[McpPromptTemplate]</span>
</span><span id=__span-0-326><a id=__codelineno-0-326 name=__codelineno-0-326></a><span class=sd>            The list of prompt template instances from the server.</span>
</span><span id=__span-0-327><a id=__codelineno-0-327 name=__codelineno-0-327></a><span class=sd>        """</span>
</span><span id=__span-0-328><a id=__codelineno-0-328 name=__codelineno-0-328></a>        <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_template</span><span class=w> </span><span class=kn>import</span> <span class=n>McpPromptTemplate</span>
</span><span id=__span-0-329><a id=__codelineno-0-329 name=__codelineno-0-329></a>
</span><span id=__span-0-330><a id=__codelineno-0-330 name=__codelineno-0-330></a>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-331><a id=__codelineno-0-331 name=__codelineno-0-331></a>            <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_list_prompts_unsafe</span><span class=p>(),</span>
</span><span id=__span-0-332><a id=__codelineno-0-332 name=__codelineno-0-332></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-333><a id=__codelineno-0-333 name=__codelineno-0-333></a>        <span class=p>)</span>
</span><span id=__span-0-334><a id=__codelineno-0-334 name=__codelineno-0-334></a>
</span><span id=__span-0-335><a id=__codelineno-0-335 name=__codelineno-0-335></a>        <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-0-336><a id=__codelineno-0-336 name=__codelineno-0-336></a>            <span class=n>McpPromptTemplate</span><span class=p>(</span>
</span><span id=__span-0-337><a id=__codelineno-0-337 name=__codelineno-0-337></a>                <span class=n>prompt_name</span><span class=o>=</span><span class=n>prompt</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-338><a id=__codelineno-0-338 name=__codelineno-0-338></a>                <span class=n>prompt_info</span><span class=o>=</span><span class=n>prompt</span><span class=p>,</span>
</span><span id=__span-0-339><a id=__codelineno-0-339 name=__codelineno-0-339></a>                <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span>
</span><span id=__span-0-340><a id=__codelineno-0-340 name=__codelineno-0-340></a>            <span class=p>)</span>
</span><span id=__span-0-341><a id=__codelineno-0-341 name=__codelineno-0-341></a>            <span class=k>for</span> <span class=n>prompt</span> <span class=ow>in</span> <span class=n>result</span><span class=o>.</span><span class=n>prompts</span>
</span><span id=__span-0-342><a id=__codelineno-0-342 name=__codelineno-0-342></a>        <span class=p>]</span>
</span><span id=__span-0-343><a id=__codelineno-0-343 name=__codelineno-0-343></a>
</span><span id=__span-0-344><a id=__codelineno-0-344 name=__codelineno-0-344></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>alist_prompts</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>"McpPromptTemplate"</span><span class=p>]:</span>
</span><span id=__span-0-345><a id=__codelineno-0-345 name=__codelineno-0-345></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-346><a id=__codelineno-0-346 name=__codelineno-0-346></a><span class=sd>        Asynchronously list the prompts from the MCP server.</span>
</span><span id=__span-0-347><a id=__codelineno-0-347 name=__codelineno-0-347></a>
</span><span id=__span-0-348><a id=__codelineno-0-348 name=__codelineno-0-348></a><span class=sd>        Returns</span>
</span><span id=__span-0-349><a id=__codelineno-0-349 name=__codelineno-0-349></a><span class=sd>        -------</span>
</span><span id=__span-0-350><a id=__codelineno-0-350 name=__codelineno-0-350></a><span class=sd>        List[McpPromptTemplate]</span>
</span><span id=__span-0-351><a id=__codelineno-0-351 name=__codelineno-0-351></a><span class=sd>            The list of prompt template instances from the server.</span>
</span><span id=__span-0-352><a id=__codelineno-0-352 name=__codelineno-0-352></a><span class=sd>        """</span>
</span><span id=__span-0-353><a id=__codelineno-0-353 name=__codelineno-0-353></a>        <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_template</span><span class=w> </span><span class=kn>import</span> <span class=n>McpPromptTemplate</span>
</span><span id=__span-0-354><a id=__codelineno-0-354 name=__codelineno-0-354></a>
</span><span id=__span-0-355><a id=__codelineno-0-355 name=__codelineno-0-355></a>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_async</span><span class=p>(</span>
</span><span id=__span-0-356><a id=__codelineno-0-356 name=__codelineno-0-356></a>            <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_list_prompts_unsafe</span><span class=p>(),</span>
</span><span id=__span-0-357><a id=__codelineno-0-357 name=__codelineno-0-357></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-358><a id=__codelineno-0-358 name=__codelineno-0-358></a>        <span class=p>)</span>
</span><span id=__span-0-359><a id=__codelineno-0-359 name=__codelineno-0-359></a>
</span><span id=__span-0-360><a id=__codelineno-0-360 name=__codelineno-0-360></a>        <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-0-361><a id=__codelineno-0-361 name=__codelineno-0-361></a>            <span class=n>McpPromptTemplate</span><span class=p>(</span>
</span><span id=__span-0-362><a id=__codelineno-0-362 name=__codelineno-0-362></a>                <span class=n>prompt_name</span><span class=o>=</span><span class=n>prompt</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-363><a id=__codelineno-0-363 name=__codelineno-0-363></a>                <span class=n>prompt_info</span><span class=o>=</span><span class=n>prompt</span><span class=p>,</span>
</span><span id=__span-0-364><a id=__codelineno-0-364 name=__codelineno-0-364></a>                <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span>
</span><span id=__span-0-365><a id=__codelineno-0-365 name=__codelineno-0-365></a>            <span class=p>)</span>
</span><span id=__span-0-366><a id=__codelineno-0-366 name=__codelineno-0-366></a>            <span class=k>for</span> <span class=n>prompt</span> <span class=ow>in</span> <span class=n>result</span><span class=o>.</span><span class=n>prompts</span>
</span><span id=__span-0-367><a id=__codelineno-0-367 name=__codelineno-0-367></a>        <span class=p>]</span>
</span><span id=__span-0-368><a id=__codelineno-0-368 name=__codelineno-0-368></a>
</span><span id=__span-0-369><a id=__codelineno-0-369 name=__codelineno-0-369></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_prompt</span><span class=p>(</span>
</span><span id=__span-0-370><a id=__codelineno-0-370 name=__codelineno-0-370></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-371><a id=__codelineno-0-371 name=__codelineno-0-371></a>        <span class=n>prompt_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-372><a id=__codelineno-0-372 name=__codelineno-0-372></a>        <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-373><a id=__codelineno-0-373 name=__codelineno-0-373></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>GetPromptResult</span><span class=p>:</span>
</span><span id=__span-0-374><a id=__codelineno-0-374 name=__codelineno-0-374></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-375><a id=__codelineno-0-375 name=__codelineno-0-375></a><span class=sd>        Synchronously get a prompt from the MCP server.</span>
</span><span id=__span-0-376><a id=__codelineno-0-376 name=__codelineno-0-376></a>
</span><span id=__span-0-377><a id=__codelineno-0-377 name=__codelineno-0-377></a><span class=sd>        Parameters</span>
</span><span id=__span-0-378><a id=__codelineno-0-378 name=__codelineno-0-378></a><span class=sd>        ----------</span>
</span><span id=__span-0-379><a id=__codelineno-0-379 name=__codelineno-0-379></a><span class=sd>        prompt_name : str</span>
</span><span id=__span-0-380><a id=__codelineno-0-380 name=__codelineno-0-380></a><span class=sd>            The name of the prompt to retrieve.</span>
</span><span id=__span-0-381><a id=__codelineno-0-381 name=__codelineno-0-381></a><span class=sd>        arguments : Optional[Dict[str, Any]]</span>
</span><span id=__span-0-382><a id=__codelineno-0-382 name=__codelineno-0-382></a><span class=sd>            Arguments to pass to the prompt.</span>
</span><span id=__span-0-383><a id=__codelineno-0-383 name=__codelineno-0-383></a>
</span><span id=__span-0-384><a id=__codelineno-0-384 name=__codelineno-0-384></a><span class=sd>        Returns</span>
</span><span id=__span-0-385><a id=__codelineno-0-385 name=__codelineno-0-385></a><span class=sd>        -------</span>
</span><span id=__span-0-386><a id=__codelineno-0-386 name=__codelineno-0-386></a><span class=sd>        GetPromptResult</span>
</span><span id=__span-0-387><a id=__codelineno-0-387 name=__codelineno-0-387></a><span class=sd>            The prompt result from the server.</span>
</span><span id=__span-0-388><a id=__codelineno-0-388 name=__codelineno-0-388></a>
</span><span id=__span-0-389><a id=__codelineno-0-389 name=__codelineno-0-389></a><span class=sd>        Raises</span>
</span><span id=__span-0-390><a id=__codelineno-0-390 name=__codelineno-0-390></a><span class=sd>        ------</span>
</span><span id=__span-0-391><a id=__codelineno-0-391 name=__codelineno-0-391></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-392><a id=__codelineno-0-392 name=__codelineno-0-392></a><span class=sd>            If the connection is not established.</span>
</span><span id=__span-0-393><a id=__codelineno-0-393 name=__codelineno-0-393></a><span class=sd>        """</span>
</span><span id=__span-0-394><a id=__codelineno-0-394 name=__codelineno-0-394></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-395><a id=__codelineno-0-395 name=__codelineno-0-395></a>            <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_prompt_unsafe</span><span class=p>(</span><span class=n>prompt_name</span><span class=o>=</span><span class=n>prompt_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span><span class=p>),</span>
</span><span id=__span-0-396><a id=__codelineno-0-396 name=__codelineno-0-396></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-397><a id=__codelineno-0-397 name=__codelineno-0-397></a>        <span class=p>)</span>
</span><span id=__span-0-398><a id=__codelineno-0-398 name=__codelineno-0-398></a>
</span><span id=__span-0-399><a id=__codelineno-0-399 name=__codelineno-0-399></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>aget_prompt</span><span class=p>(</span>
</span><span id=__span-0-400><a id=__codelineno-0-400 name=__codelineno-0-400></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-401><a id=__codelineno-0-401 name=__codelineno-0-401></a>        <span class=n>prompt_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-402><a id=__codelineno-0-402 name=__codelineno-0-402></a>        <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-403><a id=__codelineno-0-403 name=__codelineno-0-403></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>GetPromptResult</span><span class=p>:</span>
</span><span id=__span-0-404><a id=__codelineno-0-404 name=__codelineno-0-404></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-405><a id=__codelineno-0-405 name=__codelineno-0-405></a><span class=sd>        Asynchronously get a prompt from the MCP server.</span>
</span><span id=__span-0-406><a id=__codelineno-0-406 name=__codelineno-0-406></a>
</span><span id=__span-0-407><a id=__codelineno-0-407 name=__codelineno-0-407></a><span class=sd>        Parameters</span>
</span><span id=__span-0-408><a id=__codelineno-0-408 name=__codelineno-0-408></a><span class=sd>        ----------</span>
</span><span id=__span-0-409><a id=__codelineno-0-409 name=__codelineno-0-409></a><span class=sd>        prompt_name : str</span>
</span><span id=__span-0-410><a id=__codelineno-0-410 name=__codelineno-0-410></a><span class=sd>            The name of the prompt to retrieve.</span>
</span><span id=__span-0-411><a id=__codelineno-0-411 name=__codelineno-0-411></a><span class=sd>        arguments : Optional[Dict[str, Any]]</span>
</span><span id=__span-0-412><a id=__codelineno-0-412 name=__codelineno-0-412></a><span class=sd>            Arguments to pass to the prompt.</span>
</span><span id=__span-0-413><a id=__codelineno-0-413 name=__codelineno-0-413></a>
</span><span id=__span-0-414><a id=__codelineno-0-414 name=__codelineno-0-414></a><span class=sd>        Returns</span>
</span><span id=__span-0-415><a id=__codelineno-0-415 name=__codelineno-0-415></a><span class=sd>        -------</span>
</span><span id=__span-0-416><a id=__codelineno-0-416 name=__codelineno-0-416></a><span class=sd>        GetPromptResult</span>
</span><span id=__span-0-417><a id=__codelineno-0-417 name=__codelineno-0-417></a><span class=sd>            The prompt result from the server.</span>
</span><span id=__span-0-418><a id=__codelineno-0-418 name=__codelineno-0-418></a>
</span><span id=__span-0-419><a id=__codelineno-0-419 name=__codelineno-0-419></a><span class=sd>        Raises</span>
</span><span id=__span-0-420><a id=__codelineno-0-420 name=__codelineno-0-420></a><span class=sd>        ------</span>
</span><span id=__span-0-421><a id=__codelineno-0-421 name=__codelineno-0-421></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-422><a id=__codelineno-0-422 name=__codelineno-0-422></a><span class=sd>            If the connection is not established.</span>
</span><span id=__span-0-423><a id=__codelineno-0-423 name=__codelineno-0-423></a><span class=sd>        """</span>
</span><span id=__span-0-424><a id=__codelineno-0-424 name=__codelineno-0-424></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_async</span><span class=p>(</span>
</span><span id=__span-0-425><a id=__codelineno-0-425 name=__codelineno-0-425></a>            <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_prompt_unsafe</span><span class=p>(</span><span class=n>prompt_name</span><span class=o>=</span><span class=n>prompt_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span><span class=p>),</span>
</span><span id=__span-0-426><a id=__codelineno-0-426 name=__codelineno-0-426></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-427><a id=__codelineno-0-427 name=__codelineno-0-427></a>        <span class=p>)</span>
</span><span id=__span-0-428><a id=__codelineno-0-428 name=__codelineno-0-428></a>
</span><span id=__span-0-429><a id=__codelineno-0-429 name=__codelineno-0-429></a>    <span class=k>def</span><span class=w> </span><span class=nf>list_tools</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>"McpToolSpec"</span><span class=p>]:</span>
</span><span id=__span-0-430><a id=__codelineno-0-430 name=__codelineno-0-430></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-431><a id=__codelineno-0-431 name=__codelineno-0-431></a><span class=sd>        List the tools from the MCP server.</span>
</span><span id=__span-0-432><a id=__codelineno-0-432 name=__codelineno-0-432></a>
</span><span id=__span-0-433><a id=__codelineno-0-433 name=__codelineno-0-433></a><span class=sd>        This method synchronously retrieves the list of tools available from the connected</span>
</span><span id=__span-0-434><a id=__codelineno-0-434 name=__codelineno-0-434></a><span class=sd>        MCP server and wraps each tool in an `McpToolSpec` instance for use within the</span>
</span><span id=__span-0-435><a id=__codelineno-0-435 name=__codelineno-0-435></a><span class=sd>        bridgic framework.</span>
</span><span id=__span-0-436><a id=__codelineno-0-436 name=__codelineno-0-436></a>
</span><span id=__span-0-437><a id=__codelineno-0-437 name=__codelineno-0-437></a><span class=sd>        Returns</span>
</span><span id=__span-0-438><a id=__codelineno-0-438 name=__codelineno-0-438></a><span class=sd>        -------</span>
</span><span id=__span-0-439><a id=__codelineno-0-439 name=__codelineno-0-439></a><span class=sd>        List[McpToolSpec]</span>
</span><span id=__span-0-440><a id=__codelineno-0-440 name=__codelineno-0-440></a><span class=sd>            The list of tool specification instances from the server.</span>
</span><span id=__span-0-441><a id=__codelineno-0-441 name=__codelineno-0-441></a>
</span><span id=__span-0-442><a id=__codelineno-0-442 name=__codelineno-0-442></a><span class=sd>        Raises</span>
</span><span id=__span-0-443><a id=__codelineno-0-443 name=__codelineno-0-443></a><span class=sd>        ------</span>
</span><span id=__span-0-444><a id=__codelineno-0-444 name=__codelineno-0-444></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-445><a id=__codelineno-0-445 name=__codelineno-0-445></a><span class=sd>            If the connection is not established and cannot be established.</span>
</span><span id=__span-0-446><a id=__codelineno-0-446 name=__codelineno-0-446></a><span class=sd>        """</span>
</span><span id=__span-0-447><a id=__codelineno-0-447 name=__codelineno-0-447></a>        <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_tool_spec</span><span class=w> </span><span class=kn>import</span> <span class=n>McpToolSpec</span>
</span><span id=__span-0-448><a id=__codelineno-0-448 name=__codelineno-0-448></a>
</span><span id=__span-0-449><a id=__codelineno-0-449 name=__codelineno-0-449></a>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-450><a id=__codelineno-0-450 name=__codelineno-0-450></a>            <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_list_tools_unsafe</span><span class=p>(),</span>
</span><span id=__span-0-451><a id=__codelineno-0-451 name=__codelineno-0-451></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-452><a id=__codelineno-0-452 name=__codelineno-0-452></a>        <span class=p>)</span>
</span><span id=__span-0-453><a id=__codelineno-0-453 name=__codelineno-0-453></a>
</span><span id=__span-0-454><a id=__codelineno-0-454 name=__codelineno-0-454></a>        <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-0-455><a id=__codelineno-0-455 name=__codelineno-0-455></a>            <span class=n>McpToolSpec</span><span class=p>(</span>
</span><span id=__span-0-456><a id=__codelineno-0-456 name=__codelineno-0-456></a>                <span class=n>tool_name</span><span class=o>=</span><span class=n>tool</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-457><a id=__codelineno-0-457 name=__codelineno-0-457></a>                <span class=n>tool_info</span><span class=o>=</span><span class=n>tool</span><span class=p>,</span>
</span><span id=__span-0-458><a id=__codelineno-0-458 name=__codelineno-0-458></a>                <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span>
</span><span id=__span-0-459><a id=__codelineno-0-459 name=__codelineno-0-459></a>            <span class=p>)</span>
</span><span id=__span-0-460><a id=__codelineno-0-460 name=__codelineno-0-460></a>            <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>result</span><span class=o>.</span><span class=n>tools</span>
</span><span id=__span-0-461><a id=__codelineno-0-461 name=__codelineno-0-461></a>        <span class=p>]</span>
</span><span id=__span-0-462><a id=__codelineno-0-462 name=__codelineno-0-462></a>
</span><span id=__span-0-463><a id=__codelineno-0-463 name=__codelineno-0-463></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>alist_tools</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>"McpToolSpec"</span><span class=p>]:</span>
</span><span id=__span-0-464><a id=__codelineno-0-464 name=__codelineno-0-464></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-465><a id=__codelineno-0-465 name=__codelineno-0-465></a><span class=sd>        Asynchronously list the tools from the MCP server.</span>
</span><span id=__span-0-466><a id=__codelineno-0-466 name=__codelineno-0-466></a>
</span><span id=__span-0-467><a id=__codelineno-0-467 name=__codelineno-0-467></a><span class=sd>        This method asynchronously retrieves the list of tools available from the connected</span>
</span><span id=__span-0-468><a id=__codelineno-0-468 name=__codelineno-0-468></a><span class=sd>        MCP server and wraps each tool in an `McpToolSpec` instance for use within the</span>
</span><span id=__span-0-469><a id=__codelineno-0-469 name=__codelineno-0-469></a><span class=sd>        bridgic framework.</span>
</span><span id=__span-0-470><a id=__codelineno-0-470 name=__codelineno-0-470></a>
</span><span id=__span-0-471><a id=__codelineno-0-471 name=__codelineno-0-471></a><span class=sd>        Returns</span>
</span><span id=__span-0-472><a id=__codelineno-0-472 name=__codelineno-0-472></a><span class=sd>        -------</span>
</span><span id=__span-0-473><a id=__codelineno-0-473 name=__codelineno-0-473></a><span class=sd>        List[McpToolSpec]</span>
</span><span id=__span-0-474><a id=__codelineno-0-474 name=__codelineno-0-474></a><span class=sd>            The list of tool specification instances from the server.</span>
</span><span id=__span-0-475><a id=__codelineno-0-475 name=__codelineno-0-475></a>
</span><span id=__span-0-476><a id=__codelineno-0-476 name=__codelineno-0-476></a><span class=sd>        Raises</span>
</span><span id=__span-0-477><a id=__codelineno-0-477 name=__codelineno-0-477></a><span class=sd>        ------</span>
</span><span id=__span-0-478><a id=__codelineno-0-478 name=__codelineno-0-478></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-479><a id=__codelineno-0-479 name=__codelineno-0-479></a><span class=sd>            If the connection is not established and cannot be established.</span>
</span><span id=__span-0-480><a id=__codelineno-0-480 name=__codelineno-0-480></a><span class=sd>        """</span>
</span><span id=__span-0-481><a id=__codelineno-0-481 name=__codelineno-0-481></a>        <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_tool_spec</span><span class=w> </span><span class=kn>import</span> <span class=n>McpToolSpec</span>
</span><span id=__span-0-482><a id=__codelineno-0-482 name=__codelineno-0-482></a>
</span><span id=__span-0-483><a id=__codelineno-0-483 name=__codelineno-0-483></a>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_async</span><span class=p>(</span>
</span><span id=__span-0-484><a id=__codelineno-0-484 name=__codelineno-0-484></a>            <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_list_tools_unsafe</span><span class=p>(),</span>
</span><span id=__span-0-485><a id=__codelineno-0-485 name=__codelineno-0-485></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-486><a id=__codelineno-0-486 name=__codelineno-0-486></a>        <span class=p>)</span>
</span><span id=__span-0-487><a id=__codelineno-0-487 name=__codelineno-0-487></a>
</span><span id=__span-0-488><a id=__codelineno-0-488 name=__codelineno-0-488></a>        <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-0-489><a id=__codelineno-0-489 name=__codelineno-0-489></a>            <span class=n>McpToolSpec</span><span class=p>(</span>
</span><span id=__span-0-490><a id=__codelineno-0-490 name=__codelineno-0-490></a>                <span class=n>tool_name</span><span class=o>=</span><span class=n>tool</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-491><a id=__codelineno-0-491 name=__codelineno-0-491></a>                <span class=n>tool_info</span><span class=o>=</span><span class=n>tool</span><span class=p>,</span>
</span><span id=__span-0-492><a id=__codelineno-0-492 name=__codelineno-0-492></a>                <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span>
</span><span id=__span-0-493><a id=__codelineno-0-493 name=__codelineno-0-493></a>            <span class=p>)</span>
</span><span id=__span-0-494><a id=__codelineno-0-494 name=__codelineno-0-494></a>            <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>result</span><span class=o>.</span><span class=n>tools</span>
</span><span id=__span-0-495><a id=__codelineno-0-495 name=__codelineno-0-495></a>        <span class=p>]</span>
</span><span id=__span-0-496><a id=__codelineno-0-496 name=__codelineno-0-496></a>
</span><span id=__span-0-497><a id=__codelineno-0-497 name=__codelineno-0-497></a>    <span class=k>def</span><span class=w> </span><span class=nf>call_tool</span><span class=p>(</span>
</span><span id=__span-0-498><a id=__codelineno-0-498 name=__codelineno-0-498></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-499><a id=__codelineno-0-499 name=__codelineno-0-499></a>        <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-500><a id=__codelineno-0-500 name=__codelineno-0-500></a>        <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-501><a id=__codelineno-0-501 name=__codelineno-0-501></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CallToolResult</span><span class=p>:</span>
</span><span id=__span-0-502><a id=__codelineno-0-502 name=__codelineno-0-502></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-503><a id=__codelineno-0-503 name=__codelineno-0-503></a><span class=sd>        Synchronously call a tool on the MCP server.</span>
</span><span id=__span-0-504><a id=__codelineno-0-504 name=__codelineno-0-504></a>
</span><span id=__span-0-505><a id=__codelineno-0-505 name=__codelineno-0-505></a><span class=sd>        This method synchronously invokes a tool on the connected MCP server with the</span>
</span><span id=__span-0-506><a id=__codelineno-0-506 name=__codelineno-0-506></a><span class=sd>        specified arguments and returns the result.</span>
</span><span id=__span-0-507><a id=__codelineno-0-507 name=__codelineno-0-507></a>
</span><span id=__span-0-508><a id=__codelineno-0-508 name=__codelineno-0-508></a><span class=sd>        Parameters</span>
</span><span id=__span-0-509><a id=__codelineno-0-509 name=__codelineno-0-509></a><span class=sd>        ----------</span>
</span><span id=__span-0-510><a id=__codelineno-0-510 name=__codelineno-0-510></a><span class=sd>        tool_name : str</span>
</span><span id=__span-0-511><a id=__codelineno-0-511 name=__codelineno-0-511></a><span class=sd>            The name of the tool to call.</span>
</span><span id=__span-0-512><a id=__codelineno-0-512 name=__codelineno-0-512></a><span class=sd>        arguments : Optional[Dict[str, Any]]</span>
</span><span id=__span-0-513><a id=__codelineno-0-513 name=__codelineno-0-513></a><span class=sd>            The arguments to pass to the tool. If None, an empty dictionary will be used.</span>
</span><span id=__span-0-514><a id=__codelineno-0-514 name=__codelineno-0-514></a>
</span><span id=__span-0-515><a id=__codelineno-0-515 name=__codelineno-0-515></a><span class=sd>        Returns</span>
</span><span id=__span-0-516><a id=__codelineno-0-516 name=__codelineno-0-516></a><span class=sd>        -------</span>
</span><span id=__span-0-517><a id=__codelineno-0-517 name=__codelineno-0-517></a><span class=sd>        CallToolResult</span>
</span><span id=__span-0-518><a id=__codelineno-0-518 name=__codelineno-0-518></a><span class=sd>            The result of the tool call from the server, containing content and optionally</span>
</span><span id=__span-0-519><a id=__codelineno-0-519 name=__codelineno-0-519></a><span class=sd>            structured content.</span>
</span><span id=__span-0-520><a id=__codelineno-0-520 name=__codelineno-0-520></a>
</span><span id=__span-0-521><a id=__codelineno-0-521 name=__codelineno-0-521></a><span class=sd>        Raises</span>
</span><span id=__span-0-522><a id=__codelineno-0-522 name=__codelineno-0-522></a><span class=sd>        ------</span>
</span><span id=__span-0-523><a id=__codelineno-0-523 name=__codelineno-0-523></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-524><a id=__codelineno-0-524 name=__codelineno-0-524></a><span class=sd>            If the connection is not established and cannot be established.</span>
</span><span id=__span-0-525><a id=__codelineno-0-525 name=__codelineno-0-525></a><span class=sd>        """</span>
</span><span id=__span-0-526><a id=__codelineno-0-526 name=__codelineno-0-526></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-527><a id=__codelineno-0-527 name=__codelineno-0-527></a>            <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_call_tool_unsafe</span><span class=p>(</span><span class=n>tool_name</span><span class=o>=</span><span class=n>tool_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span><span class=p>),</span>
</span><span id=__span-0-528><a id=__codelineno-0-528 name=__codelineno-0-528></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-529><a id=__codelineno-0-529 name=__codelineno-0-529></a>        <span class=p>)</span>
</span><span id=__span-0-530><a id=__codelineno-0-530 name=__codelineno-0-530></a>
</span><span id=__span-0-531><a id=__codelineno-0-531 name=__codelineno-0-531></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>acall_tool</span><span class=p>(</span>
</span><span id=__span-0-532><a id=__codelineno-0-532 name=__codelineno-0-532></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-533><a id=__codelineno-0-533 name=__codelineno-0-533></a>        <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-534><a id=__codelineno-0-534 name=__codelineno-0-534></a>        <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-535><a id=__codelineno-0-535 name=__codelineno-0-535></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CallToolResult</span><span class=p>:</span>
</span><span id=__span-0-536><a id=__codelineno-0-536 name=__codelineno-0-536></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-537><a id=__codelineno-0-537 name=__codelineno-0-537></a><span class=sd>        Asynchronously call a tool on the MCP server.</span>
</span><span id=__span-0-538><a id=__codelineno-0-538 name=__codelineno-0-538></a>
</span><span id=__span-0-539><a id=__codelineno-0-539 name=__codelineno-0-539></a><span class=sd>        This method asynchronously invokes a tool on the connected MCP server with the</span>
</span><span id=__span-0-540><a id=__codelineno-0-540 name=__codelineno-0-540></a><span class=sd>        specified arguments and returns the result.</span>
</span><span id=__span-0-541><a id=__codelineno-0-541 name=__codelineno-0-541></a>
</span><span id=__span-0-542><a id=__codelineno-0-542 name=__codelineno-0-542></a><span class=sd>        Parameters</span>
</span><span id=__span-0-543><a id=__codelineno-0-543 name=__codelineno-0-543></a><span class=sd>        ----------</span>
</span><span id=__span-0-544><a id=__codelineno-0-544 name=__codelineno-0-544></a><span class=sd>        tool_name : str</span>
</span><span id=__span-0-545><a id=__codelineno-0-545 name=__codelineno-0-545></a><span class=sd>            The name of the tool to call.</span>
</span><span id=__span-0-546><a id=__codelineno-0-546 name=__codelineno-0-546></a><span class=sd>        arguments : Optional[Dict[str, Any]]</span>
</span><span id=__span-0-547><a id=__codelineno-0-547 name=__codelineno-0-547></a><span class=sd>            The arguments to pass to the tool. If None, an empty dictionary will be used.</span>
</span><span id=__span-0-548><a id=__codelineno-0-548 name=__codelineno-0-548></a>
</span><span id=__span-0-549><a id=__codelineno-0-549 name=__codelineno-0-549></a><span class=sd>        Returns</span>
</span><span id=__span-0-550><a id=__codelineno-0-550 name=__codelineno-0-550></a><span class=sd>        -------</span>
</span><span id=__span-0-551><a id=__codelineno-0-551 name=__codelineno-0-551></a><span class=sd>        CallToolResult</span>
</span><span id=__span-0-552><a id=__codelineno-0-552 name=__codelineno-0-552></a><span class=sd>            The result of the tool call from the server, containing content and optionally</span>
</span><span id=__span-0-553><a id=__codelineno-0-553 name=__codelineno-0-553></a><span class=sd>            structured content.</span>
</span><span id=__span-0-554><a id=__codelineno-0-554 name=__codelineno-0-554></a>
</span><span id=__span-0-555><a id=__codelineno-0-555 name=__codelineno-0-555></a><span class=sd>        Raises</span>
</span><span id=__span-0-556><a id=__codelineno-0-556 name=__codelineno-0-556></a><span class=sd>        ------</span>
</span><span id=__span-0-557><a id=__codelineno-0-557 name=__codelineno-0-557></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-558><a id=__codelineno-0-558 name=__codelineno-0-558></a><span class=sd>            If the connection is not established and cannot be established.</span>
</span><span id=__span-0-559><a id=__codelineno-0-559 name=__codelineno-0-559></a><span class=sd>        """</span>
</span><span id=__span-0-560><a id=__codelineno-0-560 name=__codelineno-0-560></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_async</span><span class=p>(</span>
</span><span id=__span-0-561><a id=__codelineno-0-561 name=__codelineno-0-561></a>            <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_call_tool_unsafe</span><span class=p>(</span><span class=n>tool_name</span><span class=o>=</span><span class=n>tool_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span><span class=p>),</span>
</span><span id=__span-0-562><a id=__codelineno-0-562 name=__codelineno-0-562></a>            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-563><a id=__codelineno-0-563 name=__codelineno-0-563></a>        <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnection.name class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">name</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnection.name class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>name</span><span class=p>:</span> <span class=n><span title=str>str</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnection(name)>name</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The name of the connected MCP server.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnection.request_timeout class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">request_timeout</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnection.request_timeout class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>request_timeout</span><span class=p>:</span> <span class=n><span title=int>int</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnection(request_timeout)>request_timeout</span></span> <span class=ow>or</span> <span class=mi>30</span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The timeout in seconds for the requests to the MCP server. Default is 30 seconds.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnection.encoding class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">encoding</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnection.encoding class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>encoding</span><span class=p>:</span> <span class=n><span title=str>str</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The encoding to use for the connection.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnection.client_kwargs class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">client_kwargs</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnection.client_kwargs class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>client_kwargs</span><span class=p>:</span> <span class=n><span title=typing.Dict>Dict</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>]</span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnection(kwargs)>kwargs</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The keyword arguments to pass to the MCP client.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnection.is_connected class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">is_connected</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnection.is_connected class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>is_connected</span><span class=p>:</span> <span class=n><span title=bool>bool</span></span> <span class=o>=</span> <span class=kc>False</span>
</span></code></pre></div> <div class="doc doc-contents "> <p>Whether the connection is established.</p> </div> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.connect class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">connect</span> <a href=#bridgic.protocols.mcp.McpServerConnection.connect class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>connect</span><span class=p>()</span>
</span></code></pre></div> <p>Establish a connection to the MCP server. Call this method once before using the connection.</p> <p>If the connection is not registered in a specific manager explicitly, it will be registered in the default manager (manager_name="default-mcp-manager"). If the connection needs to be registered in a specific manager, the <code>connect</code> method should be called after the registration.</p> <details class=note open> <summary>Notes</summary> <p>The event loop responsible for managing the session is determined at the time when <code>connect()</code> is called. Therefore, it is required to register the connection to the desired manager <em>before</em> calling <code>connect()</code>. Otherwise, the connection will be registered to the default manager. All registrations could not be changed later.</p> </details> <p><span class=doc-section-title>Examples:</span></p> <p>Create a connection to a streamable HTTP MCP server and register it to a manager:</p> <div class="language-pycon highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span>
<span class=normal><a href=#__codelineno-0-2>2</a></span>
<span class=normal><a href=#__codelineno-0-3>3</a></span>
<span class=normal><a href=#__codelineno-0-4>4</a></span>
<span class=normal><a href=#__codelineno-0-5>5</a></span>
<span class=normal><a href=#__codelineno-0-6>6</a></span>
<span class=normal><a href=#__codelineno-0-7>7</a></span>
<span class=normal><a href=#__codelineno-0-8>8</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>connection</span> <span class=o>=</span> <span class=n>McpServerConnectionStreamableHttp</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=gp>... </span>    <span class=n>name</span><span class=o>=</span><span class=s2>"streamable-http-server-connection"</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=gp>... </span>    <span class=n>url</span><span class=o>=</span><span class=s2>"http://localhost:8000"</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=gp>... </span>    <span class=n>request_timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=gp>&gt;&gt;&gt; </span><span class=n>manager</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_instance</span><span class=p>(</span><span class=s2>"my-manager"</span><span class=p>)</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=gp>&gt;&gt;&gt; </span><span class=n>manager</span><span class=o>.</span><span class=n>register_connection</span><span class=p>(</span><span class=n>connection</span><span class=p>)</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8></a><span class=gp>&gt;&gt;&gt; </span><span class=n>connection</span><span class=o>.</span><span class=n>connect</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=k>def</span><span class=w> </span><span class=nf>connect</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=sd>    Establish a connection to the MCP server. Call this method once before using the connection.</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=sd>    If the connection is not registered in a specific manager explicitly, it will be registered</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=sd>    in the default manager (manager_name="default-mcp-manager"). If the connection needs to be</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>    registered in a specific manager, the `connect` method should be called after the registration.</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=sd>    Notes</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=sd>    -----</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>    The event loop responsible for managing the session is determined at the time when `connect()` is called.</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a><span class=sd>    Therefore, it is required to register the connection to the desired manager *before* calling `connect()`.</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>    Otherwise, the connection will be registered to the default manager. All registrations could not be changed later.</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>    Examples</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>    --------</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a><span class=sd>    Create a connection to a streamable HTTP MCP server and register it to a manager:</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a><span class=sd>    &gt;&gt;&gt; connection = McpServerConnectionStreamableHttp(</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=sd>    ...     name="streamable-http-server-connection",</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=sd>    ...     url="http://localhost:8000",</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=sd>    ...     request_timeout=5,</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a><span class=sd>    ... )</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=sd>    &gt;&gt;&gt; manager = McpServerConnectionManager.get_instance("my-manager")</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a><span class=sd>    &gt;&gt;&gt; manager.register_connection(connection)</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a><span class=sd>    &gt;&gt;&gt; connection.connect()</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=sd>    """</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span><span class=p>:</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>        <span class=k>return</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>    <span class=c1># Create events and lifecycle task in the manager's event loop.</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>setup_and_wait</span><span class=p>():</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>        <span class=c1># Create events in the manager's event loop.</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_stop_event</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_ready_event</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_error</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>        <span class=c1># Create the lifecycle task.</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task_coro</span><span class=p>())</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>        <span class=c1># Wait for connection to be ready</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_ready_event</span><span class=o>.</span><span class=n>wait</span><span class=p>()</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>        <span class=c1># Check if there was an error</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_error</span><span class=p>:</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>            <span class=k>raise</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_error</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>    <span class=c1># Setup the connection and make sure it could be closed within the same lifecycle task.</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>        <span class=n>coro</span><span class=o>=</span><span class=n>setup_and_wait</span><span class=p>(),</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.close class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">close</span> <a href=#bridgic.protocols.mcp.McpServerConnection.close class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>close</span><span class=p>()</span>
</span></code></pre></div> <p>Close the connection to the MCP server.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a><span class=k>def</span><span class=w> </span><span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>    Close the connection to the MCP server.</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=sd>    """</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span><span class=p>:</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>        <span class=k>return</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a>    <span class=c1># Signal the lifecycle task to stop and wait for it to complete.</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>stop_and_wait</span><span class=p>():</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_stop_event</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_connection_stop_event</span><span class=o>.</span><span class=n>set</span><span class=p>()</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a>                <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>                <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Exception occurred while waiting for the lifecycle task to complete: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a>            <span class=k>finally</span><span class=p>:</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a>                <span class=bp>self</span><span class=o>.</span><span class=n>is_connected</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a>                <span class=bp>self</span><span class=o>.</span><span class=n>_lifecycle_task</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a>                <span class=bp>self</span><span class=o>.</span><span class=n>_manager</span><span class=o>.</span><span class=n>unregister_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a>        <span class=n>coro</span><span class=o>=</span><span class=n>stop_and_wait</span><span class=p>(),</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.get_mcp_client class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_mcp_client</span> <a href=#bridgic.protocols.mcp.McpServerConnection.get_mcp_client class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_mcp_client</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n><span title=contextlib._AsyncGeneratorContextManager>_AsyncGeneratorContextManager</span></span><span class=p>[</span><span class=n><span title=typing.Any>Any</span></span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span>
</span></code></pre></div> <p>Get an MCP client.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=contextlib._AsyncGeneratorContextManager>_AsyncGeneratorContextManager</span>[<span title=typing.Any>Any</span>, None]</code> </td> <td> <div class=doc-md-description> <p>An async context manager for the MCP client transport.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a><span class=nd>@abstractmethod</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a><span class=k>def</span><span class=w> </span><span class=nf>get_mcp_client</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>_AsyncGeneratorContextManager</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=kc>None</span><span class=p>]:</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a><span class=sd>    Get an MCP client.</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a><span class=sd>    Returns</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a><span class=sd>    -------</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a><span class=sd>    _AsyncGeneratorContextManager[Any, None]</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a><span class=sd>        An async context manager for the MCP client transport.</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a><span class=sd>    """</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>    <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.list_prompts class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">list_prompts</span> <a href=#bridgic.protocols.mcp.McpServerConnection.list_prompts class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>list_prompts</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><span title=typing.List>List</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpPromptTemplate</span> (<code>bridgic.protocols.mcp._mcp_template.McpPromptTemplate</code>)' href=#bridgic.protocols.mcp.McpPromptTemplate>McpPromptTemplate</a></span><span class=p>]</span>
</span></code></pre></div> <p>List the prompts from the MCP server.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.List>List</span>[<a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpPromptTemplate</span> (<code>bridgic.protocols.mcp._mcp_template.McpPromptTemplate</code>)' href=#bridgic.protocols.mcp.McpPromptTemplate>McpPromptTemplate</a>]</code> </td> <td> <div class=doc-md-description> <p>The list of prompt template instances from the server.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-319>319</a></span>
<span class=normal><a href=#__codelineno-0-320>320</a></span>
<span class=normal><a href=#__codelineno-0-321>321</a></span>
<span class=normal><a href=#__codelineno-0-322>322</a></span>
<span class=normal><a href=#__codelineno-0-323>323</a></span>
<span class=normal><a href=#__codelineno-0-324>324</a></span>
<span class=normal><a href=#__codelineno-0-325>325</a></span>
<span class=normal><a href=#__codelineno-0-326>326</a></span>
<span class=normal><a href=#__codelineno-0-327>327</a></span>
<span class=normal><a href=#__codelineno-0-328>328</a></span>
<span class=normal><a href=#__codelineno-0-329>329</a></span>
<span class=normal><a href=#__codelineno-0-330>330</a></span>
<span class=normal><a href=#__codelineno-0-331>331</a></span>
<span class=normal><a href=#__codelineno-0-332>332</a></span>
<span class=normal><a href=#__codelineno-0-333>333</a></span>
<span class=normal><a href=#__codelineno-0-334>334</a></span>
<span class=normal><a href=#__codelineno-0-335>335</a></span>
<span class=normal><a href=#__codelineno-0-336>336</a></span>
<span class=normal><a href=#__codelineno-0-337>337</a></span>
<span class=normal><a href=#__codelineno-0-338>338</a></span>
<span class=normal><a href=#__codelineno-0-339>339</a></span>
<span class=normal><a href=#__codelineno-0-340>340</a></span>
<span class=normal><a href=#__codelineno-0-341>341</a></span>
<span class=normal><a href=#__codelineno-0-342>342</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-319><a id=__codelineno-0-319 name=__codelineno-0-319></a><span class=k>def</span><span class=w> </span><span class=nf>list_prompts</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>"McpPromptTemplate"</span><span class=p>]:</span>
</span><span id=__span-0-320><a id=__codelineno-0-320 name=__codelineno-0-320></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-321><a id=__codelineno-0-321 name=__codelineno-0-321></a><span class=sd>    List the prompts from the MCP server.</span>
</span><span id=__span-0-322><a id=__codelineno-0-322 name=__codelineno-0-322></a>
</span><span id=__span-0-323><a id=__codelineno-0-323 name=__codelineno-0-323></a><span class=sd>    Returns</span>
</span><span id=__span-0-324><a id=__codelineno-0-324 name=__codelineno-0-324></a><span class=sd>    -------</span>
</span><span id=__span-0-325><a id=__codelineno-0-325 name=__codelineno-0-325></a><span class=sd>    List[McpPromptTemplate]</span>
</span><span id=__span-0-326><a id=__codelineno-0-326 name=__codelineno-0-326></a><span class=sd>        The list of prompt template instances from the server.</span>
</span><span id=__span-0-327><a id=__codelineno-0-327 name=__codelineno-0-327></a><span class=sd>    """</span>
</span><span id=__span-0-328><a id=__codelineno-0-328 name=__codelineno-0-328></a>    <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_template</span><span class=w> </span><span class=kn>import</span> <span class=n>McpPromptTemplate</span>
</span><span id=__span-0-329><a id=__codelineno-0-329 name=__codelineno-0-329></a>
</span><span id=__span-0-330><a id=__codelineno-0-330 name=__codelineno-0-330></a>    <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-331><a id=__codelineno-0-331 name=__codelineno-0-331></a>        <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_list_prompts_unsafe</span><span class=p>(),</span>
</span><span id=__span-0-332><a id=__codelineno-0-332 name=__codelineno-0-332></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-333><a id=__codelineno-0-333 name=__codelineno-0-333></a>    <span class=p>)</span>
</span><span id=__span-0-334><a id=__codelineno-0-334 name=__codelineno-0-334></a>
</span><span id=__span-0-335><a id=__codelineno-0-335 name=__codelineno-0-335></a>    <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-0-336><a id=__codelineno-0-336 name=__codelineno-0-336></a>        <span class=n>McpPromptTemplate</span><span class=p>(</span>
</span><span id=__span-0-337><a id=__codelineno-0-337 name=__codelineno-0-337></a>            <span class=n>prompt_name</span><span class=o>=</span><span class=n>prompt</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-338><a id=__codelineno-0-338 name=__codelineno-0-338></a>            <span class=n>prompt_info</span><span class=o>=</span><span class=n>prompt</span><span class=p>,</span>
</span><span id=__span-0-339><a id=__codelineno-0-339 name=__codelineno-0-339></a>            <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span>
</span><span id=__span-0-340><a id=__codelineno-0-340 name=__codelineno-0-340></a>        <span class=p>)</span>
</span><span id=__span-0-341><a id=__codelineno-0-341 name=__codelineno-0-341></a>        <span class=k>for</span> <span class=n>prompt</span> <span class=ow>in</span> <span class=n>result</span><span class=o>.</span><span class=n>prompts</span>
</span><span id=__span-0-342><a id=__codelineno-0-342 name=__codelineno-0-342></a>    <span class=p>]</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.alist_prompts class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">alist_prompts</span> <a href=#bridgic.protocols.mcp.McpServerConnection.alist_prompts class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>alist_prompts</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><span title=typing.List>List</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpPromptTemplate</span> (<code>bridgic.protocols.mcp._mcp_template.McpPromptTemplate</code>)' href=#bridgic.protocols.mcp.McpPromptTemplate>McpPromptTemplate</a></span><span class=p>]</span>
</span></code></pre></div> <p>Asynchronously list the prompts from the MCP server.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.List>List</span>[<a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpPromptTemplate</span> (<code>bridgic.protocols.mcp._mcp_template.McpPromptTemplate</code>)' href=#bridgic.protocols.mcp.McpPromptTemplate>McpPromptTemplate</a>]</code> </td> <td> <div class=doc-md-description> <p>The list of prompt template instances from the server.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-344>344</a></span>
<span class=normal><a href=#__codelineno-0-345>345</a></span>
<span class=normal><a href=#__codelineno-0-346>346</a></span>
<span class=normal><a href=#__codelineno-0-347>347</a></span>
<span class=normal><a href=#__codelineno-0-348>348</a></span>
<span class=normal><a href=#__codelineno-0-349>349</a></span>
<span class=normal><a href=#__codelineno-0-350>350</a></span>
<span class=normal><a href=#__codelineno-0-351>351</a></span>
<span class=normal><a href=#__codelineno-0-352>352</a></span>
<span class=normal><a href=#__codelineno-0-353>353</a></span>
<span class=normal><a href=#__codelineno-0-354>354</a></span>
<span class=normal><a href=#__codelineno-0-355>355</a></span>
<span class=normal><a href=#__codelineno-0-356>356</a></span>
<span class=normal><a href=#__codelineno-0-357>357</a></span>
<span class=normal><a href=#__codelineno-0-358>358</a></span>
<span class=normal><a href=#__codelineno-0-359>359</a></span>
<span class=normal><a href=#__codelineno-0-360>360</a></span>
<span class=normal><a href=#__codelineno-0-361>361</a></span>
<span class=normal><a href=#__codelineno-0-362>362</a></span>
<span class=normal><a href=#__codelineno-0-363>363</a></span>
<span class=normal><a href=#__codelineno-0-364>364</a></span>
<span class=normal><a href=#__codelineno-0-365>365</a></span>
<span class=normal><a href=#__codelineno-0-366>366</a></span>
<span class=normal><a href=#__codelineno-0-367>367</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-344><a id=__codelineno-0-344 name=__codelineno-0-344></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>alist_prompts</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>"McpPromptTemplate"</span><span class=p>]:</span>
</span><span id=__span-0-345><a id=__codelineno-0-345 name=__codelineno-0-345></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-346><a id=__codelineno-0-346 name=__codelineno-0-346></a><span class=sd>    Asynchronously list the prompts from the MCP server.</span>
</span><span id=__span-0-347><a id=__codelineno-0-347 name=__codelineno-0-347></a>
</span><span id=__span-0-348><a id=__codelineno-0-348 name=__codelineno-0-348></a><span class=sd>    Returns</span>
</span><span id=__span-0-349><a id=__codelineno-0-349 name=__codelineno-0-349></a><span class=sd>    -------</span>
</span><span id=__span-0-350><a id=__codelineno-0-350 name=__codelineno-0-350></a><span class=sd>    List[McpPromptTemplate]</span>
</span><span id=__span-0-351><a id=__codelineno-0-351 name=__codelineno-0-351></a><span class=sd>        The list of prompt template instances from the server.</span>
</span><span id=__span-0-352><a id=__codelineno-0-352 name=__codelineno-0-352></a><span class=sd>    """</span>
</span><span id=__span-0-353><a id=__codelineno-0-353 name=__codelineno-0-353></a>    <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_template</span><span class=w> </span><span class=kn>import</span> <span class=n>McpPromptTemplate</span>
</span><span id=__span-0-354><a id=__codelineno-0-354 name=__codelineno-0-354></a>
</span><span id=__span-0-355><a id=__codelineno-0-355 name=__codelineno-0-355></a>    <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_async</span><span class=p>(</span>
</span><span id=__span-0-356><a id=__codelineno-0-356 name=__codelineno-0-356></a>        <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_list_prompts_unsafe</span><span class=p>(),</span>
</span><span id=__span-0-357><a id=__codelineno-0-357 name=__codelineno-0-357></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-358><a id=__codelineno-0-358 name=__codelineno-0-358></a>    <span class=p>)</span>
</span><span id=__span-0-359><a id=__codelineno-0-359 name=__codelineno-0-359></a>
</span><span id=__span-0-360><a id=__codelineno-0-360 name=__codelineno-0-360></a>    <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-0-361><a id=__codelineno-0-361 name=__codelineno-0-361></a>        <span class=n>McpPromptTemplate</span><span class=p>(</span>
</span><span id=__span-0-362><a id=__codelineno-0-362 name=__codelineno-0-362></a>            <span class=n>prompt_name</span><span class=o>=</span><span class=n>prompt</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-363><a id=__codelineno-0-363 name=__codelineno-0-363></a>            <span class=n>prompt_info</span><span class=o>=</span><span class=n>prompt</span><span class=p>,</span>
</span><span id=__span-0-364><a id=__codelineno-0-364 name=__codelineno-0-364></a>            <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span>
</span><span id=__span-0-365><a id=__codelineno-0-365 name=__codelineno-0-365></a>        <span class=p>)</span>
</span><span id=__span-0-366><a id=__codelineno-0-366 name=__codelineno-0-366></a>        <span class=k>for</span> <span class=n>prompt</span> <span class=ow>in</span> <span class=n>result</span><span class=o>.</span><span class=n>prompts</span>
</span><span id=__span-0-367><a id=__codelineno-0-367 name=__codelineno-0-367></a>    <span class=p>]</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.get_prompt class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_prompt</span> <a href=#bridgic.protocols.mcp.McpServerConnection.get_prompt class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_prompt</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>prompt_name</span><span class=p>:</span> <span class=n><span title=str>str</span></span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>arguments</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=typing.Dict>Dict</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=mcp.types.GetPromptResult>GetPromptResult</span></span>
</span></code></pre></div> <p>Synchronously get a prompt from the MCP server.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>prompt_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The name of the prompt to retrieve.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>arguments</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Arguments to pass to the prompt.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=mcp.types.GetPromptResult>GetPromptResult</span></code> </td> <td> <div class=doc-md-description> <p>The prompt result from the server.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection is not established.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-369>369</a></span>
<span class=normal><a href=#__codelineno-0-370>370</a></span>
<span class=normal><a href=#__codelineno-0-371>371</a></span>
<span class=normal><a href=#__codelineno-0-372>372</a></span>
<span class=normal><a href=#__codelineno-0-373>373</a></span>
<span class=normal><a href=#__codelineno-0-374>374</a></span>
<span class=normal><a href=#__codelineno-0-375>375</a></span>
<span class=normal><a href=#__codelineno-0-376>376</a></span>
<span class=normal><a href=#__codelineno-0-377>377</a></span>
<span class=normal><a href=#__codelineno-0-378>378</a></span>
<span class=normal><a href=#__codelineno-0-379>379</a></span>
<span class=normal><a href=#__codelineno-0-380>380</a></span>
<span class=normal><a href=#__codelineno-0-381>381</a></span>
<span class=normal><a href=#__codelineno-0-382>382</a></span>
<span class=normal><a href=#__codelineno-0-383>383</a></span>
<span class=normal><a href=#__codelineno-0-384>384</a></span>
<span class=normal><a href=#__codelineno-0-385>385</a></span>
<span class=normal><a href=#__codelineno-0-386>386</a></span>
<span class=normal><a href=#__codelineno-0-387>387</a></span>
<span class=normal><a href=#__codelineno-0-388>388</a></span>
<span class=normal><a href=#__codelineno-0-389>389</a></span>
<span class=normal><a href=#__codelineno-0-390>390</a></span>
<span class=normal><a href=#__codelineno-0-391>391</a></span>
<span class=normal><a href=#__codelineno-0-392>392</a></span>
<span class=normal><a href=#__codelineno-0-393>393</a></span>
<span class=normal><a href=#__codelineno-0-394>394</a></span>
<span class=normal><a href=#__codelineno-0-395>395</a></span>
<span class=normal><a href=#__codelineno-0-396>396</a></span>
<span class=normal><a href=#__codelineno-0-397>397</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-369><a id=__codelineno-0-369 name=__codelineno-0-369></a><span class=k>def</span><span class=w> </span><span class=nf>get_prompt</span><span class=p>(</span>
</span><span id=__span-0-370><a id=__codelineno-0-370 name=__codelineno-0-370></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-371><a id=__codelineno-0-371 name=__codelineno-0-371></a>    <span class=n>prompt_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-372><a id=__codelineno-0-372 name=__codelineno-0-372></a>    <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-373><a id=__codelineno-0-373 name=__codelineno-0-373></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>GetPromptResult</span><span class=p>:</span>
</span><span id=__span-0-374><a id=__codelineno-0-374 name=__codelineno-0-374></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-375><a id=__codelineno-0-375 name=__codelineno-0-375></a><span class=sd>    Synchronously get a prompt from the MCP server.</span>
</span><span id=__span-0-376><a id=__codelineno-0-376 name=__codelineno-0-376></a>
</span><span id=__span-0-377><a id=__codelineno-0-377 name=__codelineno-0-377></a><span class=sd>    Parameters</span>
</span><span id=__span-0-378><a id=__codelineno-0-378 name=__codelineno-0-378></a><span class=sd>    ----------</span>
</span><span id=__span-0-379><a id=__codelineno-0-379 name=__codelineno-0-379></a><span class=sd>    prompt_name : str</span>
</span><span id=__span-0-380><a id=__codelineno-0-380 name=__codelineno-0-380></a><span class=sd>        The name of the prompt to retrieve.</span>
</span><span id=__span-0-381><a id=__codelineno-0-381 name=__codelineno-0-381></a><span class=sd>    arguments : Optional[Dict[str, Any]]</span>
</span><span id=__span-0-382><a id=__codelineno-0-382 name=__codelineno-0-382></a><span class=sd>        Arguments to pass to the prompt.</span>
</span><span id=__span-0-383><a id=__codelineno-0-383 name=__codelineno-0-383></a>
</span><span id=__span-0-384><a id=__codelineno-0-384 name=__codelineno-0-384></a><span class=sd>    Returns</span>
</span><span id=__span-0-385><a id=__codelineno-0-385 name=__codelineno-0-385></a><span class=sd>    -------</span>
</span><span id=__span-0-386><a id=__codelineno-0-386 name=__codelineno-0-386></a><span class=sd>    GetPromptResult</span>
</span><span id=__span-0-387><a id=__codelineno-0-387 name=__codelineno-0-387></a><span class=sd>        The prompt result from the server.</span>
</span><span id=__span-0-388><a id=__codelineno-0-388 name=__codelineno-0-388></a>
</span><span id=__span-0-389><a id=__codelineno-0-389 name=__codelineno-0-389></a><span class=sd>    Raises</span>
</span><span id=__span-0-390><a id=__codelineno-0-390 name=__codelineno-0-390></a><span class=sd>    ------</span>
</span><span id=__span-0-391><a id=__codelineno-0-391 name=__codelineno-0-391></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-392><a id=__codelineno-0-392 name=__codelineno-0-392></a><span class=sd>        If the connection is not established.</span>
</span><span id=__span-0-393><a id=__codelineno-0-393 name=__codelineno-0-393></a><span class=sd>    """</span>
</span><span id=__span-0-394><a id=__codelineno-0-394 name=__codelineno-0-394></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-395><a id=__codelineno-0-395 name=__codelineno-0-395></a>        <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_prompt_unsafe</span><span class=p>(</span><span class=n>prompt_name</span><span class=o>=</span><span class=n>prompt_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span><span class=p>),</span>
</span><span id=__span-0-396><a id=__codelineno-0-396 name=__codelineno-0-396></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-397><a id=__codelineno-0-397 name=__codelineno-0-397></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.aget_prompt class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">aget_prompt</span> <a href=#bridgic.protocols.mcp.McpServerConnection.aget_prompt class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>aget_prompt</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>prompt_name</span><span class=p>:</span> <span class=n><span title=str>str</span></span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>arguments</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=typing.Dict>Dict</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=mcp.types.GetPromptResult>GetPromptResult</span></span>
</span></code></pre></div> <p>Asynchronously get a prompt from the MCP server.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>prompt_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The name of the prompt to retrieve.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>arguments</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Arguments to pass to the prompt.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=mcp.types.GetPromptResult>GetPromptResult</span></code> </td> <td> <div class=doc-md-description> <p>The prompt result from the server.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection is not established.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-399>399</a></span>
<span class=normal><a href=#__codelineno-0-400>400</a></span>
<span class=normal><a href=#__codelineno-0-401>401</a></span>
<span class=normal><a href=#__codelineno-0-402>402</a></span>
<span class=normal><a href=#__codelineno-0-403>403</a></span>
<span class=normal><a href=#__codelineno-0-404>404</a></span>
<span class=normal><a href=#__codelineno-0-405>405</a></span>
<span class=normal><a href=#__codelineno-0-406>406</a></span>
<span class=normal><a href=#__codelineno-0-407>407</a></span>
<span class=normal><a href=#__codelineno-0-408>408</a></span>
<span class=normal><a href=#__codelineno-0-409>409</a></span>
<span class=normal><a href=#__codelineno-0-410>410</a></span>
<span class=normal><a href=#__codelineno-0-411>411</a></span>
<span class=normal><a href=#__codelineno-0-412>412</a></span>
<span class=normal><a href=#__codelineno-0-413>413</a></span>
<span class=normal><a href=#__codelineno-0-414>414</a></span>
<span class=normal><a href=#__codelineno-0-415>415</a></span>
<span class=normal><a href=#__codelineno-0-416>416</a></span>
<span class=normal><a href=#__codelineno-0-417>417</a></span>
<span class=normal><a href=#__codelineno-0-418>418</a></span>
<span class=normal><a href=#__codelineno-0-419>419</a></span>
<span class=normal><a href=#__codelineno-0-420>420</a></span>
<span class=normal><a href=#__codelineno-0-421>421</a></span>
<span class=normal><a href=#__codelineno-0-422>422</a></span>
<span class=normal><a href=#__codelineno-0-423>423</a></span>
<span class=normal><a href=#__codelineno-0-424>424</a></span>
<span class=normal><a href=#__codelineno-0-425>425</a></span>
<span class=normal><a href=#__codelineno-0-426>426</a></span>
<span class=normal><a href=#__codelineno-0-427>427</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-399><a id=__codelineno-0-399 name=__codelineno-0-399></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>aget_prompt</span><span class=p>(</span>
</span><span id=__span-0-400><a id=__codelineno-0-400 name=__codelineno-0-400></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-401><a id=__codelineno-0-401 name=__codelineno-0-401></a>    <span class=n>prompt_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-402><a id=__codelineno-0-402 name=__codelineno-0-402></a>    <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-403><a id=__codelineno-0-403 name=__codelineno-0-403></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>GetPromptResult</span><span class=p>:</span>
</span><span id=__span-0-404><a id=__codelineno-0-404 name=__codelineno-0-404></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-405><a id=__codelineno-0-405 name=__codelineno-0-405></a><span class=sd>    Asynchronously get a prompt from the MCP server.</span>
</span><span id=__span-0-406><a id=__codelineno-0-406 name=__codelineno-0-406></a>
</span><span id=__span-0-407><a id=__codelineno-0-407 name=__codelineno-0-407></a><span class=sd>    Parameters</span>
</span><span id=__span-0-408><a id=__codelineno-0-408 name=__codelineno-0-408></a><span class=sd>    ----------</span>
</span><span id=__span-0-409><a id=__codelineno-0-409 name=__codelineno-0-409></a><span class=sd>    prompt_name : str</span>
</span><span id=__span-0-410><a id=__codelineno-0-410 name=__codelineno-0-410></a><span class=sd>        The name of the prompt to retrieve.</span>
</span><span id=__span-0-411><a id=__codelineno-0-411 name=__codelineno-0-411></a><span class=sd>    arguments : Optional[Dict[str, Any]]</span>
</span><span id=__span-0-412><a id=__codelineno-0-412 name=__codelineno-0-412></a><span class=sd>        Arguments to pass to the prompt.</span>
</span><span id=__span-0-413><a id=__codelineno-0-413 name=__codelineno-0-413></a>
</span><span id=__span-0-414><a id=__codelineno-0-414 name=__codelineno-0-414></a><span class=sd>    Returns</span>
</span><span id=__span-0-415><a id=__codelineno-0-415 name=__codelineno-0-415></a><span class=sd>    -------</span>
</span><span id=__span-0-416><a id=__codelineno-0-416 name=__codelineno-0-416></a><span class=sd>    GetPromptResult</span>
</span><span id=__span-0-417><a id=__codelineno-0-417 name=__codelineno-0-417></a><span class=sd>        The prompt result from the server.</span>
</span><span id=__span-0-418><a id=__codelineno-0-418 name=__codelineno-0-418></a>
</span><span id=__span-0-419><a id=__codelineno-0-419 name=__codelineno-0-419></a><span class=sd>    Raises</span>
</span><span id=__span-0-420><a id=__codelineno-0-420 name=__codelineno-0-420></a><span class=sd>    ------</span>
</span><span id=__span-0-421><a id=__codelineno-0-421 name=__codelineno-0-421></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-422><a id=__codelineno-0-422 name=__codelineno-0-422></a><span class=sd>        If the connection is not established.</span>
</span><span id=__span-0-423><a id=__codelineno-0-423 name=__codelineno-0-423></a><span class=sd>    """</span>
</span><span id=__span-0-424><a id=__codelineno-0-424 name=__codelineno-0-424></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_async</span><span class=p>(</span>
</span><span id=__span-0-425><a id=__codelineno-0-425 name=__codelineno-0-425></a>        <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_prompt_unsafe</span><span class=p>(</span><span class=n>prompt_name</span><span class=o>=</span><span class=n>prompt_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span><span class=p>),</span>
</span><span id=__span-0-426><a id=__codelineno-0-426 name=__codelineno-0-426></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-427><a id=__codelineno-0-427 name=__codelineno-0-427></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.list_tools class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">list_tools</span> <a href=#bridgic.protocols.mcp.McpServerConnection.list_tools class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>list_tools</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><span title=typing.List>List</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpToolSpec</span> (<code>bridgic.protocols.mcp._mcp_tool_spec.McpToolSpec</code>)' href=#bridgic.protocols.mcp.McpToolSpec>McpToolSpec</a></span><span class=p>]</span>
</span></code></pre></div> <p>List the tools from the MCP server.</p> <p>This method synchronously retrieves the list of tools available from the connected MCP server and wraps each tool in an <code>McpToolSpec</code> instance for use within the bridgic framework.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.List>List</span>[<a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpToolSpec</span> (<code>bridgic.protocols.mcp._mcp_tool_spec.McpToolSpec</code>)' href=#bridgic.protocols.mcp.McpToolSpec>McpToolSpec</a>]</code> </td> <td> <div class=doc-md-description> <p>The list of tool specification instances from the server.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection is not established and cannot be established.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-429>429</a></span>
<span class=normal><a href=#__codelineno-0-430>430</a></span>
<span class=normal><a href=#__codelineno-0-431>431</a></span>
<span class=normal><a href=#__codelineno-0-432>432</a></span>
<span class=normal><a href=#__codelineno-0-433>433</a></span>
<span class=normal><a href=#__codelineno-0-434>434</a></span>
<span class=normal><a href=#__codelineno-0-435>435</a></span>
<span class=normal><a href=#__codelineno-0-436>436</a></span>
<span class=normal><a href=#__codelineno-0-437>437</a></span>
<span class=normal><a href=#__codelineno-0-438>438</a></span>
<span class=normal><a href=#__codelineno-0-439>439</a></span>
<span class=normal><a href=#__codelineno-0-440>440</a></span>
<span class=normal><a href=#__codelineno-0-441>441</a></span>
<span class=normal><a href=#__codelineno-0-442>442</a></span>
<span class=normal><a href=#__codelineno-0-443>443</a></span>
<span class=normal><a href=#__codelineno-0-444>444</a></span>
<span class=normal><a href=#__codelineno-0-445>445</a></span>
<span class=normal><a href=#__codelineno-0-446>446</a></span>
<span class=normal><a href=#__codelineno-0-447>447</a></span>
<span class=normal><a href=#__codelineno-0-448>448</a></span>
<span class=normal><a href=#__codelineno-0-449>449</a></span>
<span class=normal><a href=#__codelineno-0-450>450</a></span>
<span class=normal><a href=#__codelineno-0-451>451</a></span>
<span class=normal><a href=#__codelineno-0-452>452</a></span>
<span class=normal><a href=#__codelineno-0-453>453</a></span>
<span class=normal><a href=#__codelineno-0-454>454</a></span>
<span class=normal><a href=#__codelineno-0-455>455</a></span>
<span class=normal><a href=#__codelineno-0-456>456</a></span>
<span class=normal><a href=#__codelineno-0-457>457</a></span>
<span class=normal><a href=#__codelineno-0-458>458</a></span>
<span class=normal><a href=#__codelineno-0-459>459</a></span>
<span class=normal><a href=#__codelineno-0-460>460</a></span>
<span class=normal><a href=#__codelineno-0-461>461</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-429><a id=__codelineno-0-429 name=__codelineno-0-429></a><span class=k>def</span><span class=w> </span><span class=nf>list_tools</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>"McpToolSpec"</span><span class=p>]:</span>
</span><span id=__span-0-430><a id=__codelineno-0-430 name=__codelineno-0-430></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-431><a id=__codelineno-0-431 name=__codelineno-0-431></a><span class=sd>    List the tools from the MCP server.</span>
</span><span id=__span-0-432><a id=__codelineno-0-432 name=__codelineno-0-432></a>
</span><span id=__span-0-433><a id=__codelineno-0-433 name=__codelineno-0-433></a><span class=sd>    This method synchronously retrieves the list of tools available from the connected</span>
</span><span id=__span-0-434><a id=__codelineno-0-434 name=__codelineno-0-434></a><span class=sd>    MCP server and wraps each tool in an `McpToolSpec` instance for use within the</span>
</span><span id=__span-0-435><a id=__codelineno-0-435 name=__codelineno-0-435></a><span class=sd>    bridgic framework.</span>
</span><span id=__span-0-436><a id=__codelineno-0-436 name=__codelineno-0-436></a>
</span><span id=__span-0-437><a id=__codelineno-0-437 name=__codelineno-0-437></a><span class=sd>    Returns</span>
</span><span id=__span-0-438><a id=__codelineno-0-438 name=__codelineno-0-438></a><span class=sd>    -------</span>
</span><span id=__span-0-439><a id=__codelineno-0-439 name=__codelineno-0-439></a><span class=sd>    List[McpToolSpec]</span>
</span><span id=__span-0-440><a id=__codelineno-0-440 name=__codelineno-0-440></a><span class=sd>        The list of tool specification instances from the server.</span>
</span><span id=__span-0-441><a id=__codelineno-0-441 name=__codelineno-0-441></a>
</span><span id=__span-0-442><a id=__codelineno-0-442 name=__codelineno-0-442></a><span class=sd>    Raises</span>
</span><span id=__span-0-443><a id=__codelineno-0-443 name=__codelineno-0-443></a><span class=sd>    ------</span>
</span><span id=__span-0-444><a id=__codelineno-0-444 name=__codelineno-0-444></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-445><a id=__codelineno-0-445 name=__codelineno-0-445></a><span class=sd>        If the connection is not established and cannot be established.</span>
</span><span id=__span-0-446><a id=__codelineno-0-446 name=__codelineno-0-446></a><span class=sd>    """</span>
</span><span id=__span-0-447><a id=__codelineno-0-447 name=__codelineno-0-447></a>    <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_tool_spec</span><span class=w> </span><span class=kn>import</span> <span class=n>McpToolSpec</span>
</span><span id=__span-0-448><a id=__codelineno-0-448 name=__codelineno-0-448></a>
</span><span id=__span-0-449><a id=__codelineno-0-449 name=__codelineno-0-449></a>    <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-450><a id=__codelineno-0-450 name=__codelineno-0-450></a>        <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_list_tools_unsafe</span><span class=p>(),</span>
</span><span id=__span-0-451><a id=__codelineno-0-451 name=__codelineno-0-451></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-452><a id=__codelineno-0-452 name=__codelineno-0-452></a>    <span class=p>)</span>
</span><span id=__span-0-453><a id=__codelineno-0-453 name=__codelineno-0-453></a>
</span><span id=__span-0-454><a id=__codelineno-0-454 name=__codelineno-0-454></a>    <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-0-455><a id=__codelineno-0-455 name=__codelineno-0-455></a>        <span class=n>McpToolSpec</span><span class=p>(</span>
</span><span id=__span-0-456><a id=__codelineno-0-456 name=__codelineno-0-456></a>            <span class=n>tool_name</span><span class=o>=</span><span class=n>tool</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-457><a id=__codelineno-0-457 name=__codelineno-0-457></a>            <span class=n>tool_info</span><span class=o>=</span><span class=n>tool</span><span class=p>,</span>
</span><span id=__span-0-458><a id=__codelineno-0-458 name=__codelineno-0-458></a>            <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span>
</span><span id=__span-0-459><a id=__codelineno-0-459 name=__codelineno-0-459></a>        <span class=p>)</span>
</span><span id=__span-0-460><a id=__codelineno-0-460 name=__codelineno-0-460></a>        <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>result</span><span class=o>.</span><span class=n>tools</span>
</span><span id=__span-0-461><a id=__codelineno-0-461 name=__codelineno-0-461></a>    <span class=p>]</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.alist_tools class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">alist_tools</span> <a href=#bridgic.protocols.mcp.McpServerConnection.alist_tools class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>alist_tools</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><span title=typing.List>List</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpToolSpec</span> (<code>bridgic.protocols.mcp._mcp_tool_spec.McpToolSpec</code>)' href=#bridgic.protocols.mcp.McpToolSpec>McpToolSpec</a></span><span class=p>]</span>
</span></code></pre></div> <p>Asynchronously list the tools from the MCP server.</p> <p>This method asynchronously retrieves the list of tools available from the connected MCP server and wraps each tool in an <code>McpToolSpec</code> instance for use within the bridgic framework.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.List>List</span>[<a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpToolSpec</span> (<code>bridgic.protocols.mcp._mcp_tool_spec.McpToolSpec</code>)' href=#bridgic.protocols.mcp.McpToolSpec>McpToolSpec</a>]</code> </td> <td> <div class=doc-md-description> <p>The list of tool specification instances from the server.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection is not established and cannot be established.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-463>463</a></span>
<span class=normal><a href=#__codelineno-0-464>464</a></span>
<span class=normal><a href=#__codelineno-0-465>465</a></span>
<span class=normal><a href=#__codelineno-0-466>466</a></span>
<span class=normal><a href=#__codelineno-0-467>467</a></span>
<span class=normal><a href=#__codelineno-0-468>468</a></span>
<span class=normal><a href=#__codelineno-0-469>469</a></span>
<span class=normal><a href=#__codelineno-0-470>470</a></span>
<span class=normal><a href=#__codelineno-0-471>471</a></span>
<span class=normal><a href=#__codelineno-0-472>472</a></span>
<span class=normal><a href=#__codelineno-0-473>473</a></span>
<span class=normal><a href=#__codelineno-0-474>474</a></span>
<span class=normal><a href=#__codelineno-0-475>475</a></span>
<span class=normal><a href=#__codelineno-0-476>476</a></span>
<span class=normal><a href=#__codelineno-0-477>477</a></span>
<span class=normal><a href=#__codelineno-0-478>478</a></span>
<span class=normal><a href=#__codelineno-0-479>479</a></span>
<span class=normal><a href=#__codelineno-0-480>480</a></span>
<span class=normal><a href=#__codelineno-0-481>481</a></span>
<span class=normal><a href=#__codelineno-0-482>482</a></span>
<span class=normal><a href=#__codelineno-0-483>483</a></span>
<span class=normal><a href=#__codelineno-0-484>484</a></span>
<span class=normal><a href=#__codelineno-0-485>485</a></span>
<span class=normal><a href=#__codelineno-0-486>486</a></span>
<span class=normal><a href=#__codelineno-0-487>487</a></span>
<span class=normal><a href=#__codelineno-0-488>488</a></span>
<span class=normal><a href=#__codelineno-0-489>489</a></span>
<span class=normal><a href=#__codelineno-0-490>490</a></span>
<span class=normal><a href=#__codelineno-0-491>491</a></span>
<span class=normal><a href=#__codelineno-0-492>492</a></span>
<span class=normal><a href=#__codelineno-0-493>493</a></span>
<span class=normal><a href=#__codelineno-0-494>494</a></span>
<span class=normal><a href=#__codelineno-0-495>495</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-463><a id=__codelineno-0-463 name=__codelineno-0-463></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>alist_tools</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>"McpToolSpec"</span><span class=p>]:</span>
</span><span id=__span-0-464><a id=__codelineno-0-464 name=__codelineno-0-464></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-465><a id=__codelineno-0-465 name=__codelineno-0-465></a><span class=sd>    Asynchronously list the tools from the MCP server.</span>
</span><span id=__span-0-466><a id=__codelineno-0-466 name=__codelineno-0-466></a>
</span><span id=__span-0-467><a id=__codelineno-0-467 name=__codelineno-0-467></a><span class=sd>    This method asynchronously retrieves the list of tools available from the connected</span>
</span><span id=__span-0-468><a id=__codelineno-0-468 name=__codelineno-0-468></a><span class=sd>    MCP server and wraps each tool in an `McpToolSpec` instance for use within the</span>
</span><span id=__span-0-469><a id=__codelineno-0-469 name=__codelineno-0-469></a><span class=sd>    bridgic framework.</span>
</span><span id=__span-0-470><a id=__codelineno-0-470 name=__codelineno-0-470></a>
</span><span id=__span-0-471><a id=__codelineno-0-471 name=__codelineno-0-471></a><span class=sd>    Returns</span>
</span><span id=__span-0-472><a id=__codelineno-0-472 name=__codelineno-0-472></a><span class=sd>    -------</span>
</span><span id=__span-0-473><a id=__codelineno-0-473 name=__codelineno-0-473></a><span class=sd>    List[McpToolSpec]</span>
</span><span id=__span-0-474><a id=__codelineno-0-474 name=__codelineno-0-474></a><span class=sd>        The list of tool specification instances from the server.</span>
</span><span id=__span-0-475><a id=__codelineno-0-475 name=__codelineno-0-475></a>
</span><span id=__span-0-476><a id=__codelineno-0-476 name=__codelineno-0-476></a><span class=sd>    Raises</span>
</span><span id=__span-0-477><a id=__codelineno-0-477 name=__codelineno-0-477></a><span class=sd>    ------</span>
</span><span id=__span-0-478><a id=__codelineno-0-478 name=__codelineno-0-478></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-479><a id=__codelineno-0-479 name=__codelineno-0-479></a><span class=sd>        If the connection is not established and cannot be established.</span>
</span><span id=__span-0-480><a id=__codelineno-0-480 name=__codelineno-0-480></a><span class=sd>    """</span>
</span><span id=__span-0-481><a id=__codelineno-0-481 name=__codelineno-0-481></a>    <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_tool_spec</span><span class=w> </span><span class=kn>import</span> <span class=n>McpToolSpec</span>
</span><span id=__span-0-482><a id=__codelineno-0-482 name=__codelineno-0-482></a>
</span><span id=__span-0-483><a id=__codelineno-0-483 name=__codelineno-0-483></a>    <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_async</span><span class=p>(</span>
</span><span id=__span-0-484><a id=__codelineno-0-484 name=__codelineno-0-484></a>        <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_list_tools_unsafe</span><span class=p>(),</span>
</span><span id=__span-0-485><a id=__codelineno-0-485 name=__codelineno-0-485></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-486><a id=__codelineno-0-486 name=__codelineno-0-486></a>    <span class=p>)</span>
</span><span id=__span-0-487><a id=__codelineno-0-487 name=__codelineno-0-487></a>
</span><span id=__span-0-488><a id=__codelineno-0-488 name=__codelineno-0-488></a>    <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-0-489><a id=__codelineno-0-489 name=__codelineno-0-489></a>        <span class=n>McpToolSpec</span><span class=p>(</span>
</span><span id=__span-0-490><a id=__codelineno-0-490 name=__codelineno-0-490></a>            <span class=n>tool_name</span><span class=o>=</span><span class=n>tool</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-491><a id=__codelineno-0-491 name=__codelineno-0-491></a>            <span class=n>tool_info</span><span class=o>=</span><span class=n>tool</span><span class=p>,</span>
</span><span id=__span-0-492><a id=__codelineno-0-492 name=__codelineno-0-492></a>            <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span>
</span><span id=__span-0-493><a id=__codelineno-0-493 name=__codelineno-0-493></a>        <span class=p>)</span>
</span><span id=__span-0-494><a id=__codelineno-0-494 name=__codelineno-0-494></a>        <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>result</span><span class=o>.</span><span class=n>tools</span>
</span><span id=__span-0-495><a id=__codelineno-0-495 name=__codelineno-0-495></a>    <span class=p>]</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.call_tool class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">call_tool</span> <a href=#bridgic.protocols.mcp.McpServerConnection.call_tool class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>call_tool</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>tool_name</span><span class=p>:</span> <span class=n><span title=str>str</span></span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>arguments</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=typing.Dict>Dict</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=mcp.types.CallToolResult>CallToolResult</span></span>
</span></code></pre></div> <p>Synchronously call a tool on the MCP server.</p> <p>This method synchronously invokes a tool on the connected MCP server with the specified arguments and returns the result.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>tool_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The name of the tool to call.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>arguments</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>The arguments to pass to the tool. If None, an empty dictionary will be used.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=mcp.types.CallToolResult>CallToolResult</span></code> </td> <td> <div class=doc-md-description> <p>The result of the tool call from the server, containing content and optionally structured content.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection is not established and cannot be established.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-497>497</a></span>
<span class=normal><a href=#__codelineno-0-498>498</a></span>
<span class=normal><a href=#__codelineno-0-499>499</a></span>
<span class=normal><a href=#__codelineno-0-500>500</a></span>
<span class=normal><a href=#__codelineno-0-501>501</a></span>
<span class=normal><a href=#__codelineno-0-502>502</a></span>
<span class=normal><a href=#__codelineno-0-503>503</a></span>
<span class=normal><a href=#__codelineno-0-504>504</a></span>
<span class=normal><a href=#__codelineno-0-505>505</a></span>
<span class=normal><a href=#__codelineno-0-506>506</a></span>
<span class=normal><a href=#__codelineno-0-507>507</a></span>
<span class=normal><a href=#__codelineno-0-508>508</a></span>
<span class=normal><a href=#__codelineno-0-509>509</a></span>
<span class=normal><a href=#__codelineno-0-510>510</a></span>
<span class=normal><a href=#__codelineno-0-511>511</a></span>
<span class=normal><a href=#__codelineno-0-512>512</a></span>
<span class=normal><a href=#__codelineno-0-513>513</a></span>
<span class=normal><a href=#__codelineno-0-514>514</a></span>
<span class=normal><a href=#__codelineno-0-515>515</a></span>
<span class=normal><a href=#__codelineno-0-516>516</a></span>
<span class=normal><a href=#__codelineno-0-517>517</a></span>
<span class=normal><a href=#__codelineno-0-518>518</a></span>
<span class=normal><a href=#__codelineno-0-519>519</a></span>
<span class=normal><a href=#__codelineno-0-520>520</a></span>
<span class=normal><a href=#__codelineno-0-521>521</a></span>
<span class=normal><a href=#__codelineno-0-522>522</a></span>
<span class=normal><a href=#__codelineno-0-523>523</a></span>
<span class=normal><a href=#__codelineno-0-524>524</a></span>
<span class=normal><a href=#__codelineno-0-525>525</a></span>
<span class=normal><a href=#__codelineno-0-526>526</a></span>
<span class=normal><a href=#__codelineno-0-527>527</a></span>
<span class=normal><a href=#__codelineno-0-528>528</a></span>
<span class=normal><a href=#__codelineno-0-529>529</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-497><a id=__codelineno-0-497 name=__codelineno-0-497></a><span class=k>def</span><span class=w> </span><span class=nf>call_tool</span><span class=p>(</span>
</span><span id=__span-0-498><a id=__codelineno-0-498 name=__codelineno-0-498></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-499><a id=__codelineno-0-499 name=__codelineno-0-499></a>    <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-500><a id=__codelineno-0-500 name=__codelineno-0-500></a>    <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-501><a id=__codelineno-0-501 name=__codelineno-0-501></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CallToolResult</span><span class=p>:</span>
</span><span id=__span-0-502><a id=__codelineno-0-502 name=__codelineno-0-502></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-503><a id=__codelineno-0-503 name=__codelineno-0-503></a><span class=sd>    Synchronously call a tool on the MCP server.</span>
</span><span id=__span-0-504><a id=__codelineno-0-504 name=__codelineno-0-504></a>
</span><span id=__span-0-505><a id=__codelineno-0-505 name=__codelineno-0-505></a><span class=sd>    This method synchronously invokes a tool on the connected MCP server with the</span>
</span><span id=__span-0-506><a id=__codelineno-0-506 name=__codelineno-0-506></a><span class=sd>    specified arguments and returns the result.</span>
</span><span id=__span-0-507><a id=__codelineno-0-507 name=__codelineno-0-507></a>
</span><span id=__span-0-508><a id=__codelineno-0-508 name=__codelineno-0-508></a><span class=sd>    Parameters</span>
</span><span id=__span-0-509><a id=__codelineno-0-509 name=__codelineno-0-509></a><span class=sd>    ----------</span>
</span><span id=__span-0-510><a id=__codelineno-0-510 name=__codelineno-0-510></a><span class=sd>    tool_name : str</span>
</span><span id=__span-0-511><a id=__codelineno-0-511 name=__codelineno-0-511></a><span class=sd>        The name of the tool to call.</span>
</span><span id=__span-0-512><a id=__codelineno-0-512 name=__codelineno-0-512></a><span class=sd>    arguments : Optional[Dict[str, Any]]</span>
</span><span id=__span-0-513><a id=__codelineno-0-513 name=__codelineno-0-513></a><span class=sd>        The arguments to pass to the tool. If None, an empty dictionary will be used.</span>
</span><span id=__span-0-514><a id=__codelineno-0-514 name=__codelineno-0-514></a>
</span><span id=__span-0-515><a id=__codelineno-0-515 name=__codelineno-0-515></a><span class=sd>    Returns</span>
</span><span id=__span-0-516><a id=__codelineno-0-516 name=__codelineno-0-516></a><span class=sd>    -------</span>
</span><span id=__span-0-517><a id=__codelineno-0-517 name=__codelineno-0-517></a><span class=sd>    CallToolResult</span>
</span><span id=__span-0-518><a id=__codelineno-0-518 name=__codelineno-0-518></a><span class=sd>        The result of the tool call from the server, containing content and optionally</span>
</span><span id=__span-0-519><a id=__codelineno-0-519 name=__codelineno-0-519></a><span class=sd>        structured content.</span>
</span><span id=__span-0-520><a id=__codelineno-0-520 name=__codelineno-0-520></a>
</span><span id=__span-0-521><a id=__codelineno-0-521 name=__codelineno-0-521></a><span class=sd>    Raises</span>
</span><span id=__span-0-522><a id=__codelineno-0-522 name=__codelineno-0-522></a><span class=sd>    ------</span>
</span><span id=__span-0-523><a id=__codelineno-0-523 name=__codelineno-0-523></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-524><a id=__codelineno-0-524 name=__codelineno-0-524></a><span class=sd>        If the connection is not established and cannot be established.</span>
</span><span id=__span-0-525><a id=__codelineno-0-525 name=__codelineno-0-525></a><span class=sd>    """</span>
</span><span id=__span-0-526><a id=__codelineno-0-526 name=__codelineno-0-526></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_sync</span><span class=p>(</span>
</span><span id=__span-0-527><a id=__codelineno-0-527 name=__codelineno-0-527></a>        <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_call_tool_unsafe</span><span class=p>(</span><span class=n>tool_name</span><span class=o>=</span><span class=n>tool_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span><span class=p>),</span>
</span><span id=__span-0-528><a id=__codelineno-0-528 name=__codelineno-0-528></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-529><a id=__codelineno-0-529 name=__codelineno-0-529></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnection.acall_tool class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">acall_tool</span> <a href=#bridgic.protocols.mcp.McpServerConnection.acall_tool class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>acall_tool</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>tool_name</span><span class=p>:</span> <span class=n><span title=str>str</span></span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>arguments</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=typing.Dict>Dict</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=mcp.types.CallToolResult>CallToolResult</span></span>
</span></code></pre></div> <p>Asynchronously call a tool on the MCP server.</p> <p>This method asynchronously invokes a tool on the connected MCP server with the specified arguments and returns the result.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>tool_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The name of the tool to call.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>arguments</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>The arguments to pass to the tool. If None, an empty dictionary will be used.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=mcp.types.CallToolResult>CallToolResult</span></code> </td> <td> <div class=doc-md-description> <p>The result of the tool call from the server, containing content and optionally structured content.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection is not established and cannot be established.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-531>531</a></span>
<span class=normal><a href=#__codelineno-0-532>532</a></span>
<span class=normal><a href=#__codelineno-0-533>533</a></span>
<span class=normal><a href=#__codelineno-0-534>534</a></span>
<span class=normal><a href=#__codelineno-0-535>535</a></span>
<span class=normal><a href=#__codelineno-0-536>536</a></span>
<span class=normal><a href=#__codelineno-0-537>537</a></span>
<span class=normal><a href=#__codelineno-0-538>538</a></span>
<span class=normal><a href=#__codelineno-0-539>539</a></span>
<span class=normal><a href=#__codelineno-0-540>540</a></span>
<span class=normal><a href=#__codelineno-0-541>541</a></span>
<span class=normal><a href=#__codelineno-0-542>542</a></span>
<span class=normal><a href=#__codelineno-0-543>543</a></span>
<span class=normal><a href=#__codelineno-0-544>544</a></span>
<span class=normal><a href=#__codelineno-0-545>545</a></span>
<span class=normal><a href=#__codelineno-0-546>546</a></span>
<span class=normal><a href=#__codelineno-0-547>547</a></span>
<span class=normal><a href=#__codelineno-0-548>548</a></span>
<span class=normal><a href=#__codelineno-0-549>549</a></span>
<span class=normal><a href=#__codelineno-0-550>550</a></span>
<span class=normal><a href=#__codelineno-0-551>551</a></span>
<span class=normal><a href=#__codelineno-0-552>552</a></span>
<span class=normal><a href=#__codelineno-0-553>553</a></span>
<span class=normal><a href=#__codelineno-0-554>554</a></span>
<span class=normal><a href=#__codelineno-0-555>555</a></span>
<span class=normal><a href=#__codelineno-0-556>556</a></span>
<span class=normal><a href=#__codelineno-0-557>557</a></span>
<span class=normal><a href=#__codelineno-0-558>558</a></span>
<span class=normal><a href=#__codelineno-0-559>559</a></span>
<span class=normal><a href=#__codelineno-0-560>560</a></span>
<span class=normal><a href=#__codelineno-0-561>561</a></span>
<span class=normal><a href=#__codelineno-0-562>562</a></span>
<span class=normal><a href=#__codelineno-0-563>563</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-531><a id=__codelineno-0-531 name=__codelineno-0-531></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>acall_tool</span><span class=p>(</span>
</span><span id=__span-0-532><a id=__codelineno-0-532 name=__codelineno-0-532></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-533><a id=__codelineno-0-533 name=__codelineno-0-533></a>    <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-534><a id=__codelineno-0-534 name=__codelineno-0-534></a>    <span class=n>arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-535><a id=__codelineno-0-535 name=__codelineno-0-535></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CallToolResult</span><span class=p>:</span>
</span><span id=__span-0-536><a id=__codelineno-0-536 name=__codelineno-0-536></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-537><a id=__codelineno-0-537 name=__codelineno-0-537></a><span class=sd>    Asynchronously call a tool on the MCP server.</span>
</span><span id=__span-0-538><a id=__codelineno-0-538 name=__codelineno-0-538></a>
</span><span id=__span-0-539><a id=__codelineno-0-539 name=__codelineno-0-539></a><span class=sd>    This method asynchronously invokes a tool on the connected MCP server with the</span>
</span><span id=__span-0-540><a id=__codelineno-0-540 name=__codelineno-0-540></a><span class=sd>    specified arguments and returns the result.</span>
</span><span id=__span-0-541><a id=__codelineno-0-541 name=__codelineno-0-541></a>
</span><span id=__span-0-542><a id=__codelineno-0-542 name=__codelineno-0-542></a><span class=sd>    Parameters</span>
</span><span id=__span-0-543><a id=__codelineno-0-543 name=__codelineno-0-543></a><span class=sd>    ----------</span>
</span><span id=__span-0-544><a id=__codelineno-0-544 name=__codelineno-0-544></a><span class=sd>    tool_name : str</span>
</span><span id=__span-0-545><a id=__codelineno-0-545 name=__codelineno-0-545></a><span class=sd>        The name of the tool to call.</span>
</span><span id=__span-0-546><a id=__codelineno-0-546 name=__codelineno-0-546></a><span class=sd>    arguments : Optional[Dict[str, Any]]</span>
</span><span id=__span-0-547><a id=__codelineno-0-547 name=__codelineno-0-547></a><span class=sd>        The arguments to pass to the tool. If None, an empty dictionary will be used.</span>
</span><span id=__span-0-548><a id=__codelineno-0-548 name=__codelineno-0-548></a>
</span><span id=__span-0-549><a id=__codelineno-0-549 name=__codelineno-0-549></a><span class=sd>    Returns</span>
</span><span id=__span-0-550><a id=__codelineno-0-550 name=__codelineno-0-550></a><span class=sd>    -------</span>
</span><span id=__span-0-551><a id=__codelineno-0-551 name=__codelineno-0-551></a><span class=sd>    CallToolResult</span>
</span><span id=__span-0-552><a id=__codelineno-0-552 name=__codelineno-0-552></a><span class=sd>        The result of the tool call from the server, containing content and optionally</span>
</span><span id=__span-0-553><a id=__codelineno-0-553 name=__codelineno-0-553></a><span class=sd>        structured content.</span>
</span><span id=__span-0-554><a id=__codelineno-0-554 name=__codelineno-0-554></a>
</span><span id=__span-0-555><a id=__codelineno-0-555 name=__codelineno-0-555></a><span class=sd>    Raises</span>
</span><span id=__span-0-556><a id=__codelineno-0-556 name=__codelineno-0-556></a><span class=sd>    ------</span>
</span><span id=__span-0-557><a id=__codelineno-0-557 name=__codelineno-0-557></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-558><a id=__codelineno-0-558 name=__codelineno-0-558></a><span class=sd>        If the connection is not established and cannot be established.</span>
</span><span id=__span-0-559><a id=__codelineno-0-559 name=__codelineno-0-559></a><span class=sd>    """</span>
</span><span id=__span-0-560><a id=__codelineno-0-560 name=__codelineno-0-560></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_manager</span><span class=p>()</span><span class=o>.</span><span class=n>run_async</span><span class=p>(</span>
</span><span id=__span-0-561><a id=__codelineno-0-561 name=__codelineno-0-561></a>        <span class=n>coro</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_call_tool_unsafe</span><span class=p>(</span><span class=n>tool_name</span><span class=o>=</span><span class=n>tool_name</span><span class=p>,</span> <span class=n>arguments</span><span class=o>=</span><span class=n>arguments</span><span class=p>),</span>
</span><span id=__span-0-562><a id=__codelineno-0-562 name=__codelineno-0-562></a>        <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>request_timeout</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-0-563><a id=__codelineno-0-563 name=__codelineno-0-563></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=bridgic.protocols.mcp.McpServerConnectionStdio class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">McpServerConnectionStdio</span> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio class=headerlink title="Permanent link">¶</a></h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></code></p> <p>The connection to an MCP server using stdio.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-566>566</a></span>
<span class=normal><a href=#__codelineno-0-567>567</a></span>
<span class=normal><a href=#__codelineno-0-568>568</a></span>
<span class=normal><a href=#__codelineno-0-569>569</a></span>
<span class=normal><a href=#__codelineno-0-570>570</a></span>
<span class=normal><a href=#__codelineno-0-571>571</a></span>
<span class=normal><a href=#__codelineno-0-572>572</a></span>
<span class=normal><a href=#__codelineno-0-573>573</a></span>
<span class=normal><a href=#__codelineno-0-574>574</a></span>
<span class=normal><a href=#__codelineno-0-575>575</a></span>
<span class=normal><a href=#__codelineno-0-576>576</a></span>
<span class=normal><a href=#__codelineno-0-577>577</a></span>
<span class=normal><a href=#__codelineno-0-578>578</a></span>
<span class=normal><a href=#__codelineno-0-579>579</a></span>
<span class=normal><a href=#__codelineno-0-580>580</a></span>
<span class=normal><a href=#__codelineno-0-581>581</a></span>
<span class=normal><a href=#__codelineno-0-582>582</a></span>
<span class=normal><a href=#__codelineno-0-583>583</a></span>
<span class=normal><a href=#__codelineno-0-584>584</a></span>
<span class=normal><a href=#__codelineno-0-585>585</a></span>
<span class=normal><a href=#__codelineno-0-586>586</a></span>
<span class=normal><a href=#__codelineno-0-587>587</a></span>
<span class=normal><a href=#__codelineno-0-588>588</a></span>
<span class=normal><a href=#__codelineno-0-589>589</a></span>
<span class=normal><a href=#__codelineno-0-590>590</a></span>
<span class=normal><a href=#__codelineno-0-591>591</a></span>
<span class=normal><a href=#__codelineno-0-592>592</a></span>
<span class=normal><a href=#__codelineno-0-593>593</a></span>
<span class=normal><a href=#__codelineno-0-594>594</a></span>
<span class=normal><a href=#__codelineno-0-595>595</a></span>
<span class=normal><a href=#__codelineno-0-596>596</a></span>
<span class=normal><a href=#__codelineno-0-597>597</a></span>
<span class=normal><a href=#__codelineno-0-598>598</a></span>
<span class=normal><a href=#__codelineno-0-599>599</a></span>
<span class=normal><a href=#__codelineno-0-600>600</a></span>
<span class=normal><a href=#__codelineno-0-601>601</a></span>
<span class=normal><a href=#__codelineno-0-602>602</a></span>
<span class=normal><a href=#__codelineno-0-603>603</a></span>
<span class=normal><a href=#__codelineno-0-604>604</a></span>
<span class=normal><a href=#__codelineno-0-605>605</a></span>
<span class=normal><a href=#__codelineno-0-606>606</a></span>
<span class=normal><a href=#__codelineno-0-607>607</a></span>
<span class=normal><a href=#__codelineno-0-608>608</a></span>
<span class=normal><a href=#__codelineno-0-609>609</a></span>
<span class=normal><a href=#__codelineno-0-610>610</a></span>
<span class=normal><a href=#__codelineno-0-611>611</a></span>
<span class=normal><a href=#__codelineno-0-612>612</a></span>
<span class=normal><a href=#__codelineno-0-613>613</a></span>
<span class=normal><a href=#__codelineno-0-614>614</a></span>
<span class=normal><a href=#__codelineno-0-615>615</a></span>
<span class=normal><a href=#__codelineno-0-616>616</a></span>
<span class=normal><a href=#__codelineno-0-617>617</a></span>
<span class=normal><a href=#__codelineno-0-618>618</a></span>
<span class=normal><a href=#__codelineno-0-619>619</a></span>
<span class=normal><a href=#__codelineno-0-620>620</a></span>
<span class=normal><a href=#__codelineno-0-621>621</a></span>
<span class=normal><a href=#__codelineno-0-622>622</a></span>
<span class=normal><a href=#__codelineno-0-623>623</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-566><a id=__codelineno-0-566 name=__codelineno-0-566></a><span class=k>class</span><span class=w> </span><span class=nc>McpServerConnectionStdio</span><span class=p>(</span><span class=n>McpServerConnection</span><span class=p>):</span>
</span><span id=__span-0-567><a id=__codelineno-0-567 name=__codelineno-0-567></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-568><a id=__codelineno-0-568 name=__codelineno-0-568></a><span class=sd>    The connection to an MCP server using stdio.</span>
</span><span id=__span-0-569><a id=__codelineno-0-569 name=__codelineno-0-569></a><span class=sd>    """</span>
</span><span id=__span-0-570><a id=__codelineno-0-570 name=__codelineno-0-570></a>
</span><span id=__span-0-571><a id=__codelineno-0-571 name=__codelineno-0-571></a>    <span class=n>command</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-0-572><a id=__codelineno-0-572 name=__codelineno-0-572></a><span class=w>    </span><span class=sd>"""The command to use for the connection."""</span>
</span><span id=__span-0-573><a id=__codelineno-0-573 name=__codelineno-0-573></a>
</span><span id=__span-0-574><a id=__codelineno-0-574 name=__codelineno-0-574></a>    <span class=n>encoding</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-0-575><a id=__codelineno-0-575 name=__codelineno-0-575></a><span class=w>    </span><span class=sd>"""The encoding to use for the connection."""</span>
</span><span id=__span-0-576><a id=__codelineno-0-576 name=__codelineno-0-576></a>
</span><span id=__span-0-577><a id=__codelineno-0-577 name=__codelineno-0-577></a>    <span class=n>args</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-0-578><a id=__codelineno-0-578 name=__codelineno-0-578></a><span class=w>    </span><span class=sd>"""The arguments to use for the connection."""</span>
</span><span id=__span-0-579><a id=__codelineno-0-579 name=__codelineno-0-579></a>
</span><span id=__span-0-580><a id=__codelineno-0-580 name=__codelineno-0-580></a>    <span class=n>env</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span>
</span><span id=__span-0-581><a id=__codelineno-0-581 name=__codelineno-0-581></a><span class=w>    </span><span class=sd>"""The environment variables to use for the connection."""</span>
</span><span id=__span-0-582><a id=__codelineno-0-582 name=__codelineno-0-582></a>
</span><span id=__span-0-583><a id=__codelineno-0-583 name=__codelineno-0-583></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-584><a id=__codelineno-0-584 name=__codelineno-0-584></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-585><a id=__codelineno-0-585 name=__codelineno-0-585></a>        <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-586><a id=__codelineno-0-586 name=__codelineno-0-586></a>        <span class=n>command</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-587><a id=__codelineno-0-587 name=__codelineno-0-587></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-588><a id=__codelineno-0-588 name=__codelineno-0-588></a>        <span class=n>args</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-589><a id=__codelineno-0-589 name=__codelineno-0-589></a>        <span class=n>env</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-590><a id=__codelineno-0-590 name=__codelineno-0-590></a>        <span class=n>encoding</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-591><a id=__codelineno-0-591 name=__codelineno-0-591></a>        <span class=n>request_timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-592><a id=__codelineno-0-592 name=__codelineno-0-592></a>        <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
</span><span id=__span-0-593><a id=__codelineno-0-593 name=__codelineno-0-593></a>    <span class=p>):</span>
</span><span id=__span-0-594><a id=__codelineno-0-594 name=__codelineno-0-594></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-595><a id=__codelineno-0-595 name=__codelineno-0-595></a>            <span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-596><a id=__codelineno-0-596 name=__codelineno-0-596></a>            <span class=n>request_timeout</span><span class=o>=</span><span class=n>request_timeout</span><span class=p>,</span>
</span><span id=__span-0-597><a id=__codelineno-0-597 name=__codelineno-0-597></a>            <span class=o>**</span><span class=n>kwargs</span><span class=p>,</span>
</span><span id=__span-0-598><a id=__codelineno-0-598 name=__codelineno-0-598></a>        <span class=p>)</span>
</span><span id=__span-0-599><a id=__codelineno-0-599 name=__codelineno-0-599></a>        <span class=bp>self</span><span class=o>.</span><span class=n>command</span> <span class=o>=</span> <span class=n>command</span>
</span><span id=__span-0-600><a id=__codelineno-0-600 name=__codelineno-0-600></a>        <span class=bp>self</span><span class=o>.</span><span class=n>encoding</span> <span class=o>=</span> <span class=n>encoding</span> <span class=ow>or</span> <span class=s2>"utf-8"</span>
</span><span id=__span-0-601><a id=__codelineno-0-601 name=__codelineno-0-601></a>        <span class=bp>self</span><span class=o>.</span><span class=n>args</span> <span class=o>=</span> <span class=n>args</span>
</span><span id=__span-0-602><a id=__codelineno-0-602 name=__codelineno-0-602></a>        <span class=bp>self</span><span class=o>.</span><span class=n>env</span> <span class=o>=</span> <span class=n>env</span>
</span><span id=__span-0-603><a id=__codelineno-0-603 name=__codelineno-0-603></a>
</span><span id=__span-0-604><a id=__codelineno-0-604 name=__codelineno-0-604></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_mcp_client</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>_AsyncGeneratorContextManager</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=kc>None</span><span class=p>]:</span>
</span><span id=__span-0-605><a id=__codelineno-0-605 name=__codelineno-0-605></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-606><a id=__codelineno-0-606 name=__codelineno-0-606></a><span class=sd>        Get an MCP client transport for stdio.</span>
</span><span id=__span-0-607><a id=__codelineno-0-607 name=__codelineno-0-607></a>
</span><span id=__span-0-608><a id=__codelineno-0-608 name=__codelineno-0-608></a><span class=sd>        Returns</span>
</span><span id=__span-0-609><a id=__codelineno-0-609 name=__codelineno-0-609></a><span class=sd>        -------</span>
</span><span id=__span-0-610><a id=__codelineno-0-610 name=__codelineno-0-610></a><span class=sd>        _AsyncGeneratorContextManager[Any, None]</span>
</span><span id=__span-0-611><a id=__codelineno-0-611 name=__codelineno-0-611></a><span class=sd>            An async context manager for the stdio client transport.</span>
</span><span id=__span-0-612><a id=__codelineno-0-612 name=__codelineno-0-612></a><span class=sd>        """</span>
</span><span id=__span-0-613><a id=__codelineno-0-613 name=__codelineno-0-613></a>        <span class=n>start_args</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-0-614><a id=__codelineno-0-614 name=__codelineno-0-614></a>            <span class=s2>"command"</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>command</span><span class=p>,</span>
</span><span id=__span-0-615><a id=__codelineno-0-615 name=__codelineno-0-615></a>            <span class=s2>"args"</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>args</span><span class=p>,</span>
</span><span id=__span-0-616><a id=__codelineno-0-616 name=__codelineno-0-616></a>            <span class=s2>"env"</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>env</span><span class=p>,</span>
</span><span id=__span-0-617><a id=__codelineno-0-617 name=__codelineno-0-617></a>        <span class=p>}</span>
</span><span id=__span-0-618><a id=__codelineno-0-618 name=__codelineno-0-618></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>encoding</span><span class=p>:</span>
</span><span id=__span-0-619><a id=__codelineno-0-619 name=__codelineno-0-619></a>            <span class=n>start_args</span><span class=p>[</span><span class=s2>"encoding"</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>encoding</span>
</span><span id=__span-0-620><a id=__codelineno-0-620 name=__codelineno-0-620></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>client_kwargs</span><span class=p>:</span>
</span><span id=__span-0-621><a id=__codelineno-0-621 name=__codelineno-0-621></a>            <span class=n>start_args</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>client_kwargs</span><span class=p>)</span>
</span><span id=__span-0-622><a id=__codelineno-0-622 name=__codelineno-0-622></a>
</span><span id=__span-0-623><a id=__codelineno-0-623 name=__codelineno-0-623></a>        <span class=k>return</span> <span class=n>stdio_client</span><span class=p>(</span><span class=n>server</span><span class=o>=</span><span class=n>StdioServerParameters</span><span class=p>(</span><span class=o>**</span><span class=n>start_args</span><span class=p>))</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnectionStdio.command class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">command</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.command class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>command</span><span class=p>:</span> <span class=n><span title=str>str</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnectionStdio(command)>command</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The command to use for the connection.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnectionStdio.encoding class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">encoding</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.encoding class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>encoding</span><span class=p>:</span> <span class=n><span title=str>str</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnectionStdio(encoding)>encoding</span></span> <span class=ow>or</span> <span class=s1>'utf-8'</span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The encoding to use for the connection.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnectionStdio.args class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">args</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.args class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>args</span><span class=p>:</span> <span class=n><span title=typing.List>List</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>]</span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnectionStdio(args)>args</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The arguments to use for the connection.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnectionStdio.env class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">env</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.env class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>env</span><span class=p>:</span> <span class=n><span title=typing.Dict>Dict</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>,</span> <span class=n><span title=str>str</span></span><span class=p>]</span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnectionStdio(env)>env</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The environment variables to use for the connection.</p> </div> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionStdio.get_mcp_client class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_mcp_client</span> <a href=#bridgic.protocols.mcp.McpServerConnectionStdio.get_mcp_client class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_mcp_client</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n><span title=contextlib._AsyncGeneratorContextManager>_AsyncGeneratorContextManager</span></span><span class=p>[</span><span class=n><span title=typing.Any>Any</span></span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span>
</span></code></pre></div> <p>Get an MCP client transport for stdio.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=contextlib._AsyncGeneratorContextManager>_AsyncGeneratorContextManager</span>[<span title=typing.Any>Any</span>, None]</code> </td> <td> <div class=doc-md-description> <p>An async context manager for the stdio client transport.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-604>604</a></span>
<span class=normal><a href=#__codelineno-0-605>605</a></span>
<span class=normal><a href=#__codelineno-0-606>606</a></span>
<span class=normal><a href=#__codelineno-0-607>607</a></span>
<span class=normal><a href=#__codelineno-0-608>608</a></span>
<span class=normal><a href=#__codelineno-0-609>609</a></span>
<span class=normal><a href=#__codelineno-0-610>610</a></span>
<span class=normal><a href=#__codelineno-0-611>611</a></span>
<span class=normal><a href=#__codelineno-0-612>612</a></span>
<span class=normal><a href=#__codelineno-0-613>613</a></span>
<span class=normal><a href=#__codelineno-0-614>614</a></span>
<span class=normal><a href=#__codelineno-0-615>615</a></span>
<span class=normal><a href=#__codelineno-0-616>616</a></span>
<span class=normal><a href=#__codelineno-0-617>617</a></span>
<span class=normal><a href=#__codelineno-0-618>618</a></span>
<span class=normal><a href=#__codelineno-0-619>619</a></span>
<span class=normal><a href=#__codelineno-0-620>620</a></span>
<span class=normal><a href=#__codelineno-0-621>621</a></span>
<span class=normal><a href=#__codelineno-0-622>622</a></span>
<span class=normal><a href=#__codelineno-0-623>623</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-604><a id=__codelineno-0-604 name=__codelineno-0-604></a><span class=k>def</span><span class=w> </span><span class=nf>get_mcp_client</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>_AsyncGeneratorContextManager</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=kc>None</span><span class=p>]:</span>
</span><span id=__span-0-605><a id=__codelineno-0-605 name=__codelineno-0-605></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-606><a id=__codelineno-0-606 name=__codelineno-0-606></a><span class=sd>    Get an MCP client transport for stdio.</span>
</span><span id=__span-0-607><a id=__codelineno-0-607 name=__codelineno-0-607></a>
</span><span id=__span-0-608><a id=__codelineno-0-608 name=__codelineno-0-608></a><span class=sd>    Returns</span>
</span><span id=__span-0-609><a id=__codelineno-0-609 name=__codelineno-0-609></a><span class=sd>    -------</span>
</span><span id=__span-0-610><a id=__codelineno-0-610 name=__codelineno-0-610></a><span class=sd>    _AsyncGeneratorContextManager[Any, None]</span>
</span><span id=__span-0-611><a id=__codelineno-0-611 name=__codelineno-0-611></a><span class=sd>        An async context manager for the stdio client transport.</span>
</span><span id=__span-0-612><a id=__codelineno-0-612 name=__codelineno-0-612></a><span class=sd>    """</span>
</span><span id=__span-0-613><a id=__codelineno-0-613 name=__codelineno-0-613></a>    <span class=n>start_args</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-0-614><a id=__codelineno-0-614 name=__codelineno-0-614></a>        <span class=s2>"command"</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>command</span><span class=p>,</span>
</span><span id=__span-0-615><a id=__codelineno-0-615 name=__codelineno-0-615></a>        <span class=s2>"args"</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>args</span><span class=p>,</span>
</span><span id=__span-0-616><a id=__codelineno-0-616 name=__codelineno-0-616></a>        <span class=s2>"env"</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>env</span><span class=p>,</span>
</span><span id=__span-0-617><a id=__codelineno-0-617 name=__codelineno-0-617></a>    <span class=p>}</span>
</span><span id=__span-0-618><a id=__codelineno-0-618 name=__codelineno-0-618></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>encoding</span><span class=p>:</span>
</span><span id=__span-0-619><a id=__codelineno-0-619 name=__codelineno-0-619></a>        <span class=n>start_args</span><span class=p>[</span><span class=s2>"encoding"</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>encoding</span>
</span><span id=__span-0-620><a id=__codelineno-0-620 name=__codelineno-0-620></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>client_kwargs</span><span class=p>:</span>
</span><span id=__span-0-621><a id=__codelineno-0-621 name=__codelineno-0-621></a>        <span class=n>start_args</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>client_kwargs</span><span class=p>)</span>
</span><span id=__span-0-622><a id=__codelineno-0-622 name=__codelineno-0-622></a>
</span><span id=__span-0-623><a id=__codelineno-0-623 name=__codelineno-0-623></a>    <span class=k>return</span> <span class=n>stdio_client</span><span class=p>(</span><span class=n>server</span><span class=o>=</span><span class=n>StdioServerParameters</span><span class=p>(</span><span class=o>**</span><span class=n>start_args</span><span class=p>))</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=bridgic.protocols.mcp.McpServerConnectionStreamableHttp class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">McpServerConnectionStreamableHttp</span> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp class=headerlink title="Permanent link">¶</a></h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></code></p> <p>The connection to an MCP server using streamable http.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-625>625</a></span>
<span class=normal><a href=#__codelineno-0-626>626</a></span>
<span class=normal><a href=#__codelineno-0-627>627</a></span>
<span class=normal><a href=#__codelineno-0-628>628</a></span>
<span class=normal><a href=#__codelineno-0-629>629</a></span>
<span class=normal><a href=#__codelineno-0-630>630</a></span>
<span class=normal><a href=#__codelineno-0-631>631</a></span>
<span class=normal><a href=#__codelineno-0-632>632</a></span>
<span class=normal><a href=#__codelineno-0-633>633</a></span>
<span class=normal><a href=#__codelineno-0-634>634</a></span>
<span class=normal><a href=#__codelineno-0-635>635</a></span>
<span class=normal><a href=#__codelineno-0-636>636</a></span>
<span class=normal><a href=#__codelineno-0-637>637</a></span>
<span class=normal><a href=#__codelineno-0-638>638</a></span>
<span class=normal><a href=#__codelineno-0-639>639</a></span>
<span class=normal><a href=#__codelineno-0-640>640</a></span>
<span class=normal><a href=#__codelineno-0-641>641</a></span>
<span class=normal><a href=#__codelineno-0-642>642</a></span>
<span class=normal><a href=#__codelineno-0-643>643</a></span>
<span class=normal><a href=#__codelineno-0-644>644</a></span>
<span class=normal><a href=#__codelineno-0-645>645</a></span>
<span class=normal><a href=#__codelineno-0-646>646</a></span>
<span class=normal><a href=#__codelineno-0-647>647</a></span>
<span class=normal><a href=#__codelineno-0-648>648</a></span>
<span class=normal><a href=#__codelineno-0-649>649</a></span>
<span class=normal><a href=#__codelineno-0-650>650</a></span>
<span class=normal><a href=#__codelineno-0-651>651</a></span>
<span class=normal><a href=#__codelineno-0-652>652</a></span>
<span class=normal><a href=#__codelineno-0-653>653</a></span>
<span class=normal><a href=#__codelineno-0-654>654</a></span>
<span class=normal><a href=#__codelineno-0-655>655</a></span>
<span class=normal><a href=#__codelineno-0-656>656</a></span>
<span class=normal><a href=#__codelineno-0-657>657</a></span>
<span class=normal><a href=#__codelineno-0-658>658</a></span>
<span class=normal><a href=#__codelineno-0-659>659</a></span>
<span class=normal><a href=#__codelineno-0-660>660</a></span>
<span class=normal><a href=#__codelineno-0-661>661</a></span>
<span class=normal><a href=#__codelineno-0-662>662</a></span>
<span class=normal><a href=#__codelineno-0-663>663</a></span>
<span class=normal><a href=#__codelineno-0-664>664</a></span>
<span class=normal><a href=#__codelineno-0-665>665</a></span>
<span class=normal><a href=#__codelineno-0-666>666</a></span>
<span class=normal><a href=#__codelineno-0-667>667</a></span>
<span class=normal><a href=#__codelineno-0-668>668</a></span>
<span class=normal><a href=#__codelineno-0-669>669</a></span>
<span class=normal><a href=#__codelineno-0-670>670</a></span>
<span class=normal><a href=#__codelineno-0-671>671</a></span>
<span class=normal><a href=#__codelineno-0-672>672</a></span>
<span class=normal><a href=#__codelineno-0-673>673</a></span>
<span class=normal><a href=#__codelineno-0-674>674</a></span>
<span class=normal><a href=#__codelineno-0-675>675</a></span>
<span class=normal><a href=#__codelineno-0-676>676</a></span>
<span class=normal><a href=#__codelineno-0-677>677</a></span>
<span class=normal><a href=#__codelineno-0-678>678</a></span>
<span class=normal><a href=#__codelineno-0-679>679</a></span>
<span class=normal><a href=#__codelineno-0-680>680</a></span>
<span class=normal><a href=#__codelineno-0-681>681</a></span>
<span class=normal><a href=#__codelineno-0-682>682</a></span>
<span class=normal><a href=#__codelineno-0-683>683</a></span>
<span class=normal><a href=#__codelineno-0-684>684</a></span>
<span class=normal><a href=#__codelineno-0-685>685</a></span>
<span class=normal><a href=#__codelineno-0-686>686</a></span>
<span class=normal><a href=#__codelineno-0-687>687</a></span>
<span class=normal><a href=#__codelineno-0-688>688</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-625><a id=__codelineno-0-625 name=__codelineno-0-625></a><span class=k>class</span><span class=w> </span><span class=nc>McpServerConnectionStreamableHttp</span><span class=p>(</span><span class=n>McpServerConnection</span><span class=p>):</span>
</span><span id=__span-0-626><a id=__codelineno-0-626 name=__codelineno-0-626></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-627><a id=__codelineno-0-627 name=__codelineno-0-627></a><span class=sd>    The connection to an MCP server using streamable http.</span>
</span><span id=__span-0-628><a id=__codelineno-0-628 name=__codelineno-0-628></a><span class=sd>    """</span>
</span><span id=__span-0-629><a id=__codelineno-0-629 name=__codelineno-0-629></a>
</span><span id=__span-0-630><a id=__codelineno-0-630 name=__codelineno-0-630></a>    <span class=n>url</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-0-631><a id=__codelineno-0-631 name=__codelineno-0-631></a><span class=w>    </span><span class=sd>"""The URL of the MCP server."""</span>
</span><span id=__span-0-632><a id=__codelineno-0-632 name=__codelineno-0-632></a>
</span><span id=__span-0-633><a id=__codelineno-0-633 name=__codelineno-0-633></a>    <span class=n>http_client</span><span class=p>:</span> <span class=n>httpx</span><span class=o>.</span><span class=n>AsyncClient</span>
</span><span id=__span-0-634><a id=__codelineno-0-634 name=__codelineno-0-634></a><span class=w>    </span><span class=sd>"""The HTTP client to use for the connection."""</span>
</span><span id=__span-0-635><a id=__codelineno-0-635 name=__codelineno-0-635></a>
</span><span id=__span-0-636><a id=__codelineno-0-636 name=__codelineno-0-636></a>    <span class=n>terminate_on_close</span><span class=p>:</span> <span class=nb>bool</span>
</span><span id=__span-0-637><a id=__codelineno-0-637 name=__codelineno-0-637></a><span class=w>    </span><span class=sd>"""Whether to terminate the session when the connection is closed."""</span>
</span><span id=__span-0-638><a id=__codelineno-0-638 name=__codelineno-0-638></a>
</span><span id=__span-0-639><a id=__codelineno-0-639 name=__codelineno-0-639></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-640><a id=__codelineno-0-640 name=__codelineno-0-640></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-641><a id=__codelineno-0-641 name=__codelineno-0-641></a>        <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-642><a id=__codelineno-0-642 name=__codelineno-0-642></a>        <span class=n>url</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-643><a id=__codelineno-0-643 name=__codelineno-0-643></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-644><a id=__codelineno-0-644 name=__codelineno-0-644></a>        <span class=n>http_client</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>httpx</span><span class=o>.</span><span class=n>AsyncClient</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-645><a id=__codelineno-0-645 name=__codelineno-0-645></a>        <span class=n>terminate_on_close</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-646><a id=__codelineno-0-646 name=__codelineno-0-646></a>        <span class=n>request_timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-647><a id=__codelineno-0-647 name=__codelineno-0-647></a>    <span class=p>):</span>
</span><span id=__span-0-648><a id=__codelineno-0-648 name=__codelineno-0-648></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-649><a id=__codelineno-0-649 name=__codelineno-0-649></a><span class=sd>        Initialize a streamable HTTP connection to an MCP server.</span>
</span><span id=__span-0-650><a id=__codelineno-0-650 name=__codelineno-0-650></a>
</span><span id=__span-0-651><a id=__codelineno-0-651 name=__codelineno-0-651></a><span class=sd>        Parameters</span>
</span><span id=__span-0-652><a id=__codelineno-0-652 name=__codelineno-0-652></a><span class=sd>        ----------</span>
</span><span id=__span-0-653><a id=__codelineno-0-653 name=__codelineno-0-653></a><span class=sd>        name : str</span>
</span><span id=__span-0-654><a id=__codelineno-0-654 name=__codelineno-0-654></a><span class=sd>            The name of the connection.</span>
</span><span id=__span-0-655><a id=__codelineno-0-655 name=__codelineno-0-655></a><span class=sd>        url : str</span>
</span><span id=__span-0-656><a id=__codelineno-0-656 name=__codelineno-0-656></a><span class=sd>            The URL of the MCP server.</span>
</span><span id=__span-0-657><a id=__codelineno-0-657 name=__codelineno-0-657></a><span class=sd>        http_client : Optional[httpx.AsyncClient]</span>
</span><span id=__span-0-658><a id=__codelineno-0-658 name=__codelineno-0-658></a><span class=sd>            Optional pre-configured httpx.AsyncClient. If None, a default</span>
</span><span id=__span-0-659><a id=__codelineno-0-659 name=__codelineno-0-659></a><span class=sd>            client with recommended MCP timeouts will be created. To configure headers,</span>
</span><span id=__span-0-660><a id=__codelineno-0-660 name=__codelineno-0-660></a><span class=sd>            authentication, or other HTTP settings, create an httpx.AsyncClient and pass it here.</span>
</span><span id=__span-0-661><a id=__codelineno-0-661 name=__codelineno-0-661></a><span class=sd>        terminate_on_close : Optional[bool]</span>
</span><span id=__span-0-662><a id=__codelineno-0-662 name=__codelineno-0-662></a><span class=sd>            If True, send a DELETE request to terminate the session when the connection</span>
</span><span id=__span-0-663><a id=__codelineno-0-663 name=__codelineno-0-663></a><span class=sd>            is closed. Defaults to True.</span>
</span><span id=__span-0-664><a id=__codelineno-0-664 name=__codelineno-0-664></a><span class=sd>        request_timeout : Optional[int]</span>
</span><span id=__span-0-665><a id=__codelineno-0-665 name=__codelineno-0-665></a><span class=sd>            The timeout in seconds for MCP requests. Default is 30 seconds.</span>
</span><span id=__span-0-666><a id=__codelineno-0-666 name=__codelineno-0-666></a><span class=sd>        """</span>
</span><span id=__span-0-667><a id=__codelineno-0-667 name=__codelineno-0-667></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-668><a id=__codelineno-0-668 name=__codelineno-0-668></a>            <span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-669><a id=__codelineno-0-669 name=__codelineno-0-669></a>            <span class=n>request_timeout</span><span class=o>=</span><span class=n>request_timeout</span><span class=p>,</span>
</span><span id=__span-0-670><a id=__codelineno-0-670 name=__codelineno-0-670></a>        <span class=p>)</span>
</span><span id=__span-0-671><a id=__codelineno-0-671 name=__codelineno-0-671></a>        <span class=bp>self</span><span class=o>.</span><span class=n>url</span> <span class=o>=</span> <span class=n>url</span>
</span><span id=__span-0-672><a id=__codelineno-0-672 name=__codelineno-0-672></a>        <span class=bp>self</span><span class=o>.</span><span class=n>http_client</span> <span class=o>=</span> <span class=n>http_client</span>
</span><span id=__span-0-673><a id=__codelineno-0-673 name=__codelineno-0-673></a>        <span class=bp>self</span><span class=o>.</span><span class=n>terminate_on_close</span> <span class=o>=</span> <span class=n>terminate_on_close</span> <span class=ow>or</span> <span class=kc>True</span>
</span><span id=__span-0-674><a id=__codelineno-0-674 name=__codelineno-0-674></a>
</span><span id=__span-0-675><a id=__codelineno-0-675 name=__codelineno-0-675></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_mcp_client</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>_AsyncGeneratorContextManager</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=kc>None</span><span class=p>]:</span>
</span><span id=__span-0-676><a id=__codelineno-0-676 name=__codelineno-0-676></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-677><a id=__codelineno-0-677 name=__codelineno-0-677></a><span class=sd>        Get an MCP client transport for streamable http.</span>
</span><span id=__span-0-678><a id=__codelineno-0-678 name=__codelineno-0-678></a>
</span><span id=__span-0-679><a id=__codelineno-0-679 name=__codelineno-0-679></a><span class=sd>        Returns</span>
</span><span id=__span-0-680><a id=__codelineno-0-680 name=__codelineno-0-680></a><span class=sd>        -------</span>
</span><span id=__span-0-681><a id=__codelineno-0-681 name=__codelineno-0-681></a><span class=sd>        _AsyncGeneratorContextManager[Any, None]</span>
</span><span id=__span-0-682><a id=__codelineno-0-682 name=__codelineno-0-682></a><span class=sd>            An async context manager for the streamable HTTP client transport.</span>
</span><span id=__span-0-683><a id=__codelineno-0-683 name=__codelineno-0-683></a><span class=sd>        """</span>
</span><span id=__span-0-684><a id=__codelineno-0-684 name=__codelineno-0-684></a>        <span class=k>return</span> <span class=n>streamable_http_client</span><span class=p>(</span>
</span><span id=__span-0-685><a id=__codelineno-0-685 name=__codelineno-0-685></a>            <span class=n>url</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>url</span><span class=p>,</span>
</span><span id=__span-0-686><a id=__codelineno-0-686 name=__codelineno-0-686></a>            <span class=n>http_client</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>http_client</span><span class=p>,</span>
</span><span id=__span-0-687><a id=__codelineno-0-687 name=__codelineno-0-687></a>            <span class=n>terminate_on_close</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>terminate_on_close</span><span class=p>,</span>
</span><span id=__span-0-688><a id=__codelineno-0-688 name=__codelineno-0-688></a>        <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnectionStreamableHttp.url class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">url</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.url class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>url</span><span class=p>:</span> <span class=n><span title=str>str</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnectionStreamableHttp(url)>url</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The URL of the MCP server.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnectionStreamableHttp.http_client class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">http_client</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.http_client class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>http_client</span><span class=p>:</span> <span class=n><span title=httpx.AsyncClient>AsyncClient</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnectionStreamableHttp(http_client)>http_client</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The HTTP client to use for the connection.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpServerConnectionStreamableHttp.terminate_on_close class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">terminate_on_close</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.terminate_on_close class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>terminate_on_close</span><span class=p>:</span> <span class=n><span title=bool>bool</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_server_connection.McpServerConnectionStreamableHttp(terminate_on_close)>terminate_on_close</span></span> <span class=ow>or</span> <span class=kc>True</span>
</span></code></pre></div> <div class="doc doc-contents "> <p>Whether to terminate the session when the connection is closed.</p> </div> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionStreamableHttp.get_mcp_client class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_mcp_client</span> <a href=#bridgic.protocols.mcp.McpServerConnectionStreamableHttp.get_mcp_client class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_mcp_client</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n><span title=contextlib._AsyncGeneratorContextManager>_AsyncGeneratorContextManager</span></span><span class=p>[</span><span class=n><span title=typing.Any>Any</span></span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span>
</span></code></pre></div> <p>Get an MCP client transport for streamable http.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=contextlib._AsyncGeneratorContextManager>_AsyncGeneratorContextManager</span>[<span title=typing.Any>Any</span>, None]</code> </td> <td> <div class=doc-md-description> <p>An async context manager for the streamable HTTP client transport.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-675>675</a></span>
<span class=normal><a href=#__codelineno-0-676>676</a></span>
<span class=normal><a href=#__codelineno-0-677>677</a></span>
<span class=normal><a href=#__codelineno-0-678>678</a></span>
<span class=normal><a href=#__codelineno-0-679>679</a></span>
<span class=normal><a href=#__codelineno-0-680>680</a></span>
<span class=normal><a href=#__codelineno-0-681>681</a></span>
<span class=normal><a href=#__codelineno-0-682>682</a></span>
<span class=normal><a href=#__codelineno-0-683>683</a></span>
<span class=normal><a href=#__codelineno-0-684>684</a></span>
<span class=normal><a href=#__codelineno-0-685>685</a></span>
<span class=normal><a href=#__codelineno-0-686>686</a></span>
<span class=normal><a href=#__codelineno-0-687>687</a></span>
<span class=normal><a href=#__codelineno-0-688>688</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-675><a id=__codelineno-0-675 name=__codelineno-0-675></a><span class=k>def</span><span class=w> </span><span class=nf>get_mcp_client</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>_AsyncGeneratorContextManager</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=kc>None</span><span class=p>]:</span>
</span><span id=__span-0-676><a id=__codelineno-0-676 name=__codelineno-0-676></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-677><a id=__codelineno-0-677 name=__codelineno-0-677></a><span class=sd>    Get an MCP client transport for streamable http.</span>
</span><span id=__span-0-678><a id=__codelineno-0-678 name=__codelineno-0-678></a>
</span><span id=__span-0-679><a id=__codelineno-0-679 name=__codelineno-0-679></a><span class=sd>    Returns</span>
</span><span id=__span-0-680><a id=__codelineno-0-680 name=__codelineno-0-680></a><span class=sd>    -------</span>
</span><span id=__span-0-681><a id=__codelineno-0-681 name=__codelineno-0-681></a><span class=sd>    _AsyncGeneratorContextManager[Any, None]</span>
</span><span id=__span-0-682><a id=__codelineno-0-682 name=__codelineno-0-682></a><span class=sd>        An async context manager for the streamable HTTP client transport.</span>
</span><span id=__span-0-683><a id=__codelineno-0-683 name=__codelineno-0-683></a><span class=sd>    """</span>
</span><span id=__span-0-684><a id=__codelineno-0-684 name=__codelineno-0-684></a>    <span class=k>return</span> <span class=n>streamable_http_client</span><span class=p>(</span>
</span><span id=__span-0-685><a id=__codelineno-0-685 name=__codelineno-0-685></a>        <span class=n>url</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>url</span><span class=p>,</span>
</span><span id=__span-0-686><a id=__codelineno-0-686 name=__codelineno-0-686></a>        <span class=n>http_client</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>http_client</span><span class=p>,</span>
</span><span id=__span-0-687><a id=__codelineno-0-687 name=__codelineno-0-687></a>        <span class=n>terminate_on_close</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>terminate_on_close</span><span class=p>,</span>
</span><span id=__span-0-688><a id=__codelineno-0-688 name=__codelineno-0-688></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=bridgic.protocols.mcp.McpServerConnectionManager class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">McpServerConnectionManager</span> <a href=#bridgic.protocols.mcp.McpServerConnectionManager class=headerlink title="Permanent link">¶</a></h2> <div class="doc doc-contents "> <p>Manages multiple MCP server connections, sharing a single thread and event loop.</p> <p>This manager ensures that all MCP operations run in a dedicated thread with its own event loop, avoiding issues with cross-thread event loop usage.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection_manager.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-12> 12</a></span>
<span class=normal><a href=#__codelineno-0-13> 13</a></span>
<span class=normal><a href=#__codelineno-0-14> 14</a></span>
<span class=normal><a href=#__codelineno-0-15> 15</a></span>
<span class=normal><a href=#__codelineno-0-16> 16</a></span>
<span class=normal><a href=#__codelineno-0-17> 17</a></span>
<span class=normal><a href=#__codelineno-0-18> 18</a></span>
<span class=normal><a href=#__codelineno-0-19> 19</a></span>
<span class=normal><a href=#__codelineno-0-20> 20</a></span>
<span class=normal><a href=#__codelineno-0-21> 21</a></span>
<span class=normal><a href=#__codelineno-0-22> 22</a></span>
<span class=normal><a href=#__codelineno-0-23> 23</a></span>
<span class=normal><a href=#__codelineno-0-24> 24</a></span>
<span class=normal><a href=#__codelineno-0-25> 25</a></span>
<span class=normal><a href=#__codelineno-0-26> 26</a></span>
<span class=normal><a href=#__codelineno-0-27> 27</a></span>
<span class=normal><a href=#__codelineno-0-28> 28</a></span>
<span class=normal><a href=#__codelineno-0-29> 29</a></span>
<span class=normal><a href=#__codelineno-0-30> 30</a></span>
<span class=normal><a href=#__codelineno-0-31> 31</a></span>
<span class=normal><a href=#__codelineno-0-32> 32</a></span>
<span class=normal><a href=#__codelineno-0-33> 33</a></span>
<span class=normal><a href=#__codelineno-0-34> 34</a></span>
<span class=normal><a href=#__codelineno-0-35> 35</a></span>
<span class=normal><a href=#__codelineno-0-36> 36</a></span>
<span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span>
<span class=normal><a href=#__codelineno-0-195>195</a></span>
<span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span>
<span class=normal><a href=#__codelineno-0-241>241</a></span>
<span class=normal><a href=#__codelineno-0-242>242</a></span>
<span class=normal><a href=#__codelineno-0-243>243</a></span>
<span class=normal><a href=#__codelineno-0-244>244</a></span>
<span class=normal><a href=#__codelineno-0-245>245</a></span>
<span class=normal><a href=#__codelineno-0-246>246</a></span>
<span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span>
<span class=normal><a href=#__codelineno-0-249>249</a></span>
<span class=normal><a href=#__codelineno-0-250>250</a></span>
<span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span>
<span class=normal><a href=#__codelineno-0-254>254</a></span>
<span class=normal><a href=#__codelineno-0-255>255</a></span>
<span class=normal><a href=#__codelineno-0-256>256</a></span>
<span class=normal><a href=#__codelineno-0-257>257</a></span>
<span class=normal><a href=#__codelineno-0-258>258</a></span>
<span class=normal><a href=#__codelineno-0-259>259</a></span>
<span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span>
<span class=normal><a href=#__codelineno-0-264>264</a></span>
<span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span>
<span class=normal><a href=#__codelineno-0-275>275</a></span>
<span class=normal><a href=#__codelineno-0-276>276</a></span>
<span class=normal><a href=#__codelineno-0-277>277</a></span>
<span class=normal><a href=#__codelineno-0-278>278</a></span>
<span class=normal><a href=#__codelineno-0-279>279</a></span>
<span class=normal><a href=#__codelineno-0-280>280</a></span>
<span class=normal><a href=#__codelineno-0-281>281</a></span>
<span class=normal><a href=#__codelineno-0-282>282</a></span>
<span class=normal><a href=#__codelineno-0-283>283</a></span>
<span class=normal><a href=#__codelineno-0-284>284</a></span>
<span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span>
<span class=normal><a href=#__codelineno-0-302>302</a></span>
<span class=normal><a href=#__codelineno-0-303>303</a></span>
<span class=normal><a href=#__codelineno-0-304>304</a></span>
<span class=normal><a href=#__codelineno-0-305>305</a></span>
<span class=normal><a href=#__codelineno-0-306>306</a></span>
<span class=normal><a href=#__codelineno-0-307>307</a></span>
<span class=normal><a href=#__codelineno-0-308>308</a></span>
<span class=normal><a href=#__codelineno-0-309>309</a></span>
<span class=normal><a href=#__codelineno-0-310>310</a></span>
<span class=normal><a href=#__codelineno-0-311>311</a></span>
<span class=normal><a href=#__codelineno-0-312>312</a></span>
<span class=normal><a href=#__codelineno-0-313>313</a></span>
<span class=normal><a href=#__codelineno-0-314>314</a></span>
<span class=normal><a href=#__codelineno-0-315>315</a></span>
<span class=normal><a href=#__codelineno-0-316>316</a></span>
<span class=normal><a href=#__codelineno-0-317>317</a></span>
<span class=normal><a href=#__codelineno-0-318>318</a></span>
<span class=normal><a href=#__codelineno-0-319>319</a></span>
<span class=normal><a href=#__codelineno-0-320>320</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=k>class</span><span class=w> </span><span class=nc>McpServerConnectionManager</span><span class=p>:</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14></a><span class=sd>    Manages multiple MCP server connections, sharing a single thread and event loop.</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15></a>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16></a><span class=sd>    This manager ensures that all MCP operations run in a dedicated thread with its own</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=sd>    event loop, avoiding issues with cross-thread event loop usage.</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=sd>    """</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19></a>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20></a>    <span class=n>_instances_lock</span><span class=p>:</span> <span class=n>ClassVar</span><span class=p>[</span><span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>]</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21></a>    <span class=n>_instances</span><span class=p>:</span> <span class=n>ClassVar</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=s2>"McpServerConnectionManager"</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22></a>    <span class=n>_connection_to_manager</span><span class=p>:</span> <span class=n>ClassVar</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23></a>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24></a>    <span class=n>_name</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25></a>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26></a>    <span class=n>_connections_lock</span><span class=p>:</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=n>_connections</span><span class=p>:</span> <span class=n>weakref</span><span class=o>.</span><span class=n>WeakValueDictionary</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=s2>"McpServerConnection"</span><span class=p>]</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a>    <span class=n>_thread</span><span class=p>:</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a>    <span class=n>_loop</span><span class=p>:</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>AbstractEventLoop</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a>    <span class=n>_shutdown</span><span class=p>:</span> <span class=nb>bool</span>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_name</span> <span class=o>=</span> <span class=n>name</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connections_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connections</span> <span class=o>=</span> <span class=n>weakref</span><span class=o>.</span><span class=n>WeakValueDictionary</span><span class=p>()</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_thread</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_shutdown</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a>        <span class=bp>cls</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a>        <span class=c1># Automatically register this instance in the class-level registry.</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a>        <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances_lock</span><span class=p>:</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>            <span class=k>if</span> <span class=n>name</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>:</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Manager with name '</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>' already exists"</span><span class=p>)</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_instance</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>manager_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>"default-mcp-manager"</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>"McpServerConnectionManager"</span><span class=p>:</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a><span class=sd>        Get a manager instance by name, creating it if it doesn't exist.</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a><span class=sd>        Parameters</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a><span class=sd>        ----------</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a><span class=sd>        manager_name : str</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a><span class=sd>            The name of the manager instance to retrieve. Defaults to "default-mcp-manager".</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=sd>        Returns</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a><span class=sd>        -------</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a><span class=sd>        McpServerConnectionManager</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=sd>            The manager instance with the specified name.</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a><span class=sd>        """</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>        <span class=k>if</span> <span class=n>manager_name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>:</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>[</span><span class=n>manager_name</span><span class=p>]</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=n>manager_name</span><span class=p>)</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>[</span><span class=n>manager_name</span><span class=p>]</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_connection</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>connection_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>"McpServerConnection"</span><span class=p>]:</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a><span class=sd>        Get a connection by its name across all manager instances.</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=sd>        It first finds the manager that owns the connection using the class-level </span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a><span class=sd>        connection-to-manager mapping, then retrieves the connection from that manager.</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a><span class=sd>        Parameters</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=sd>        ----------</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a><span class=sd>        connection_name : str</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a><span class=sd>            The name of the connection to retrieve.</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=sd>        Returns</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a><span class=sd>        -------</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a><span class=sd>        Optional[McpServerConnection]</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a><span class=sd>            The connection with the specified name, or None if not found, the manager</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=sd>            doesn't exist, or the connection has been garbage collected.</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a><span class=sd>        Raises</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a><span class=sd>        ------</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a><span class=sd>        KeyError</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a><span class=sd>            If the connection is not found.</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a><span class=sd>        """</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>        <span class=n>manager_name</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>connection_name</span><span class=p>)</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=n>manager</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_instance</span><span class=p>(</span><span class=n>manager_name</span><span class=p>)</span> <span class=k>if</span> <span class=n>manager_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=kc>None</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a>        <span class=k>if</span> <span class=n>manager</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a>            <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>                <span class=sa>f</span><span class=s2>"McpServerConnectionManager-[</span><span class=si>{</span><span class=n>manager_name</span><span class=si>}</span><span class=s2>] is not found: "</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>                <span class=sa>f</span><span class=s2>"connection_name=</span><span class=si>{</span><span class=n>connection_name</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a>            <span class=p>)</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a>        <span class=k>return</span> <span class=n>manager</span><span class=o>.</span><span class=n>get_connection_by_name</span><span class=p>(</span><span class=n>connection_name</span><span class=p>)</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a>    <span class=k>def</span><span class=w> </span><span class=nf>register_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>connection</span><span class=p>:</span> <span class=s2>"McpServerConnection"</span><span class=p>):</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>        Register a connection into the manager.</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>        Parameters</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=sd>        ----------</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>        connection : McpServerConnection</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>            The connection to register.</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a><span class=sd>        Raises</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=sd>        ------</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=sd>        McpServerConnectionError</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=sd>            If a connection with the same name is already registered.</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a><span class=sd>        """</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>        <span class=bp>cls</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>        <span class=k>if</span> <span class=n>connection</span><span class=o>.</span><span class=n>name</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=p>:</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>            <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a>                <span class=sa>f</span><span class=s2>"A connection with the name '</span><span class=si>{</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>' is already registered."</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>            <span class=p>)</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>        <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances_lock</span><span class=p>:</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>            <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=p>[</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_name</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connections_lock</span><span class=p>:</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_connections</span><span class=p>[</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>connection</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>        <span class=n>connection</span><span class=o>.</span><span class=n>_manager</span> <span class=o>=</span> <span class=bp>self</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>    <span class=k>def</span><span class=w> </span><span class=nf>unregister_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>connection</span><span class=p>:</span> <span class=s2>"McpServerConnection"</span><span class=p>):</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a><span class=sd>        Unregister a connection from the manager.</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a><span class=sd>        Parameters</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a><span class=sd>        ----------</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a><span class=sd>        connection : McpServerConnection</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a><span class=sd>            The connection to unregister.</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a><span class=sd>        """</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connections_lock</span><span class=p>:</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_connections</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>        <span class=bp>cls</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>        <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances_lock</span><span class=p>:</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>            <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>        <span class=n>connection</span><span class=o>.</span><span class=n>_manager</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_connection_by_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>"McpServerConnection"</span><span class=p>]:</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a><span class=sd>        Get a connection by its name from this manager instance.</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=sd>        This method looks up a registered connection by its name within this manager.</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a><span class=sd>        If the connection has been garbage collected, `weakref.WeakValueDictionary` will</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a><span class=sd>        automatically remove it and None will be returned.</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a><span class=sd>        Parameters</span>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>        ----------</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>        name : str</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a><span class=sd>            The name of the connection to retrieve.</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a><span class=sd>        Returns</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a><span class=sd>        -------</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=sd>        Optional[McpServerConnection]</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=sd>            The connection with the specified name, or None if not found or has been</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a><span class=sd>            garbage collected.</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a><span class=sd>        Raises</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=sd>        ------</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a><span class=sd>        KeyError</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a><span class=sd>            If the connection is not found.</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a><span class=sd>        """</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>        <span class=k>if</span> <span class=n>name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connections</span><span class=p>:</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>            <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a>                <span class=sa>f</span><span class=s2>"Connection '</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>' is not found in McpServerConnectionManager-[</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=si>}</span><span class=s2>]"</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>            <span class=p>)</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connections</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a>    <span class=k>def</span><span class=w> </span><span class=nf>run_sync</span><span class=p>(</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>        <span class=n>coro</span><span class=p>:</span> <span class=n>Coroutine</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>        <span class=n>timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a><span class=sd>        Submit a coroutine to the manager's event loop and wait for the result synchronously.</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a><span class=sd>        This method blocks until the coroutine completes, suitable for use in synchronous contexts.</span>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a><span class=sd>        Parameters</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a><span class=sd>        ----------</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a><span class=sd>        coro : Coroutine</span>
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194></a><span class=sd>            The coroutine to run.</span>
</span><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195></a><span class=sd>        timeout : Optional[float]</span>
</span><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196></a><span class=sd>            Timeout in seconds. If None, no timeout.</span>
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a><span class=sd>        Returns</span>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a><span class=sd>        -------</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a><span class=sd>        Any</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a><span class=sd>            The result of the coroutine execution.</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a><span class=sd>        Raises</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a><span class=sd>        ------</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a><span class=sd>            If the event loop is not running.</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a><span class=sd>        TimeoutError</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a><span class=sd>            If the coroutine execution times out.</span>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a><span class=sd>        """</span>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_ensure_loop_running</span><span class=p>()</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>is_running</span><span class=p>():</span>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a>            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Event loop is not running in McpServerConnectionManager-[</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=si>}</span><span class=s2>]"</span><span class=p>)</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a>        <span class=n>future</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>run_coroutine_threadsafe</span><span class=p>(</span><span class=n>coro</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=p>)</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a>        <span class=k>return</span> <span class=n>future</span><span class=o>.</span><span class=n>result</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>run_async</span><span class=p>(</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a>        <span class=n>coro</span><span class=p>:</span> <span class=n>Coroutine</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a>        <span class=n>timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a><span class=sd>        Submit a coroutine to the manager's event loop and await its result in a non-blocking way.</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a><span class=sd>        This method submits the coroutine to the manager's dedicated event loop, and then </span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a><span class=sd>        waits for its completion in a non-blocking way.</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a><span class=sd>        Parameters</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a><span class=sd>        ----------</span>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a><span class=sd>        coro : Coroutine</span>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a><span class=sd>            The coroutine to run.</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a><span class=sd>        timeout : Optional[float]</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a><span class=sd>            Timeout in seconds. If None, no timeout.</span>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a><span class=sd>        Returns</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a><span class=sd>        -------</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a><span class=sd>        Any</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a><span class=sd>            The result of the coroutine execution.</span>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a>
</span><span id=__span-0-241><a id=__codelineno-0-241 name=__codelineno-0-241></a><span class=sd>        Raises</span>
</span><span id=__span-0-242><a id=__codelineno-0-242 name=__codelineno-0-242></a><span class=sd>        ------</span>
</span><span id=__span-0-243><a id=__codelineno-0-243 name=__codelineno-0-243></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-244><a id=__codelineno-0-244 name=__codelineno-0-244></a><span class=sd>            If the event loop is not running.</span>
</span><span id=__span-0-245><a id=__codelineno-0-245 name=__codelineno-0-245></a><span class=sd>        TimeoutError</span>
</span><span id=__span-0-246><a id=__codelineno-0-246 name=__codelineno-0-246></a><span class=sd>            If the coroutine execution times out.</span>
</span><span id=__span-0-247><a id=__codelineno-0-247 name=__codelineno-0-247></a><span class=sd>        """</span>
</span><span id=__span-0-248><a id=__codelineno-0-248 name=__codelineno-0-248></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_ensure_loop_running</span><span class=p>()</span>
</span><span id=__span-0-249><a id=__codelineno-0-249 name=__codelineno-0-249></a>
</span><span id=__span-0-250><a id=__codelineno-0-250 name=__codelineno-0-250></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>is_running</span><span class=p>():</span>
</span><span id=__span-0-251><a id=__codelineno-0-251 name=__codelineno-0-251></a>            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Event loop is not running in McpServerConnectionManager-[</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=si>}</span><span class=s2>]"</span><span class=p>)</span>
</span><span id=__span-0-252><a id=__codelineno-0-252 name=__codelineno-0-252></a>
</span><span id=__span-0-253><a id=__codelineno-0-253 name=__codelineno-0-253></a>        <span class=n>future</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>run_coroutine_threadsafe</span><span class=p>(</span><span class=n>coro</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=p>)</span>
</span><span id=__span-0-254><a id=__codelineno-0-254 name=__codelineno-0-254></a>        <span class=n>asyncio_future</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>wrap_future</span><span class=p>(</span><span class=n>future</span><span class=p>)</span>
</span><span id=__span-0-255><a id=__codelineno-0-255 name=__codelineno-0-255></a>
</span><span id=__span-0-256><a id=__codelineno-0-256 name=__codelineno-0-256></a>        <span class=k>if</span> <span class=n>timeout</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-257><a id=__codelineno-0-257 name=__codelineno-0-257></a>            <span class=k>return</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>wait_for</span><span class=p>(</span><span class=n>asyncio_future</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>
</span><span id=__span-0-258><a id=__codelineno-0-258 name=__codelineno-0-258></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-259><a id=__codelineno-0-259 name=__codelineno-0-259></a>            <span class=k>return</span> <span class=k>await</span> <span class=n>asyncio_future</span>
</span><span id=__span-0-260><a id=__codelineno-0-260 name=__codelineno-0-260></a>
</span><span id=__span-0-261><a id=__codelineno-0-261 name=__codelineno-0-261></a>    <span class=k>def</span><span class=w> </span><span class=nf>shutdown</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-262><a id=__codelineno-0-262 name=__codelineno-0-262></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-263><a id=__codelineno-0-263 name=__codelineno-0-263></a><span class=sd>        Shutdown the manager and stop the event loop.</span>
</span><span id=__span-0-264><a id=__codelineno-0-264 name=__codelineno-0-264></a>
</span><span id=__span-0-265><a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=sd>        This method also removes the manager from the class-level registry and cleans up</span>
</span><span id=__span-0-266><a id=__codelineno-0-266 name=__codelineno-0-266></a><span class=sd>        all connection-to-manager mappings for connections registered with this manager.</span>
</span><span id=__span-0-267><a id=__codelineno-0-267 name=__codelineno-0-267></a><span class=sd>        """</span>
</span><span id=__span-0-268><a id=__codelineno-0-268 name=__codelineno-0-268></a>        <span class=c1># Mark the manager is going to shutdown.</span>
</span><span id=__span-0-269><a id=__codelineno-0-269 name=__codelineno-0-269></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_shutdown</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-270><a id=__codelineno-0-270 name=__codelineno-0-270></a>
</span><span id=__span-0-271><a id=__codelineno-0-271 name=__codelineno-0-271></a>        <span class=c1># Stop the event loop as soon as possible.</span>
</span><span id=__span-0-272><a id=__codelineno-0-272 name=__codelineno-0-272></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>is_running</span><span class=p>():</span>
</span><span id=__span-0-273><a id=__codelineno-0-273 name=__codelineno-0-273></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>call_soon_threadsafe</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>stop</span><span class=p>)</span>
</span><span id=__span-0-274><a id=__codelineno-0-274 name=__codelineno-0-274></a>
</span><span id=__span-0-275><a id=__codelineno-0-275 name=__codelineno-0-275></a>        <span class=c1># Join the thread to wait for it to finish.</span>
</span><span id=__span-0-276><a id=__codelineno-0-276 name=__codelineno-0-276></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_thread</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-277><a id=__codelineno-0-277 name=__codelineno-0-277></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_thread</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span><span id=__span-0-278><a id=__codelineno-0-278 name=__codelineno-0-278></a>
</span><span id=__span-0-279><a id=__codelineno-0-279 name=__codelineno-0-279></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-280><a id=__codelineno-0-280 name=__codelineno-0-280></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_thread</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-281><a id=__codelineno-0-281 name=__codelineno-0-281></a>
</span><span id=__span-0-282><a id=__codelineno-0-282 name=__codelineno-0-282></a>        <span class=bp>cls</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-283><a id=__codelineno-0-283 name=__codelineno-0-283></a>
</span><span id=__span-0-284><a id=__codelineno-0-284 name=__codelineno-0-284></a>        <span class=c1># Remove the registered item.</span>
</span><span id=__span-0-285><a id=__codelineno-0-285 name=__codelineno-0-285></a>        <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances_lock</span><span class=p>:</span>
</span><span id=__span-0-286><a id=__codelineno-0-286 name=__codelineno-0-286></a>            <span class=c1># Remove the manager from the class-level registry.</span>
</span><span id=__span-0-287><a id=__codelineno-0-287 name=__codelineno-0-287></a>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-288><a id=__codelineno-0-288 name=__codelineno-0-288></a>
</span><span id=__span-0-289><a id=__codelineno-0-289 name=__codelineno-0-289></a>        <span class=c1># Clean up connection-to-manager mappings.</span>
</span><span id=__span-0-290><a id=__codelineno-0-290 name=__codelineno-0-290></a>        <span class=n>conn_names_to_remove</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-0-291><a id=__codelineno-0-291 name=__codelineno-0-291></a>            <span class=n>conn_name</span> <span class=k>for</span> <span class=n>conn_name</span><span class=p>,</span> <span class=n>mgr_name</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=o>.</span><span class=n>items</span><span class=p>()</span> <span class=k>if</span> <span class=n>mgr_name</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_name</span>
</span><span id=__span-0-292><a id=__codelineno-0-292 name=__codelineno-0-292></a>        <span class=p>]</span>
</span><span id=__span-0-293><a id=__codelineno-0-293 name=__codelineno-0-293></a>        <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances_lock</span><span class=p>:</span>
</span><span id=__span-0-294><a id=__codelineno-0-294 name=__codelineno-0-294></a>            <span class=k>for</span> <span class=n>conn_name</span> <span class=ow>in</span> <span class=n>conn_names_to_remove</span><span class=p>:</span>
</span><span id=__span-0-295><a id=__codelineno-0-295 name=__codelineno-0-295></a>                <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>conn_name</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-296><a id=__codelineno-0-296 name=__codelineno-0-296></a>
</span><span id=__span-0-297><a id=__codelineno-0-297 name=__codelineno-0-297></a>    <span class=k>def</span><span class=w> </span><span class=nf>_ensure_loop_running</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-298><a id=__codelineno-0-298 name=__codelineno-0-298></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-299><a id=__codelineno-0-299 name=__codelineno-0-299></a><span class=sd>        Ensure the manager's event loop is running in a dedicated thread.</span>
</span><span id=__span-0-300><a id=__codelineno-0-300 name=__codelineno-0-300></a><span class=sd>        """</span>
</span><span id=__span-0-301><a id=__codelineno-0-301 name=__codelineno-0-301></a>        <span class=k>def</span><span class=w> </span><span class=nf>run_until_shutdown</span><span class=p>():</span>
</span><span id=__span-0-302><a id=__codelineno-0-302 name=__codelineno-0-302></a>            <span class=n>asyncio</span><span class=o>.</span><span class=n>set_event_loop</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=p>)</span>
</span><span id=__span-0-303><a id=__codelineno-0-303 name=__codelineno-0-303></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-304><a id=__codelineno-0-304 name=__codelineno-0-304></a>                <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>run_forever</span><span class=p>()</span>
</span><span id=__span-0-305><a id=__codelineno-0-305 name=__codelineno-0-305></a>            <span class=k>finally</span><span class=p>:</span>
</span><span id=__span-0-306><a id=__codelineno-0-306 name=__codelineno-0-306></a>                <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span><span id=__span-0-307><a id=__codelineno-0-307 name=__codelineno-0-307></a>
</span><span id=__span-0-308><a id=__codelineno-0-308 name=__codelineno-0-308></a>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connections_lock</span><span class=p>:</span>
</span><span id=__span-0-309><a id=__codelineno-0-309 name=__codelineno-0-309></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>is_running</span><span class=p>():</span>
</span><span id=__span-0-310><a id=__codelineno-0-310 name=__codelineno-0-310></a>                <span class=k>return</span>
</span><span id=__span-0-311><a id=__codelineno-0-311 name=__codelineno-0-311></a>
</span><span id=__span-0-312><a id=__codelineno-0-312 name=__codelineno-0-312></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_shutdown</span><span class=p>:</span>
</span><span id=__span-0-313><a id=__codelineno-0-313 name=__codelineno-0-313></a>                <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"McpServerConnectionManager-[</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=si>}</span><span class=s2>] has been shut down"</span><span class=p>)</span>
</span><span id=__span-0-314><a id=__codelineno-0-314 name=__codelineno-0-314></a>
</span><span id=__span-0-315><a id=__codelineno-0-315 name=__codelineno-0-315></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>new_event_loop</span><span class=p>()</span>
</span><span id=__span-0-316><a id=__codelineno-0-316 name=__codelineno-0-316></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span>
</span><span id=__span-0-317><a id=__codelineno-0-317 name=__codelineno-0-317></a>                <span class=n>target</span><span class=o>=</span><span class=n>run_until_shutdown</span><span class=p>,</span>
</span><span id=__span-0-318><a id=__codelineno-0-318 name=__codelineno-0-318></a>                <span class=n>daemon</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-0-319><a id=__codelineno-0-319 name=__codelineno-0-319></a>            <span class=p>)</span>
</span><span id=__span-0-320><a id=__codelineno-0-320 name=__codelineno-0-320></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionManager.get_instance class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_instance</span> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.get_instance class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_instance</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>manager_name</span><span class=p>:</span> <span class=n><span title=str>str</span></span> <span class=o>=</span> <span class=s2>"default-mcp-manager"</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnectionManager</span> (<code>bridgic.protocols.mcp._mcp_server_connection_manager.McpServerConnectionManager</code>)' href=#bridgic.protocols.mcp.McpServerConnectionManager>McpServerConnectionManager</a></span>
</span></code></pre></div> <p>Get a manager instance by name, creating it if it doesn't exist.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>manager_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The name of the manager instance to retrieve. Defaults to "default-mcp-manager".</p> </div> </td> <td> <code>'default-mcp-manager'</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnectionManager</span> (<code>bridgic.protocols.mcp._mcp_server_connection_manager.McpServerConnectionManager</code>)' href=#bridgic.protocols.mcp.McpServerConnectionManager>McpServerConnectionManager</a></code> </td> <td> <div class=doc-md-description> <p>The manager instance with the specified name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection_manager.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a><span class=nd>@classmethod</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a><span class=k>def</span><span class=w> </span><span class=nf>get_instance</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>manager_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>"default-mcp-manager"</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>"McpServerConnectionManager"</span><span class=p>:</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a><span class=sd>    Get a manager instance by name, creating it if it doesn't exist.</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a><span class=sd>    Parameters</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a><span class=sd>    ----------</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a><span class=sd>    manager_name : str</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a><span class=sd>        The name of the manager instance to retrieve. Defaults to "default-mcp-manager".</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=sd>    Returns</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a><span class=sd>    -------</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a><span class=sd>    McpServerConnectionManager</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=sd>        The manager instance with the specified name.</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a><span class=sd>    """</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>    <span class=k>if</span> <span class=n>manager_name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>:</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>        <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>[</span><span class=n>manager_name</span><span class=p>]</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=n>manager_name</span><span class=p>)</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>[</span><span class=n>manager_name</span><span class=p>]</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionManager.get_connection class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_connection</span> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.get_connection class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_connection</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>connection_name</span><span class=p>:</span> <span class=n><span title=str>str</span></span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></span><span class=p>]</span>
</span></code></pre></div> <p>Get a connection by its name across all manager instances.</p> <p>It first finds the manager that owns the connection using the class-level connection-to-manager mapping, then retrieves the connection from that manager.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>connection_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The name of the connection to retrieve.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a>]</code> </td> <td> <div class=doc-md-description> <p>The connection with the specified name, or None if not found, the manager doesn't exist, or the connection has been garbage collected.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=KeyError>KeyError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection is not found.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection_manager.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a><span class=nd>@classmethod</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a><span class=k>def</span><span class=w> </span><span class=nf>get_connection</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>connection_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>"McpServerConnection"</span><span class=p>]:</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a><span class=sd>    Get a connection by its name across all manager instances.</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=sd>    It first finds the manager that owns the connection using the class-level </span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a><span class=sd>    connection-to-manager mapping, then retrieves the connection from that manager.</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a><span class=sd>    Parameters</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=sd>    ----------</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a><span class=sd>    connection_name : str</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a><span class=sd>        The name of the connection to retrieve.</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=sd>    Returns</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a><span class=sd>    -------</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a><span class=sd>    Optional[McpServerConnection]</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a><span class=sd>        The connection with the specified name, or None if not found, the manager</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=sd>        doesn't exist, or the connection has been garbage collected.</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a><span class=sd>    Raises</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a><span class=sd>    ------</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a><span class=sd>    KeyError</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a><span class=sd>        If the connection is not found.</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a><span class=sd>    """</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>    <span class=n>manager_name</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>connection_name</span><span class=p>)</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>    <span class=n>manager</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_instance</span><span class=p>(</span><span class=n>manager_name</span><span class=p>)</span> <span class=k>if</span> <span class=n>manager_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=kc>None</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a>    <span class=k>if</span> <span class=n>manager</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a>        <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>            <span class=sa>f</span><span class=s2>"McpServerConnectionManager-[</span><span class=si>{</span><span class=n>manager_name</span><span class=si>}</span><span class=s2>] is not found: "</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>            <span class=sa>f</span><span class=s2>"connection_name=</span><span class=si>{</span><span class=n>connection_name</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a>        <span class=p>)</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a>    <span class=k>return</span> <span class=n>manager</span><span class=o>.</span><span class=n>get_connection_by_name</span><span class=p>(</span><span class=n>connection_name</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionManager.register_connection class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">register_connection</span> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.register_connection class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>register_connection</span><span class=p>(</span><span class=n>connection</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></span><span class=p>)</span>
</span></code></pre></div> <p>Register a connection into the manager.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>connection</code> </td> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></code> </td> <td> <div class=doc-md-description> <p>The connection to register.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnectionError</span> (<code>bridgic.protocols.mcp._error.McpServerConnectionError</code>)' href=#bridgic.protocols.mcp.McpServerConnectionError>McpServerConnectionError</a></code> </td> <td> <div class=doc-md-description> <p>If a connection with the same name is already registered.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection_manager.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=k>def</span><span class=w> </span><span class=nf>register_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>connection</span><span class=p>:</span> <span class=s2>"McpServerConnection"</span><span class=p>):</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>    Register a connection into the manager.</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>    Parameters</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=sd>    ----------</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>    connection : McpServerConnection</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>        The connection to register.</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a><span class=sd>    Raises</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=sd>    ------</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=sd>    McpServerConnectionError</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=sd>        If a connection with the same name is already registered.</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a><span class=sd>    """</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>    <span class=bp>cls</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>    <span class=k>if</span> <span class=n>connection</span><span class=o>.</span><span class=n>name</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=p>:</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>        <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a>            <span class=sa>f</span><span class=s2>"A connection with the name '</span><span class=si>{</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>' is already registered."</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>        <span class=p>)</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>    <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances_lock</span><span class=p>:</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>        <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=p>[</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_name</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connections_lock</span><span class=p>:</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connections</span><span class=p>[</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>connection</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>    <span class=n>connection</span><span class=o>.</span><span class=n>_manager</span> <span class=o>=</span> <span class=bp>self</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionManager.unregister_connection class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">unregister_connection</span> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.unregister_connection class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>unregister_connection</span><span class=p>(</span><span class=n>connection</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></span><span class=p>)</span>
</span></code></pre></div> <p>Unregister a connection from the manager.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>connection</code> </td> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></code> </td> <td> <div class=doc-md-description> <p>The connection to unregister.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection_manager.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a><span class=k>def</span><span class=w> </span><span class=nf>unregister_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>connection</span><span class=p>:</span> <span class=s2>"McpServerConnection"</span><span class=p>):</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a><span class=sd>    Unregister a connection from the manager.</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a><span class=sd>    Parameters</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a><span class=sd>    ----------</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a><span class=sd>    connection : McpServerConnection</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a><span class=sd>        The connection to unregister.</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a><span class=sd>    """</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connections_lock</span><span class=p>:</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connections</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>    <span class=bp>cls</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>    <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances_lock</span><span class=p>:</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>        <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>    <span class=n>connection</span><span class=o>.</span><span class=n>_manager</span> <span class=o>=</span> <span class=kc>None</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionManager.get_connection_by_name class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_connection_by_name</span> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.get_connection_by_name class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_connection_by_name</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>name</span><span class=p>:</span> <span class=n><span title=str>str</span></span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></span><span class=p>]</span>
</span></code></pre></div> <p>Get a connection by its name from this manager instance.</p> <p>This method looks up a registered connection by its name within this manager. If the connection has been garbage collected, <code>weakref.WeakValueDictionary</code> will automatically remove it and None will be returned.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The name of the connection to retrieve.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a>]</code> </td> <td> <div class=doc-md-description> <p>The connection with the specified name, or None if not found or has been garbage collected.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=KeyError>KeyError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection is not found.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection_manager.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=k>def</span><span class=w> </span><span class=nf>get_connection_by_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>"McpServerConnection"</span><span class=p>]:</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a><span class=sd>    Get a connection by its name from this manager instance.</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=sd>    This method looks up a registered connection by its name within this manager.</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a><span class=sd>    If the connection has been garbage collected, `weakref.WeakValueDictionary` will</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a><span class=sd>    automatically remove it and None will be returned.</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a><span class=sd>    Parameters</span>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>    ----------</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>    name : str</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a><span class=sd>        The name of the connection to retrieve.</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a><span class=sd>    Returns</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a><span class=sd>    -------</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=sd>    Optional[McpServerConnection]</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=sd>        The connection with the specified name, or None if not found or has been</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a><span class=sd>        garbage collected.</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a><span class=sd>    Raises</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=sd>    ------</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a><span class=sd>    KeyError</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a><span class=sd>        If the connection is not found.</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a><span class=sd>    """</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>    <span class=k>if</span> <span class=n>name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connections</span><span class=p>:</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>        <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a>            <span class=sa>f</span><span class=s2>"Connection '</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>' is not found in McpServerConnectionManager-[</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=si>}</span><span class=s2>]"</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>        <span class=p>)</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connections</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionManager.run_sync class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">run_sync</span> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.run_sync class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>run_sync</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>coro</span><span class=p>:</span> <span class=n><span title=typing.Coroutine>Coroutine</span></span><span class=p>[</span><span class=n><span title=typing.Any>Any</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>],</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>timeout</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=float>float</span></span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=typing.Any>Any</span></span>
</span></code></pre></div> <p>Submit a coroutine to the manager's event loop and wait for the result synchronously.</p> <p>This method blocks until the coroutine completes, suitable for use in synchronous contexts.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>coro</code> </td> <td> <code><span title=typing.Coroutine>Coroutine</span></code> </td> <td> <div class=doc-md-description> <p>The coroutine to run.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>timeout</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=float>float</span>]</code> </td> <td> <div class=doc-md-description> <p>Timeout in seconds. If None, no timeout.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>The result of the coroutine execution.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the event loop is not running.</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><span title=TimeoutError>TimeoutError</span></code> </td> <td> <div class=doc-md-description> <p>If the coroutine execution times out.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection_manager.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span>
<span class=normal><a href=#__codelineno-0-195>195</a></span>
<span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a><span class=k>def</span><span class=w> </span><span class=nf>run_sync</span><span class=p>(</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>    <span class=n>coro</span><span class=p>:</span> <span class=n>Coroutine</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>    <span class=n>timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a><span class=sd>    Submit a coroutine to the manager's event loop and wait for the result synchronously.</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a><span class=sd>    This method blocks until the coroutine completes, suitable for use in synchronous contexts.</span>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a><span class=sd>    Parameters</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a><span class=sd>    ----------</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a><span class=sd>    coro : Coroutine</span>
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194></a><span class=sd>        The coroutine to run.</span>
</span><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195></a><span class=sd>    timeout : Optional[float]</span>
</span><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196></a><span class=sd>        Timeout in seconds. If None, no timeout.</span>
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a><span class=sd>    Returns</span>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a><span class=sd>    -------</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a><span class=sd>    Any</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a><span class=sd>        The result of the coroutine execution.</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a><span class=sd>    Raises</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a><span class=sd>    ------</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a><span class=sd>        If the event loop is not running.</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a><span class=sd>    TimeoutError</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a><span class=sd>        If the coroutine execution times out.</span>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a><span class=sd>    """</span>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_ensure_loop_running</span><span class=p>()</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>is_running</span><span class=p>():</span>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a>        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Event loop is not running in McpServerConnectionManager-[</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=si>}</span><span class=s2>]"</span><span class=p>)</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a>    <span class=n>future</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>run_coroutine_threadsafe</span><span class=p>(</span><span class=n>coro</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=p>)</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a>    <span class=k>return</span> <span class=n>future</span><span class=o>.</span><span class=n>result</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionManager.run_async class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">run_async</span> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.run_async class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>run_async</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>coro</span><span class=p>:</span> <span class=n><span title=typing.Coroutine>Coroutine</span></span><span class=p>[</span><span class=n><span title=typing.Any>Any</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>],</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>timeout</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=float>float</span></span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=typing.Any>Any</span></span>
</span></code></pre></div> <p>Submit a coroutine to the manager's event loop and await its result in a non-blocking way.</p> <p>This method submits the coroutine to the manager's dedicated event loop, and then waits for its completion in a non-blocking way.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>coro</code> </td> <td> <code><span title=typing.Coroutine>Coroutine</span></code> </td> <td> <div class=doc-md-description> <p>The coroutine to run.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>timeout</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=float>float</span>]</code> </td> <td> <div class=doc-md-description> <p>Timeout in seconds. If None, no timeout.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>The result of the coroutine execution.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the event loop is not running.</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><span title=TimeoutError>TimeoutError</span></code> </td> <td> <div class=doc-md-description> <p>If the coroutine execution times out.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection_manager.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span>
<span class=normal><a href=#__codelineno-0-241>241</a></span>
<span class=normal><a href=#__codelineno-0-242>242</a></span>
<span class=normal><a href=#__codelineno-0-243>243</a></span>
<span class=normal><a href=#__codelineno-0-244>244</a></span>
<span class=normal><a href=#__codelineno-0-245>245</a></span>
<span class=normal><a href=#__codelineno-0-246>246</a></span>
<span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span>
<span class=normal><a href=#__codelineno-0-249>249</a></span>
<span class=normal><a href=#__codelineno-0-250>250</a></span>
<span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span>
<span class=normal><a href=#__codelineno-0-254>254</a></span>
<span class=normal><a href=#__codelineno-0-255>255</a></span>
<span class=normal><a href=#__codelineno-0-256>256</a></span>
<span class=normal><a href=#__codelineno-0-257>257</a></span>
<span class=normal><a href=#__codelineno-0-258>258</a></span>
<span class=normal><a href=#__codelineno-0-259>259</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>run_async</span><span class=p>(</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a>    <span class=n>coro</span><span class=p>:</span> <span class=n>Coroutine</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a>    <span class=n>timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a><span class=sd>    Submit a coroutine to the manager's event loop and await its result in a non-blocking way.</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a><span class=sd>    This method submits the coroutine to the manager's dedicated event loop, and then </span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a><span class=sd>    waits for its completion in a non-blocking way.</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a><span class=sd>    Parameters</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a><span class=sd>    ----------</span>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a><span class=sd>    coro : Coroutine</span>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a><span class=sd>        The coroutine to run.</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a><span class=sd>    timeout : Optional[float]</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a><span class=sd>        Timeout in seconds. If None, no timeout.</span>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a><span class=sd>    Returns</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a><span class=sd>    -------</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a><span class=sd>    Any</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a><span class=sd>        The result of the coroutine execution.</span>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a>
</span><span id=__span-0-241><a id=__codelineno-0-241 name=__codelineno-0-241></a><span class=sd>    Raises</span>
</span><span id=__span-0-242><a id=__codelineno-0-242 name=__codelineno-0-242></a><span class=sd>    ------</span>
</span><span id=__span-0-243><a id=__codelineno-0-243 name=__codelineno-0-243></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-244><a id=__codelineno-0-244 name=__codelineno-0-244></a><span class=sd>        If the event loop is not running.</span>
</span><span id=__span-0-245><a id=__codelineno-0-245 name=__codelineno-0-245></a><span class=sd>    TimeoutError</span>
</span><span id=__span-0-246><a id=__codelineno-0-246 name=__codelineno-0-246></a><span class=sd>        If the coroutine execution times out.</span>
</span><span id=__span-0-247><a id=__codelineno-0-247 name=__codelineno-0-247></a><span class=sd>    """</span>
</span><span id=__span-0-248><a id=__codelineno-0-248 name=__codelineno-0-248></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_ensure_loop_running</span><span class=p>()</span>
</span><span id=__span-0-249><a id=__codelineno-0-249 name=__codelineno-0-249></a>
</span><span id=__span-0-250><a id=__codelineno-0-250 name=__codelineno-0-250></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>is_running</span><span class=p>():</span>
</span><span id=__span-0-251><a id=__codelineno-0-251 name=__codelineno-0-251></a>        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Event loop is not running in McpServerConnectionManager-[</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=si>}</span><span class=s2>]"</span><span class=p>)</span>
</span><span id=__span-0-252><a id=__codelineno-0-252 name=__codelineno-0-252></a>
</span><span id=__span-0-253><a id=__codelineno-0-253 name=__codelineno-0-253></a>    <span class=n>future</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>run_coroutine_threadsafe</span><span class=p>(</span><span class=n>coro</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=p>)</span>
</span><span id=__span-0-254><a id=__codelineno-0-254 name=__codelineno-0-254></a>    <span class=n>asyncio_future</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>wrap_future</span><span class=p>(</span><span class=n>future</span><span class=p>)</span>
</span><span id=__span-0-255><a id=__codelineno-0-255 name=__codelineno-0-255></a>
</span><span id=__span-0-256><a id=__codelineno-0-256 name=__codelineno-0-256></a>    <span class=k>if</span> <span class=n>timeout</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-257><a id=__codelineno-0-257 name=__codelineno-0-257></a>        <span class=k>return</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>wait_for</span><span class=p>(</span><span class=n>asyncio_future</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>
</span><span id=__span-0-258><a id=__codelineno-0-258 name=__codelineno-0-258></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-259><a id=__codelineno-0-259 name=__codelineno-0-259></a>        <span class=k>return</span> <span class=k>await</span> <span class=n>asyncio_future</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpServerConnectionManager.shutdown class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">shutdown</span> <a href=#bridgic.protocols.mcp.McpServerConnectionManager.shutdown class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>shutdown</span><span class=p>()</span>
</span></code></pre></div> <p>Shutdown the manager and stop the event loop.</p> <p>This method also removes the manager from the class-level registry and cleans up all connection-to-manager mappings for connections registered with this manager.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_server_connection_manager.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span>
<span class=normal><a href=#__codelineno-0-264>264</a></span>
<span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span>
<span class=normal><a href=#__codelineno-0-275>275</a></span>
<span class=normal><a href=#__codelineno-0-276>276</a></span>
<span class=normal><a href=#__codelineno-0-277>277</a></span>
<span class=normal><a href=#__codelineno-0-278>278</a></span>
<span class=normal><a href=#__codelineno-0-279>279</a></span>
<span class=normal><a href=#__codelineno-0-280>280</a></span>
<span class=normal><a href=#__codelineno-0-281>281</a></span>
<span class=normal><a href=#__codelineno-0-282>282</a></span>
<span class=normal><a href=#__codelineno-0-283>283</a></span>
<span class=normal><a href=#__codelineno-0-284>284</a></span>
<span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-261><a id=__codelineno-0-261 name=__codelineno-0-261></a><span class=k>def</span><span class=w> </span><span class=nf>shutdown</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-262><a id=__codelineno-0-262 name=__codelineno-0-262></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-263><a id=__codelineno-0-263 name=__codelineno-0-263></a><span class=sd>    Shutdown the manager and stop the event loop.</span>
</span><span id=__span-0-264><a id=__codelineno-0-264 name=__codelineno-0-264></a>
</span><span id=__span-0-265><a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=sd>    This method also removes the manager from the class-level registry and cleans up</span>
</span><span id=__span-0-266><a id=__codelineno-0-266 name=__codelineno-0-266></a><span class=sd>    all connection-to-manager mappings for connections registered with this manager.</span>
</span><span id=__span-0-267><a id=__codelineno-0-267 name=__codelineno-0-267></a><span class=sd>    """</span>
</span><span id=__span-0-268><a id=__codelineno-0-268 name=__codelineno-0-268></a>    <span class=c1># Mark the manager is going to shutdown.</span>
</span><span id=__span-0-269><a id=__codelineno-0-269 name=__codelineno-0-269></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_shutdown</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-270><a id=__codelineno-0-270 name=__codelineno-0-270></a>
</span><span id=__span-0-271><a id=__codelineno-0-271 name=__codelineno-0-271></a>    <span class=c1># Stop the event loop as soon as possible.</span>
</span><span id=__span-0-272><a id=__codelineno-0-272 name=__codelineno-0-272></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>is_running</span><span class=p>():</span>
</span><span id=__span-0-273><a id=__codelineno-0-273 name=__codelineno-0-273></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>call_soon_threadsafe</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_loop</span><span class=o>.</span><span class=n>stop</span><span class=p>)</span>
</span><span id=__span-0-274><a id=__codelineno-0-274 name=__codelineno-0-274></a>
</span><span id=__span-0-275><a id=__codelineno-0-275 name=__codelineno-0-275></a>    <span class=c1># Join the thread to wait for it to finish.</span>
</span><span id=__span-0-276><a id=__codelineno-0-276 name=__codelineno-0-276></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_thread</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-277><a id=__codelineno-0-277 name=__codelineno-0-277></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_thread</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span><span id=__span-0-278><a id=__codelineno-0-278 name=__codelineno-0-278></a>
</span><span id=__span-0-279><a id=__codelineno-0-279 name=__codelineno-0-279></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_loop</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-280><a id=__codelineno-0-280 name=__codelineno-0-280></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_thread</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-281><a id=__codelineno-0-281 name=__codelineno-0-281></a>
</span><span id=__span-0-282><a id=__codelineno-0-282 name=__codelineno-0-282></a>    <span class=bp>cls</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span><span id=__span-0-283><a id=__codelineno-0-283 name=__codelineno-0-283></a>
</span><span id=__span-0-284><a id=__codelineno-0-284 name=__codelineno-0-284></a>    <span class=c1># Remove the registered item.</span>
</span><span id=__span-0-285><a id=__codelineno-0-285 name=__codelineno-0-285></a>    <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances_lock</span><span class=p>:</span>
</span><span id=__span-0-286><a id=__codelineno-0-286 name=__codelineno-0-286></a>        <span class=c1># Remove the manager from the class-level registry.</span>
</span><span id=__span-0-287><a id=__codelineno-0-287 name=__codelineno-0-287></a>        <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-288><a id=__codelineno-0-288 name=__codelineno-0-288></a>
</span><span id=__span-0-289><a id=__codelineno-0-289 name=__codelineno-0-289></a>    <span class=c1># Clean up connection-to-manager mappings.</span>
</span><span id=__span-0-290><a id=__codelineno-0-290 name=__codelineno-0-290></a>    <span class=n>conn_names_to_remove</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-0-291><a id=__codelineno-0-291 name=__codelineno-0-291></a>        <span class=n>conn_name</span> <span class=k>for</span> <span class=n>conn_name</span><span class=p>,</span> <span class=n>mgr_name</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=o>.</span><span class=n>items</span><span class=p>()</span> <span class=k>if</span> <span class=n>mgr_name</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_name</span>
</span><span id=__span-0-292><a id=__codelineno-0-292 name=__codelineno-0-292></a>    <span class=p>]</span>
</span><span id=__span-0-293><a id=__codelineno-0-293 name=__codelineno-0-293></a>    <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances_lock</span><span class=p>:</span>
</span><span id=__span-0-294><a id=__codelineno-0-294 name=__codelineno-0-294></a>        <span class=k>for</span> <span class=n>conn_name</span> <span class=ow>in</span> <span class=n>conn_names_to_remove</span><span class=p>:</span>
</span><span id=__span-0-295><a id=__codelineno-0-295 name=__codelineno-0-295></a>            <span class=bp>cls</span><span class=o>.</span><span class=n>_connection_to_manager</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>conn_name</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=bridgic.protocols.mcp.McpToolSpec class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">McpToolSpec</span> <a href=#bridgic.protocols.mcp.McpToolSpec class=headerlink title="Permanent link">¶</a></h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ToolSpec</span> (<code>bridgic.core.agentic.tool_specs._base_tool_spec.ToolSpec</code>)' href=../../../../bridgic-core/bridgic/core/agentic/tool_specs/#bridgic.core.agentic.tool_specs.ToolSpec>ToolSpec</a></code></p> <p>A tool specification that represents an MCP tool from a connected MCP server.</p> <p>This class provides a bridge between MCP tools and the Bridgic framework, allowing MCP tools to be used seamlessly within Bridgic agentic systems.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_spec.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-16> 16</a></span>
<span class=normal><a href=#__codelineno-0-17> 17</a></span>
<span class=normal><a href=#__codelineno-0-18> 18</a></span>
<span class=normal><a href=#__codelineno-0-19> 19</a></span>
<span class=normal><a href=#__codelineno-0-20> 20</a></span>
<span class=normal><a href=#__codelineno-0-21> 21</a></span>
<span class=normal><a href=#__codelineno-0-22> 22</a></span>
<span class=normal><a href=#__codelineno-0-23> 23</a></span>
<span class=normal><a href=#__codelineno-0-24> 24</a></span>
<span class=normal><a href=#__codelineno-0-25> 25</a></span>
<span class=normal><a href=#__codelineno-0-26> 26</a></span>
<span class=normal><a href=#__codelineno-0-27> 27</a></span>
<span class=normal><a href=#__codelineno-0-28> 28</a></span>
<span class=normal><a href=#__codelineno-0-29> 29</a></span>
<span class=normal><a href=#__codelineno-0-30> 30</a></span>
<span class=normal><a href=#__codelineno-0-31> 31</a></span>
<span class=normal><a href=#__codelineno-0-32> 32</a></span>
<span class=normal><a href=#__codelineno-0-33> 33</a></span>
<span class=normal><a href=#__codelineno-0-34> 34</a></span>
<span class=normal><a href=#__codelineno-0-35> 35</a></span>
<span class=normal><a href=#__codelineno-0-36> 36</a></span>
<span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16></a><span class=k>class</span><span class=w> </span><span class=nc>McpToolSpec</span><span class=p>(</span><span class=n>ToolSpec</span><span class=p>):</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=sd>    A tool specification that represents an MCP tool from a connected MCP server.</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19></a>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20></a><span class=sd>    This class provides a bridge between MCP tools and the Bridgic framework,</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21></a><span class=sd>    allowing MCP tools to be used seamlessly within Bridgic agentic systems.</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=sd>    """</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23></a>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24></a>    <span class=n>tool_info</span><span class=p>:</span> <span class=n>McpTool</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25></a><span class=w>    </span><span class=sd>"""The raw MCP tool definition from the server."""</span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26></a>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=n>_server_connection</span><span class=p>:</span> <span class=n>McpServerConnection</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a><span class=w>    </span><span class=sd>"""The connection to the MCP server that provides this tool."""</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a>    <span class=n>_server_connection_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a><span class=w>    </span><span class=sd>"""The name of the server connection, used for lookup after deserialization."""</span>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a>        <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a>        <span class=n>tool_info</span><span class=p>:</span> <span class=n>McpTool</span><span class=p>,</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a>        <span class=n>server_connection</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>],</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a>    <span class=p>):</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a>            <span class=n>tool_name</span><span class=o>=</span><span class=n>tool_name</span><span class=p>,</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a>            <span class=n>tool_description</span><span class=o>=</span><span class=n>tool_info</span><span class=o>.</span><span class=n>description</span> <span class=ow>or</span> <span class=s2>""</span><span class=p>,</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>            <span class=n>tool_parameters</span><span class=o>=</span><span class=n>tool_info</span><span class=o>.</span><span class=n>inputSchema</span> <span class=ow>or</span> <span class=p>{},</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a>        <span class=p>)</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>        <span class=c1># Store the corresponding McpTool object.</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a>        <span class=bp>self</span><span class=o>.</span><span class=n>tool_info</span> <span class=o>=</span> <span class=n>tool_info</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a>        <span class=c1># Try to associate with the real connection object.</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_connection</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span> <span class=o>=</span> <span class=n>server_connection</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>):</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>server_connection</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span> <span class=o>=</span> <span class=n>server_connection</span><span class=o>.</span><span class=n>name</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a>            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Invalid type for server connection: </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a>    <span class=k>def</span><span class=w> </span><span class=nf>from_raw</span><span class=p>(</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>        <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>        <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>        <span class=n>server_connection</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>],</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>"McpToolSpec"</span><span class=p>:</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a><span class=sd>        Create a McpToolSpec from a specified server connection and tool name.</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a><span class=sd>        """</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>        <span class=c1># Try to associate with the real connection object.</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>        <span class=n>connection</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>            <span class=n>connection</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_connection</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a>        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>):</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>            <span class=n>connection</span> <span class=o>=</span> <span class=n>server_connection</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a>            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Invalid type for server connection: </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=c1># Use the connection to get the McpToolSpec object corresponding to tool_name</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a>        <span class=n>all_tools</span> <span class=o>=</span> <span class=n>connection</span><span class=o>.</span><span class=n>list_tools</span><span class=p>()</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a>        <span class=n>tool_spec</span> <span class=o>=</span> <span class=nb>next</span><span class=p>((</span><span class=n>tool</span> <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>all_tools</span> <span class=k>if</span> <span class=n>tool</span><span class=o>.</span><span class=n>tool_name</span> <span class=o>==</span> <span class=n>tool_name</span><span class=p>),</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=k>if</span> <span class=n>tool_spec</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Cannot find tool '</span><span class=si>{</span><span class=n>tool_name</span><span class=si>}</span><span class=s2>' in the provided server connection."</span><span class=p>)</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a>        <span class=k>return</span> <span class=n>tool_spec</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=nd>@property</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a>    <span class=k>def</span><span class=w> </span><span class=nf>server_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>McpServerConnection</span><span class=p>:</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a><span class=sd>        Get the server connection, loading it from the server connection manager if necessary.</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a><span class=sd>        This property implements lazy loading of the server connection. If the connection </span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a><span class=sd>        is not available (e.g., after deserialization), it will be retrieved from the </span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a><span class=sd>        server connection manager by its name.</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a><span class=sd>        Returns</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a><span class=sd>        -------</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a><span class=sd>        McpServerConnection</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=sd>            The server connection instance.</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=sd>        Raises</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a><span class=sd>        ------</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=sd>        McpServerConnectionError</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=sd>            If the connection cannot be found in the manager.</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>        """</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a>                <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a>                    <span class=sa>f</span><span class=s2>"Cannot load server connection for McpToolSpec '</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=si>}</span><span class=s2>': "</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>                    <span class=sa>f</span><span class=s2>"connection name is not available."</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a>                <span class=p>)</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a>                <span class=n>connection</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_connection</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span><span class=p>)</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>            <span class=k>except</span> <span class=ne>KeyError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>                <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>                    <span class=sa>f</span><span class=s2>"Failed to load the server connection for McpToolSpec </span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=si>}</span><span class=se>\"</span><span class=s2>, because the "</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>                    <span class=sa>f</span><span class=s2>"connection named </span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span><span class=si>}</span><span class=se>\"</span><span class=s2> was not found in any connection manager. "</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a>                    <span class=sa>f</span><span class=s2>"You must create a McpServerConnection with name </span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span><span class=si>}</span><span class=se>\"</span><span class=s2> and "</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>                    <span class=sa>f</span><span class=s2>"ensure it is properly registered in a connection manager before using this tool spec."</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>                <span class=p>)</span> <span class=kn>from</span><span class=w> </span><span class=nn>e</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>connection</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>    <span class=nd>@override</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>    <span class=k>def</span><span class=w> </span><span class=nf>to_tool</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tool</span><span class=p>:</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a><span class=sd>        Transform this McpToolSpec to a `Tool` object used by LLM.</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a><span class=sd>        Returns</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=sd>        -------</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a><span class=sd>        Tool</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a><span class=sd>            A `Tool` object that can be used by LLM for tool selection.</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a><span class=sd>        """</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>        <span class=k>return</span> <span class=n>Tool</span><span class=p>(</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>            <span class=n>name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=p>,</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>            <span class=n>description</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_description</span><span class=p>,</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>            <span class=n>parameters</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_parameters</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>        <span class=p>)</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>    <span class=nd>@override</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>    <span class=k>def</span><span class=w> </span><span class=nf>create_worker</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Worker</span><span class=p>:</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a><span class=sd>        Create a Worker from the information included in this McpToolSpec.</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a><span class=sd>        Returns</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a><span class=sd>        -------</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a><span class=sd>        Worker</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a><span class=sd>            A new `McpToolWorker` object that can be added to an Automa to execute the tool.</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=sd>        """</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a>        <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_tool_worker</span><span class=w> </span><span class=kn>import</span> <span class=n>McpToolWorker</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a>        <span class=k>return</span> <span class=n>McpToolWorker</span><span class=p>(</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>            <span class=n>tool_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=p>,</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>            <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>server_connection</span><span class=p>,</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>        <span class=p>)</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>    <span class=nd>@override</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>    <span class=k>def</span><span class=w> </span><span class=nf>dump_to_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a>        <span class=n>state_dict</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>dump_to_dict</span><span class=p>()</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>        <span class=n>state_dict</span><span class=p>[</span><span class=s2>"server_connection_name"</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a>        <span class=k>return</span> <span class=n>state_dict</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a>    <span class=nd>@override</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>    <span class=k>def</span><span class=w> </span><span class=nf>load_from_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>state_dict</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>load_from_dict</span><span class=p>(</span><span class=n>state_dict</span><span class=p>)</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a>        <span class=n>connection_name</span> <span class=o>=</span> <span class=n>state_dict</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"server_connection_name"</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a>        <span class=k>if</span> <span class=n>connection_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a>            <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>                <span class=sa>f</span><span class=s2>"Cannot load server connection for McpToolSpec </span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=si>}</span><span class=se>\"</span><span class=s2>, because "</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>                <span class=sa>f</span><span class=s2>"its connection name is not available."</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a>            <span class=p>)</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a>        <span class=c1># Try to reload the server connection from the global manager.</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_connection</span><span class=p>(</span><span class=n>connection_name</span><span class=p>)</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span> <span class=o>=</span> <span class=n>connection_name</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a>        <span class=c1># Load tool_info from the real connection.</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>        <span class=n>all_tools</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>server_connection</span><span class=o>.</span><span class=n>list_tools</span><span class=p>()</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>        <span class=n>reload_tool_spec</span> <span class=o>=</span> <span class=nb>next</span><span class=p>((</span><span class=n>tool</span> <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>all_tools</span> <span class=k>if</span> <span class=n>tool</span><span class=o>.</span><span class=n>tool_name</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=p>),</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>        <span class=k>if</span> <span class=n>reload_tool_spec</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a>                <span class=sa>f</span><span class=s2>"Cannot restore McpToolSpec because the tool is not found on server: "</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a>                <span class=sa>f</span><span class=s2>"server_connection_name=</span><span class=se>\"</span><span class=si>{</span><span class=n>connection_name</span><span class=si>}</span><span class=se>\"</span><span class=s2>, tool_name=</span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=si>}</span><span class=se>\"</span><span class=s2>."</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>            <span class=p>)</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>        <span class=bp>self</span><span class=o>.</span><span class=n>tool_info</span> <span class=o>=</span> <span class=n>reload_tool_spec</span><span class=o>.</span><span class=n>tool_info</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpToolSpec.tool_info class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">tool_info</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpToolSpec.tool_info class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>tool_info</span><span class=p>:</span> <span class=n><span title=mcp.types.Tool>Tool</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_tool_spec.McpToolSpec(tool_info)>tool_info</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The raw MCP tool definition from the server.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpToolSpec.server_connection class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">server_connection</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#bridgic.protocols.mcp.McpToolSpec.server_connection class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>server_connection</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>Get the server connection, loading it from the server connection manager if necessary.</p> <p>This property implements lazy loading of the server connection. If the connection is not available (e.g., after deserialization), it will be retrieved from the server connection manager by its name.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></code> </td> <td> <div class=doc-md-description> <p>The server connection instance.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnectionError</span> (<code>bridgic.protocols.mcp._error.McpServerConnectionError</code>)' href=#bridgic.protocols.mcp.McpServerConnectionError>McpServerConnectionError</a></code> </td> <td> <div class=doc-md-description> <p>If the connection cannot be found in the manager.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpToolSpec.from_raw class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">from_raw</span> <a href=#bridgic.protocols.mcp.McpToolSpec.from_raw class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>from_raw</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>tool_name</span><span class=p>:</span> <span class=n><span title=str>str</span></span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>server_connection</span><span class=p>:</span> <span class=n><span title=typing.Union>Union</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></span><span class=p>],</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpToolSpec</span> (<code>bridgic.protocols.mcp._mcp_tool_spec.McpToolSpec</code>)' href=#bridgic.protocols.mcp.McpToolSpec>McpToolSpec</a></span>
</span></code></pre></div> <p>Create a McpToolSpec from a specified server connection and tool name.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_spec.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span>
<span class=normal><a href=#__codelineno-0-71>71</a></span>
<span class=normal><a href=#__codelineno-0-72>72</a></span>
<span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a><span class=nd>@classmethod</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=k>def</span><span class=w> </span><span class=nf>from_raw</span><span class=p>(</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>    <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>    <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>    <span class=n>server_connection</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>],</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>"McpToolSpec"</span><span class=p>:</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a><span class=sd>    Create a McpToolSpec from a specified server connection and tool name.</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a><span class=sd>    """</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>    <span class=c1># Try to associate with the real connection object.</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>    <span class=n>connection</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>        <span class=n>connection</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_connection</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a>    <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>):</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>        <span class=n>connection</span> <span class=o>=</span> <span class=n>server_connection</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a>        <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Invalid type for server connection: </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>    <span class=c1># Use the connection to get the McpToolSpec object corresponding to tool_name</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a>    <span class=n>all_tools</span> <span class=o>=</span> <span class=n>connection</span><span class=o>.</span><span class=n>list_tools</span><span class=p>()</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a>    <span class=n>tool_spec</span> <span class=o>=</span> <span class=nb>next</span><span class=p>((</span><span class=n>tool</span> <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>all_tools</span> <span class=k>if</span> <span class=n>tool</span><span class=o>.</span><span class=n>tool_name</span> <span class=o>==</span> <span class=n>tool_name</span><span class=p>),</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>    <span class=k>if</span> <span class=n>tool_spec</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Cannot find tool '</span><span class=si>{</span><span class=n>tool_name</span><span class=si>}</span><span class=s2>' in the provided server connection."</span><span class=p>)</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a>    <span class=k>return</span> <span class=n>tool_spec</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpToolSpec.to_tool class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">to_tool</span> <a href=#bridgic.protocols.mcp.McpToolSpec.to_tool class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>to_tool</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Tool</span> (<code>bridgic.core.model.types.Tool</code>)' href=../../../../bridgic-core/bridgic/core/model/types/#bridgic.core.model.types.Tool>Tool</a></span>
</span></code></pre></div> <p>Transform this McpToolSpec to a <code>Tool</code> object used by LLM.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Tool</span> (<code>bridgic.core.model.types.Tool</code>)' href=../../../../bridgic-core/bridgic/core/model/types/#bridgic.core.model.types.Tool>Tool</a></code> </td> <td> <div class=doc-md-description> <p>A <code>Tool</code> object that can be used by LLM for tool selection.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_spec.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a><span class=nd>@override</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a><span class=k>def</span><span class=w> </span><span class=nf>to_tool</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tool</span><span class=p>:</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a><span class=sd>    Transform this McpToolSpec to a `Tool` object used by LLM.</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a><span class=sd>    Returns</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=sd>    -------</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a><span class=sd>    Tool</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a><span class=sd>        A `Tool` object that can be used by LLM for tool selection.</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a><span class=sd>    """</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>    <span class=k>return</span> <span class=n>Tool</span><span class=p>(</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>        <span class=n>name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=p>,</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>        <span class=n>description</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_description</span><span class=p>,</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>        <span class=n>parameters</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_parameters</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpToolSpec.create_worker class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">create_worker</span> <a href=#bridgic.protocols.mcp.McpToolSpec.create_worker class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>create_worker</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Worker</span> (<code>bridgic.core.automa.worker.Worker</code>)' href=../../../../bridgic-core/bridgic/core/automa/worker/#bridgic.core.automa.worker.Worker>Worker</a></span>
</span></code></pre></div> <p>Create a Worker from the information included in this McpToolSpec.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Worker</span> (<code>bridgic.core.automa.worker.Worker</code>)' href=../../../../bridgic-core/bridgic/core/automa/worker/#bridgic.core.automa.worker.Worker>Worker</a></code> </td> <td> <div class=doc-md-description> <p>A new <code>McpToolWorker</code> object that can be added to an Automa to execute the tool.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_spec.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a><span class=nd>@override</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a><span class=k>def</span><span class=w> </span><span class=nf>create_worker</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Worker</span><span class=p>:</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a><span class=sd>    Create a Worker from the information included in this McpToolSpec.</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a><span class=sd>    Returns</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a><span class=sd>    -------</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a><span class=sd>    Worker</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a><span class=sd>        A new `McpToolWorker` object that can be added to an Automa to execute the tool.</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=sd>    """</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a>    <span class=kn>from</span><span class=w> </span><span class=nn>bridgic.protocols.mcp._mcp_tool_worker</span><span class=w> </span><span class=kn>import</span> <span class=n>McpToolWorker</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a>    <span class=k>return</span> <span class=n>McpToolWorker</span><span class=p>(</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>        <span class=n>tool_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=p>,</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>        <span class=n>server_connection</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>server_connection</span><span class=p>,</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=bridgic.protocols.mcp.McpToolSetBuilder class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">McpToolSetBuilder</span> <a href=#bridgic.protocols.mcp.McpToolSetBuilder class=headerlink title="Permanent link">¶</a></h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ToolSetBuilder</span> (<code>bridgic.core.agentic.tool_specs._base_tool_spec.ToolSetBuilder</code>)' href=../../../../bridgic-core/bridgic/core/agentic/tool_specs/#bridgic.core.agentic.tool_specs.ToolSetBuilder>ToolSetBuilder</a></code></p> <p>A builder for creating exclusive <code>McpToolSpec</code> instances from a newly created MCP server connection.</p> <p>This builder creates a new MCP server connection from scratch, ensuring that the connection is exclusive and not shared with other instances. This is important for stateful connections that should not be shared to different owners.</p> <p><span class=doc-section-title>Examples:</span></p> <p>Create a builder for stdio connection and build a tool set:</p> <div class="language-pycon highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span>
<span class=normal><a href=#__codelineno-0-2>2</a></span>
<span class=normal><a href=#__codelineno-0-3>3</a></span>
<span class=normal><a href=#__codelineno-0-4>4</a></span>
<span class=normal><a href=#__codelineno-0-5>5</a></span>
<span class=normal><a href=#__codelineno-0-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>builder</span> <span class=o>=</span> <span class=n>McpToolSetBuilder</span><span class=o>.</span><span class=n>stdio</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=gp>... </span>    <span class=n>command</span><span class=o>=</span><span class=s2>"npx"</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=gp>... </span>    <span class=n>args</span><span class=o>=</span><span class=p>[</span><span class=s2>"-y"</span><span class=p>,</span> <span class=s2>"@modelcontextprotocol/server-filesystem"</span><span class=p>,</span> <span class=s2>"/path/to/dir"</span><span class=p>],</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=gp>... </span>    <span class=n>tool_names</span><span class=o>=</span><span class=p>[</span><span class=s2>"read_file"</span><span class=p>,</span> <span class=s2>"write_file"</span><span class=p>]</span>  <span class=c1># Optional: filter specific tools</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=gp>&gt;&gt;&gt; </span><span class=n>tool_set</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=n>build</span><span class=p>()[</span><span class=s2>"tool_specs"</span><span class=p>]</span>
</span></code></pre></div></td></tr></table></div> <p>Create a builder for streamable HTTP connection and build a tool set:</p> <div class="language-pycon highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span>
<span class=normal><a href=#__codelineno-0-2>2</a></span>
<span class=normal><a href=#__codelineno-0-3>3</a></span>
<span class=normal><a href=#__codelineno-0-4>4</a></span>
<span class=normal><a href=#__codelineno-0-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>builder</span> <span class=o>=</span> <span class=n>McpToolSetBuilder</span><span class=o>.</span><span class=n>streamable_http</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=gp>... </span>    <span class=n>url</span><span class=o>=</span><span class=s2>"http://localhost:8000"</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=gp>... </span>    <span class=n>tool_names</span><span class=o>=</span><span class=p>[</span><span class=s2>"get_weather"</span><span class=p>]</span>  <span class=c1># Optional: filter specific tools</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=gp>&gt;&gt;&gt; </span><span class=n>tool_set</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=n>build</span><span class=p>()[</span><span class=s2>"tool_specs"</span><span class=p>]</span>
</span></code></pre></div></td></tr></table></div> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_set_builder.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-18> 18</a></span>
<span class=normal><a href=#__codelineno-0-19> 19</a></span>
<span class=normal><a href=#__codelineno-0-20> 20</a></span>
<span class=normal><a href=#__codelineno-0-21> 21</a></span>
<span class=normal><a href=#__codelineno-0-22> 22</a></span>
<span class=normal><a href=#__codelineno-0-23> 23</a></span>
<span class=normal><a href=#__codelineno-0-24> 24</a></span>
<span class=normal><a href=#__codelineno-0-25> 25</a></span>
<span class=normal><a href=#__codelineno-0-26> 26</a></span>
<span class=normal><a href=#__codelineno-0-27> 27</a></span>
<span class=normal><a href=#__codelineno-0-28> 28</a></span>
<span class=normal><a href=#__codelineno-0-29> 29</a></span>
<span class=normal><a href=#__codelineno-0-30> 30</a></span>
<span class=normal><a href=#__codelineno-0-31> 31</a></span>
<span class=normal><a href=#__codelineno-0-32> 32</a></span>
<span class=normal><a href=#__codelineno-0-33> 33</a></span>
<span class=normal><a href=#__codelineno-0-34> 34</a></span>
<span class=normal><a href=#__codelineno-0-35> 35</a></span>
<span class=normal><a href=#__codelineno-0-36> 36</a></span>
<span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span>
<span class=normal><a href=#__codelineno-0-195>195</a></span>
<span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span>
<span class=normal><a href=#__codelineno-0-241>241</a></span>
<span class=normal><a href=#__codelineno-0-242>242</a></span>
<span class=normal><a href=#__codelineno-0-243>243</a></span>
<span class=normal><a href=#__codelineno-0-244>244</a></span>
<span class=normal><a href=#__codelineno-0-245>245</a></span>
<span class=normal><a href=#__codelineno-0-246>246</a></span>
<span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span>
<span class=normal><a href=#__codelineno-0-249>249</a></span>
<span class=normal><a href=#__codelineno-0-250>250</a></span>
<span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span>
<span class=normal><a href=#__codelineno-0-254>254</a></span>
<span class=normal><a href=#__codelineno-0-255>255</a></span>
<span class=normal><a href=#__codelineno-0-256>256</a></span>
<span class=normal><a href=#__codelineno-0-257>257</a></span>
<span class=normal><a href=#__codelineno-0-258>258</a></span>
<span class=normal><a href=#__codelineno-0-259>259</a></span>
<span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span>
<span class=normal><a href=#__codelineno-0-264>264</a></span>
<span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span>
<span class=normal><a href=#__codelineno-0-275>275</a></span>
<span class=normal><a href=#__codelineno-0-276>276</a></span>
<span class=normal><a href=#__codelineno-0-277>277</a></span>
<span class=normal><a href=#__codelineno-0-278>278</a></span>
<span class=normal><a href=#__codelineno-0-279>279</a></span>
<span class=normal><a href=#__codelineno-0-280>280</a></span>
<span class=normal><a href=#__codelineno-0-281>281</a></span>
<span class=normal><a href=#__codelineno-0-282>282</a></span>
<span class=normal><a href=#__codelineno-0-283>283</a></span>
<span class=normal><a href=#__codelineno-0-284>284</a></span>
<span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span>
<span class=normal><a href=#__codelineno-0-302>302</a></span>
<span class=normal><a href=#__codelineno-0-303>303</a></span>
<span class=normal><a href=#__codelineno-0-304>304</a></span>
<span class=normal><a href=#__codelineno-0-305>305</a></span>
<span class=normal><a href=#__codelineno-0-306>306</a></span>
<span class=normal><a href=#__codelineno-0-307>307</a></span>
<span class=normal><a href=#__codelineno-0-308>308</a></span>
<span class=normal><a href=#__codelineno-0-309>309</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=k>class</span><span class=w> </span><span class=nc>McpToolSetBuilder</span><span class=p>(</span><span class=n>ToolSetBuilder</span><span class=p>):</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20></a><span class=sd>    A builder for creating exclusive `McpToolSpec` instances from a newly created MCP server connection.</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21></a>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=sd>    This builder creates a new MCP server connection from scratch, ensuring that the connection is </span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=sd>    exclusive and not shared with other instances. This is important for stateful connections that </span>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24></a><span class=sd>    should not be shared to different owners.</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25></a>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=sd>    Examples</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=sd>    --------</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a><span class=sd>    Create a builder for stdio connection and build a tool set:</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a><span class=sd>    &gt;&gt;&gt; builder = McpToolSetBuilder.stdio(</span>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a><span class=sd>    ...     command="npx",</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a><span class=sd>    ...     args=["-y", "@modelcontextprotocol/server-filesystem", "/path/to/dir"],</span>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a><span class=sd>    ...     tool_names=["read_file", "write_file"]  # Optional: filter specific tools</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a><span class=sd>    ... )</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=sd>    &gt;&gt;&gt; tool_set = builder.build()["tool_specs"]</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a><span class=sd>    Create a builder for streamable HTTP connection and build a tool set:</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a><span class=sd>    &gt;&gt;&gt; builder = McpToolSetBuilder.streamable_http(</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a><span class=sd>    ...     url="http://localhost:8000",</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a><span class=sd>    ...     tool_names=["get_weather"]  # Optional: filter specific tools</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a><span class=sd>    ... )</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a><span class=sd>    &gt;&gt;&gt; tool_set = builder.build()["tool_specs"]</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=sd>    """</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a>    <span class=n>_connection_type</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=n>McpServerConnectionType</span><span class=o>.</span><span class=n>STDIO</span><span class=p>,</span> <span class=n>McpServerConnectionType</span><span class=o>.</span><span class=n>STREAMABLE_HTTP</span><span class=p>]</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a><span class=w>    </span><span class=sd>"""The type of connection: 'stdio' or 'streamable_http'."""</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a>    <span class=n>_connection_config</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=w>    </span><span class=sd>"""Configuration parameters for creating the connection."""</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>    <span class=n>_tool_names</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=w>    </span><span class=sd>"""Optional list of tool names to include. If None, all tools will be included."""</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a>        <span class=n>connection_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a>        <span class=n>connection_config</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a>        <span class=n>tool_names</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>    <span class=p>):</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a><span class=sd>        Initialize the McpToolSetBuilder.</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=sd>        Parameters</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a><span class=sd>        ----------</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a><span class=sd>        connection_type : str</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a><span class=sd>            The type of connection: 'stdio' or 'streamable_http'.</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a><span class=sd>        connection_config : Dict[str, Any]</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a><span class=sd>            Configuration parameters for creating the connection.</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a><span class=sd>            - For stdio connections, this should include 'command', and optionally 'args', 'env', 'encoding', 'request_timeout'.</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a><span class=sd>            - For streamable_http connections, this should include 'url', and optionally 'http_client_config', 'terminate_on_close', 'request_timeout'.</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a><span class=sd>        tool_names : Optional[List[str]]</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a><span class=sd>            Optional list of tool names to include.</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a><span class=sd>            If None, all available tools from the connection will be included.</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=sd>        """</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a>        <span class=k>if</span> <span class=n>connection_type</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>(</span><span class=n>McpServerConnectionType</span><span class=o>.</span><span class=n>STDIO</span><span class=p>,</span> <span class=n>McpServerConnectionType</span><span class=o>.</span><span class=n>STREAMABLE_HTTP</span><span class=p>):</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>                <span class=sa>f</span><span class=s2>"Invalid connection_type: </span><span class=si>{</span><span class=n>connection_type</span><span class=si>}</span><span class=s2>. "</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a>                <span class=sa>f</span><span class=s2>"Expected 'stdio' or 'streamable_http'."</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=p>)</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_type</span> <span class=o>=</span> <span class=n>connection_type</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_config</span> <span class=o>=</span> <span class=n>connection_config</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span> <span class=o>=</span> <span class=n>tool_names</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a>    <span class=k>def</span><span class=w> </span><span class=nf>stdio</span><span class=p>(</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>        <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>        <span class=n>command</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a>        <span class=n>args</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>        <span class=n>env</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>        <span class=n>encoding</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>        <span class=n>request_timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=n>tool_names</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>"McpToolSetBuilder"</span><span class=p>:</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=sd>        Create a builder for a stdio-based MCP server connection.</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a><span class=sd>        Parameters</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=sd>        ----------</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=sd>        command : str</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>            The command to use for the connection (e.g., "npx", "python").</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a><span class=sd>        args : Optional[List[str]]</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=sd>            The arguments to pass to the command.</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=sd>        env : Optional[Dict[str, str]]</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>            Environment variables to set for the process.</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a><span class=sd>        encoding : Optional[str]</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>            The encoding to use for the connection. Defaults to "utf-8".</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=sd>        request_timeout : Optional[int]</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>            The timeout in seconds for MCP requests. Default is 30 seconds.</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>        tool_names : Optional[List[str]]</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a><span class=sd>            Optional list of tool names to include. If None, all available tools will be included.</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=sd>        Returns</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=sd>        -------</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=sd>        McpToolSetBuilder</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a><span class=sd>            A builder instance configured for stdio connection.</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=sd>        """</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>        <span class=n>connection_config</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>            <span class=s2>"command"</span><span class=p>:</span> <span class=n>command</span><span class=p>,</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a>        <span class=p>}</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>        <span class=k>if</span> <span class=n>args</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>            <span class=n>connection_config</span><span class=p>[</span><span class=s2>"args"</span><span class=p>]</span> <span class=o>=</span> <span class=n>args</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>        <span class=k>if</span> <span class=n>env</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>            <span class=n>connection_config</span><span class=p>[</span><span class=s2>"env"</span><span class=p>]</span> <span class=o>=</span> <span class=n>env</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>        <span class=k>if</span> <span class=n>encoding</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>            <span class=n>connection_config</span><span class=p>[</span><span class=s2>"encoding"</span><span class=p>]</span> <span class=o>=</span> <span class=n>encoding</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>        <span class=k>if</span> <span class=n>request_timeout</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>            <span class=n>connection_config</span><span class=p>[</span><span class=s2>"request_timeout"</span><span class=p>]</span> <span class=o>=</span> <span class=n>request_timeout</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>            <span class=n>connection_type</span><span class=o>=</span><span class=s2>"stdio"</span><span class=p>,</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>            <span class=n>connection_config</span><span class=o>=</span><span class=n>connection_config</span><span class=p>,</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>            <span class=n>tool_names</span><span class=o>=</span><span class=n>tool_names</span><span class=p>,</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>        <span class=p>)</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>    <span class=k>def</span><span class=w> </span><span class=nf>streamable_http</span><span class=p>(</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>        <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>        <span class=n>url</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>        <span class=n>http_client_config</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>HttpClientConfig</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>        <span class=n>terminate_on_close</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>        <span class=n>request_timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>        <span class=n>tool_names</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>"McpToolSetBuilder"</span><span class=p>:</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a><span class=sd>        Create a builder for a streamable HTTP-based MCP server connection.</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>        Parameters</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=sd>        ----------</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a><span class=sd>        url : str</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a><span class=sd>            The URL of the MCP server.</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a><span class=sd>        http_client_config : Optional[HttpClientConfig]</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=sd>            Optional configuration for creating the HTTP client.</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a><span class=sd>            If None, a default client will be created with MCP defaults.</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a><span class=sd>        terminate_on_close : Optional[bool]</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a><span class=sd>            If True, send a DELETE request to terminate the session when the connection</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a><span class=sd>            is closed. Defaults to True.</span>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>        request_timeout : Optional[int]</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>            The timeout in seconds for MCP requests. Default is 30 seconds.</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a><span class=sd>        tool_names : Optional[List[str]]</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a><span class=sd>            Optional list of tool names to include. If None, all available tools will be included.</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a><span class=sd>        Returns</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=sd>        -------</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=sd>        McpToolSetBuilder</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a><span class=sd>            A builder instance configured for streamable HTTP connection.</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a><span class=sd>        """</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>        <span class=n>connection_config</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a>            <span class=s2>"url"</span><span class=p>:</span> <span class=n>url</span><span class=p>,</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>        <span class=p>}</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a>        <span class=k>if</span> <span class=n>http_client_config</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>            <span class=n>connection_config</span><span class=p>[</span><span class=s2>"http_client_config"</span><span class=p>]</span> <span class=o>=</span> <span class=n>http_client_config</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>        <span class=k>if</span> <span class=n>terminate_on_close</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>            <span class=n>connection_config</span><span class=p>[</span><span class=s2>"terminate_on_close"</span><span class=p>]</span> <span class=o>=</span> <span class=n>terminate_on_close</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a>        <span class=k>if</span> <span class=n>request_timeout</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>            <span class=n>connection_config</span><span class=p>[</span><span class=s2>"request_timeout"</span><span class=p>]</span> <span class=o>=</span> <span class=n>request_timeout</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>            <span class=n>connection_type</span><span class=o>=</span><span class=s2>"streamable_http"</span><span class=p>,</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a>            <span class=n>connection_config</span><span class=o>=</span><span class=n>connection_config</span><span class=p>,</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a>            <span class=n>tool_names</span><span class=o>=</span><span class=n>tool_names</span><span class=p>,</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>        <span class=p>)</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a>    <span class=nd>@override</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a>    <span class=k>def</span><span class=w> </span><span class=nf>build</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ToolSetResponse</span><span class=p>:</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a><span class=sd>        Build and return McpToolSpec instances from a newly created server connection.</span>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a><span class=sd>        This method creates a new connection on each call, ensuring that each call gets its own </span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a><span class=sd>        exclusive connection instance. The builder acts as a factory for creating connections.</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a><span class=sd>        Returns</span>
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194></a><span class=sd>        -------</span>
</span><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195></a><span class=sd>        ToolSetResponse</span>
</span><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196></a><span class=sd>            A response containing the list of McpToolSpec instances with `_from_builder=True`,</span>
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a><span class=sd>            along with optional extras.</span>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a><span class=sd>        Raises</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a><span class=sd>        ------</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a><span class=sd>        McpServerConnectionError</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a><span class=sd>            If the connection cannot be created or accessed.</span>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a><span class=sd>            If the connection fails to establish.</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a><span class=sd>        """</span>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a>        <span class=c1># Create a new connection for this build call.</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a>        <span class=n>connection</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_connection</span><span class=p>()</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a>        <span class=c1># Get all available tools from the connection.</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a>        <span class=n>all_tool_specs</span> <span class=o>=</span> <span class=n>connection</span><span class=o>.</span><span class=n>list_tools</span><span class=p>()</span>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a>        <span class=c1># Filter by tool_names if specified.</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a>            <span class=n>tool_specs</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a>                <span class=n>tool_spec</span> <span class=k>for</span> <span class=n>tool_spec</span> <span class=ow>in</span> <span class=n>all_tool_specs</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a>                <span class=k>if</span> <span class=n>tool_spec</span><span class=o>.</span><span class=n>tool_name</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a>            <span class=p>]</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a>            <span class=c1># Check if all requested tools were found.</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a>            <span class=n>found_tool_names</span> <span class=o>=</span> <span class=p>{</span><span class=n>tool_spec</span><span class=o>.</span><span class=n>tool_name</span> <span class=k>for</span> <span class=n>tool_spec</span> <span class=ow>in</span> <span class=n>tool_specs</span><span class=p>}</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a>            <span class=n>missing_tool_names</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span><span class=p>)</span> <span class=o>-</span> <span class=n>found_tool_names</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a>            <span class=k>if</span> <span class=n>missing_tool_names</span><span class=p>:</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a>                    <span class=sa>f</span><span class=s2>"The following tools were not found in the MCP server connection "</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a>                    <span class=sa>f</span><span class=s2>"'</span><span class=si>{</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>': </span><span class=si>{</span><span class=nb>sorted</span><span class=p>(</span><span class=n>missing_tool_names</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a>                <span class=p>)</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a>            <span class=n>tool_specs</span> <span class=o>=</span> <span class=n>all_tool_specs</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a>        <span class=c1># Mark all tool specs as from builder.</span>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a>        <span class=k>for</span> <span class=n>tool_spec</span> <span class=ow>in</span> <span class=n>tool_specs</span><span class=p>:</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a>            <span class=n>tool_spec</span><span class=o>.</span><span class=n>_from_builder</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a>        <span class=k>return</span> <span class=n>ToolSetResponse</span><span class=p>(</span>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a>            <span class=n>tool_specs</span><span class=o>=</span><span class=n>tool_specs</span><span class=p>,</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a>            <span class=n>extras</span><span class=o>=</span><span class=p>{</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a>                <span class=s2>"mcp_server_connection_name"</span><span class=p>:</span> <span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a>            <span class=p>}</span>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a>        <span class=p>)</span>
</span><span id=__span-0-241><a id=__codelineno-0-241 name=__codelineno-0-241></a>
</span><span id=__span-0-242><a id=__codelineno-0-242 name=__codelineno-0-242></a>    <span class=k>def</span><span class=w> </span><span class=nf>_create_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>McpServerConnection</span><span class=p>:</span>
</span><span id=__span-0-243><a id=__codelineno-0-243 name=__codelineno-0-243></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-244><a id=__codelineno-0-244 name=__codelineno-0-244></a><span class=sd>        Create and connect a new MCP server connection.</span>
</span><span id=__span-0-245><a id=__codelineno-0-245 name=__codelineno-0-245></a>
</span><span id=__span-0-246><a id=__codelineno-0-246 name=__codelineno-0-246></a><span class=sd>        Each call to this method creates a new connection with a unique name, allowing the </span>
</span><span id=__span-0-247><a id=__codelineno-0-247 name=__codelineno-0-247></a><span class=sd>        builder to act as a factory for creating multiple connection instances.</span>
</span><span id=__span-0-248><a id=__codelineno-0-248 name=__codelineno-0-248></a>
</span><span id=__span-0-249><a id=__codelineno-0-249 name=__codelineno-0-249></a><span class=sd>        Returns</span>
</span><span id=__span-0-250><a id=__codelineno-0-250 name=__codelineno-0-250></a><span class=sd>        -------</span>
</span><span id=__span-0-251><a id=__codelineno-0-251 name=__codelineno-0-251></a><span class=sd>        McpServerConnection</span>
</span><span id=__span-0-252><a id=__codelineno-0-252 name=__codelineno-0-252></a><span class=sd>            The created and connected connection instance.</span>
</span><span id=__span-0-253><a id=__codelineno-0-253 name=__codelineno-0-253></a><span class=sd>        """</span>
</span><span id=__span-0-254><a id=__codelineno-0-254 name=__codelineno-0-254></a>        <span class=c1># Generate a unique connection name for each connection instance</span>
</span><span id=__span-0-255><a id=__codelineno-0-255 name=__codelineno-0-255></a>        <span class=n>connection_name</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>"mcp-builder-</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>[:</span><span class=mi>8</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-256><a id=__codelineno-0-256 name=__codelineno-0-256></a>
</span><span id=__span-0-257><a id=__codelineno-0-257 name=__codelineno-0-257></a>        <span class=c1># Create connection based on type</span>
</span><span id=__span-0-258><a id=__codelineno-0-258 name=__codelineno-0-258></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_type</span> <span class=o>==</span> <span class=n>McpServerConnectionType</span><span class=o>.</span><span class=n>STDIO</span><span class=p>:</span>
</span><span id=__span-0-259><a id=__codelineno-0-259 name=__codelineno-0-259></a>            <span class=n>connection</span> <span class=o>=</span> <span class=n>McpServerConnectionStdio</span><span class=p>(</span>
</span><span id=__span-0-260><a id=__codelineno-0-260 name=__codelineno-0-260></a>                <span class=n>name</span><span class=o>=</span><span class=n>connection_name</span><span class=p>,</span>
</span><span id=__span-0-261><a id=__codelineno-0-261 name=__codelineno-0-261></a>                <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_connection_config</span><span class=p>,</span>
</span><span id=__span-0-262><a id=__codelineno-0-262 name=__codelineno-0-262></a>            <span class=p>)</span>
</span><span id=__span-0-263><a id=__codelineno-0-263 name=__codelineno-0-263></a>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_type</span> <span class=o>==</span> <span class=n>McpServerConnectionType</span><span class=o>.</span><span class=n>STREAMABLE_HTTP</span><span class=p>:</span>
</span><span id=__span-0-264><a id=__codelineno-0-264 name=__codelineno-0-264></a>            <span class=c1># Copy connection config to avoid modifying the original config.</span>
</span><span id=__span-0-265><a id=__codelineno-0-265 name=__codelineno-0-265></a>            <span class=n>connection_config</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_config</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span><span id=__span-0-266><a id=__codelineno-0-266 name=__codelineno-0-266></a>
</span><span id=__span-0-267><a id=__codelineno-0-267 name=__codelineno-0-267></a>            <span class=c1># Pop http_client_config because the real initialization of the connection doesn't need it.</span>
</span><span id=__span-0-268><a id=__codelineno-0-268 name=__codelineno-0-268></a>            <span class=n>http_client_config</span><span class=p>:</span> <span class=n>HttpClientConfig</span> <span class=o>=</span> <span class=n>connection_config</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>"http_client_config"</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-269><a id=__codelineno-0-269 name=__codelineno-0-269></a>
</span><span id=__span-0-270><a id=__codelineno-0-270 name=__codelineno-0-270></a>            <span class=k>if</span> <span class=ow>not</span> <span class=n>http_client_config</span><span class=p>:</span>
</span><span id=__span-0-271><a id=__codelineno-0-271 name=__codelineno-0-271></a>                <span class=n>http_client</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-272><a id=__codelineno-0-272 name=__codelineno-0-272></a>            <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-273><a id=__codelineno-0-273 name=__codelineno-0-273></a>                <span class=k>if</span> <span class=s2>"timeout"</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>http_client_config</span> <span class=ow>or</span> <span class=n>http_client_config</span><span class=p>[</span><span class=s2>"timeout"</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-274><a id=__codelineno-0-274 name=__codelineno-0-274></a>                    <span class=n>http_client_config</span><span class=p>[</span><span class=s2>"timeout"</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-0-275><a id=__codelineno-0-275 name=__codelineno-0-275></a>                        <span class=s2>"default"</span><span class=p>:</span> <span class=n>MCP_DEFAULT_TIMEOUT</span><span class=p>,</span>
</span><span id=__span-0-276><a id=__codelineno-0-276 name=__codelineno-0-276></a>                        <span class=s2>"read"</span><span class=p>:</span> <span class=n>MCP_DEFAULT_SSE_READ_TIMEOUT</span><span class=p>,</span>
</span><span id=__span-0-277><a id=__codelineno-0-277 name=__codelineno-0-277></a>                    <span class=p>}</span>
</span><span id=__span-0-278><a id=__codelineno-0-278 name=__codelineno-0-278></a>                <span class=n>http_client</span> <span class=o>=</span> <span class=n>create_http_client_from_config</span><span class=p>(</span><span class=n>http_client_config</span><span class=o>.</span><span class=n>copy</span><span class=p>(),</span> <span class=n>is_async</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-0-279><a id=__codelineno-0-279 name=__codelineno-0-279></a>
</span><span id=__span-0-280><a id=__codelineno-0-280 name=__codelineno-0-280></a>            <span class=n>connection</span> <span class=o>=</span> <span class=n>McpServerConnectionStreamableHttp</span><span class=p>(</span>
</span><span id=__span-0-281><a id=__codelineno-0-281 name=__codelineno-0-281></a>                <span class=n>name</span><span class=o>=</span><span class=n>connection_name</span><span class=p>,</span>
</span><span id=__span-0-282><a id=__codelineno-0-282 name=__codelineno-0-282></a>                <span class=n>http_client</span><span class=o>=</span><span class=n>http_client</span><span class=p>,</span>
</span><span id=__span-0-283><a id=__codelineno-0-283 name=__codelineno-0-283></a>                <span class=o>**</span><span class=n>connection_config</span><span class=p>,</span>
</span><span id=__span-0-284><a id=__codelineno-0-284 name=__codelineno-0-284></a>            <span class=p>)</span>
</span><span id=__span-0-285><a id=__codelineno-0-285 name=__codelineno-0-285></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-286><a id=__codelineno-0-286 name=__codelineno-0-286></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Unknown connection type: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_connection_type</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-0-287><a id=__codelineno-0-287 name=__codelineno-0-287></a>
</span><span id=__span-0-288><a id=__codelineno-0-288 name=__codelineno-0-288></a>        <span class=c1># Register and connect</span>
</span><span id=__span-0-289><a id=__codelineno-0-289 name=__codelineno-0-289></a>        <span class=n>manager</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_instance</span><span class=p>()</span>
</span><span id=__span-0-290><a id=__codelineno-0-290 name=__codelineno-0-290></a>        <span class=n>manager</span><span class=o>.</span><span class=n>register_connection</span><span class=p>(</span><span class=n>connection</span><span class=p>)</span>
</span><span id=__span-0-291><a id=__codelineno-0-291 name=__codelineno-0-291></a>        <span class=n>connection</span><span class=o>.</span><span class=n>connect</span><span class=p>()</span>
</span><span id=__span-0-292><a id=__codelineno-0-292 name=__codelineno-0-292></a>
</span><span id=__span-0-293><a id=__codelineno-0-293 name=__codelineno-0-293></a>        <span class=k>return</span> <span class=n>connection</span>
</span><span id=__span-0-294><a id=__codelineno-0-294 name=__codelineno-0-294></a>
</span><span id=__span-0-295><a id=__codelineno-0-295 name=__codelineno-0-295></a>    <span class=nd>@override</span>
</span><span id=__span-0-296><a id=__codelineno-0-296 name=__codelineno-0-296></a>    <span class=k>def</span><span class=w> </span><span class=nf>dump_to_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span><span id=__span-0-297><a id=__codelineno-0-297 name=__codelineno-0-297></a>        <span class=n>state_dict</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-0-298><a id=__codelineno-0-298 name=__codelineno-0-298></a>            <span class=s2>"connection_type"</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_type</span><span class=p>,</span>
</span><span id=__span-0-299><a id=__codelineno-0-299 name=__codelineno-0-299></a>            <span class=s2>"connection_config"</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection_config</span><span class=p>,</span>
</span><span id=__span-0-300><a id=__codelineno-0-300 name=__codelineno-0-300></a>        <span class=p>}</span>
</span><span id=__span-0-301><a id=__codelineno-0-301 name=__codelineno-0-301></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-302><a id=__codelineno-0-302 name=__codelineno-0-302></a>            <span class=n>state_dict</span><span class=p>[</span><span class=s2>"tool_names"</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span>
</span><span id=__span-0-303><a id=__codelineno-0-303 name=__codelineno-0-303></a>        <span class=k>return</span> <span class=n>state_dict</span>
</span><span id=__span-0-304><a id=__codelineno-0-304 name=__codelineno-0-304></a>
</span><span id=__span-0-305><a id=__codelineno-0-305 name=__codelineno-0-305></a>    <span class=nd>@override</span>
</span><span id=__span-0-306><a id=__codelineno-0-306 name=__codelineno-0-306></a>    <span class=k>def</span><span class=w> </span><span class=nf>load_from_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>state_dict</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-307><a id=__codelineno-0-307 name=__codelineno-0-307></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_type</span> <span class=o>=</span> <span class=n>state_dict</span><span class=p>[</span><span class=s2>"connection_type"</span><span class=p>]</span>
</span><span id=__span-0-308><a id=__codelineno-0-308 name=__codelineno-0-308></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_connection_config</span> <span class=o>=</span> <span class=n>state_dict</span><span class=p>[</span><span class=s2>"connection_config"</span><span class=p>]</span>
</span><span id=__span-0-309><a id=__codelineno-0-309 name=__codelineno-0-309></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span> <span class=o>=</span> <span class=n>state_dict</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"tool_names"</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpToolSetBuilder.stdio class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">stdio</span> <a href=#bridgic.protocols.mcp.McpToolSetBuilder.stdio class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>stdio</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>command</span><span class=p>:</span> <span class=n><span title=str>str</span></span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>args</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=typing.List>List</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>env</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=typing.Dict>Dict</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>,</span> <span class=n><span title=str>str</span></span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=n>encoding</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=n>request_timeout</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=int>int</span></span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    <span class=n>tool_names</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=typing.List>List</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpToolSetBuilder</span> (<code>bridgic.protocols.mcp._mcp_tool_set_builder.McpToolSetBuilder</code>)' href=#bridgic.protocols.mcp.McpToolSetBuilder>McpToolSetBuilder</a></span>
</span></code></pre></div> <p>Create a builder for a stdio-based MCP server connection.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>command</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The command to use for the connection (e.g., "npx", "python").</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>args</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.List>List</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>The arguments to pass to the command.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>env</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>Environment variables to set for the process.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>encoding</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>The encoding to use for the connection. Defaults to "utf-8".</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>request_timeout</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=int>int</span>]</code> </td> <td> <div class=doc-md-description> <p>The timeout in seconds for MCP requests. Default is 30 seconds.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>tool_names</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.List>List</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>Optional list of tool names to include. If None, all available tools will be included.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpToolSetBuilder</span> (<code>bridgic.protocols.mcp._mcp_tool_set_builder.McpToolSetBuilder</code>)' href=#bridgic.protocols.mcp.McpToolSetBuilder>McpToolSetBuilder</a></code> </td> <td> <div class=doc-md-description> <p>A builder instance configured for stdio connection.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_set_builder.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a><span class=nd>@classmethod</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=k>def</span><span class=w> </span><span class=nf>stdio</span><span class=p>(</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>    <span class=n>command</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a>    <span class=n>args</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>    <span class=n>env</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>    <span class=n>encoding</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>    <span class=n>request_timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>    <span class=n>tool_names</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>"McpToolSetBuilder"</span><span class=p>:</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=sd>    Create a builder for a stdio-based MCP server connection.</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a><span class=sd>    Parameters</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=sd>    ----------</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=sd>    command : str</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>        The command to use for the connection (e.g., "npx", "python").</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a><span class=sd>    args : Optional[List[str]]</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=sd>        The arguments to pass to the command.</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=sd>    env : Optional[Dict[str, str]]</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>        Environment variables to set for the process.</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a><span class=sd>    encoding : Optional[str]</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>        The encoding to use for the connection. Defaults to "utf-8".</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=sd>    request_timeout : Optional[int]</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>        The timeout in seconds for MCP requests. Default is 30 seconds.</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>    tool_names : Optional[List[str]]</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a><span class=sd>        Optional list of tool names to include. If None, all available tools will be included.</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=sd>    Returns</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=sd>    -------</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=sd>    McpToolSetBuilder</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a><span class=sd>        A builder instance configured for stdio connection.</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=sd>    """</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>    <span class=n>connection_config</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>        <span class=s2>"command"</span><span class=p>:</span> <span class=n>command</span><span class=p>,</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a>    <span class=p>}</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>    <span class=k>if</span> <span class=n>args</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>        <span class=n>connection_config</span><span class=p>[</span><span class=s2>"args"</span><span class=p>]</span> <span class=o>=</span> <span class=n>args</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>    <span class=k>if</span> <span class=n>env</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>        <span class=n>connection_config</span><span class=p>[</span><span class=s2>"env"</span><span class=p>]</span> <span class=o>=</span> <span class=n>env</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>    <span class=k>if</span> <span class=n>encoding</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>        <span class=n>connection_config</span><span class=p>[</span><span class=s2>"encoding"</span><span class=p>]</span> <span class=o>=</span> <span class=n>encoding</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>    <span class=k>if</span> <span class=n>request_timeout</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>        <span class=n>connection_config</span><span class=p>[</span><span class=s2>"request_timeout"</span><span class=p>]</span> <span class=o>=</span> <span class=n>request_timeout</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>        <span class=n>connection_type</span><span class=o>=</span><span class=s2>"stdio"</span><span class=p>,</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>        <span class=n>connection_config</span><span class=o>=</span><span class=n>connection_config</span><span class=p>,</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>        <span class=n>tool_names</span><span class=o>=</span><span class=n>tool_names</span><span class=p>,</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpToolSetBuilder.streamable_http class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">streamable_http</span> <a href=#bridgic.protocols.mcp.McpToolSetBuilder.streamable_http class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>streamable_http</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>url</span><span class=p>:</span> <span class=n><span title=str>str</span></span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>http_client_config</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">HttpClientConfig</span> (<code>bridgic.core.config.HttpClientConfig</code>)' href=../../../../bridgic-core/bridgic/core/config/#bridgic.core.config.HttpClientConfig>HttpClientConfig</a></span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>terminate_on_close</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=bool>bool</span></span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=n>request_timeout</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=int>int</span></span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=n>tool_names</span><span class=p>:</span> <span class=n><span title=typing.Optional>Optional</span></span><span class=p>[</span><span class=n><span title=typing.List>List</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpToolSetBuilder</span> (<code>bridgic.protocols.mcp._mcp_tool_set_builder.McpToolSetBuilder</code>)' href=#bridgic.protocols.mcp.McpToolSetBuilder>McpToolSetBuilder</a></span>
</span></code></pre></div> <p>Create a builder for a streamable HTTP-based MCP server connection.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>url</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The URL of the MCP server.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>http_client_config</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">HttpClientConfig</span> (<code>bridgic.core.config.HttpClientConfig</code>)' href=../../../../bridgic-core/bridgic/core/config/#bridgic.core.config.HttpClientConfig>HttpClientConfig</a>]</code> </td> <td> <div class=doc-md-description> <p>Optional configuration for creating the HTTP client. If None, a default client will be created with MCP defaults.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>terminate_on_close</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>If True, send a DELETE request to terminate the session when the connection is closed. Defaults to True.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>request_timeout</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=int>int</span>]</code> </td> <td> <div class=doc-md-description> <p>The timeout in seconds for MCP requests. Default is 30 seconds.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>tool_names</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.List>List</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>Optional list of tool names to include. If None, all available tools will be included.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpToolSetBuilder</span> (<code>bridgic.protocols.mcp._mcp_tool_set_builder.McpToolSetBuilder</code>)' href=#bridgic.protocols.mcp.McpToolSetBuilder>McpToolSetBuilder</a></code> </td> <td> <div class=doc-md-description> <p>A builder instance configured for streamable HTTP connection.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_set_builder.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a><span class=nd>@classmethod</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a><span class=k>def</span><span class=w> </span><span class=nf>streamable_http</span><span class=p>(</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>    <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>    <span class=n>url</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>    <span class=n>http_client_config</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>HttpClientConfig</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>    <span class=n>terminate_on_close</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>    <span class=n>request_timeout</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>    <span class=n>tool_names</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>"McpToolSetBuilder"</span><span class=p>:</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a><span class=sd>    Create a builder for a streamable HTTP-based MCP server connection.</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>    Parameters</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=sd>    ----------</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a><span class=sd>    url : str</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a><span class=sd>        The URL of the MCP server.</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a><span class=sd>    http_client_config : Optional[HttpClientConfig]</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=sd>        Optional configuration for creating the HTTP client.</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a><span class=sd>        If None, a default client will be created with MCP defaults.</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a><span class=sd>    terminate_on_close : Optional[bool]</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a><span class=sd>        If True, send a DELETE request to terminate the session when the connection</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a><span class=sd>        is closed. Defaults to True.</span>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>    request_timeout : Optional[int]</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>        The timeout in seconds for MCP requests. Default is 30 seconds.</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a><span class=sd>    tool_names : Optional[List[str]]</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a><span class=sd>        Optional list of tool names to include. If None, all available tools will be included.</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a><span class=sd>    Returns</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=sd>    -------</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=sd>    McpToolSetBuilder</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a><span class=sd>        A builder instance configured for streamable HTTP connection.</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a><span class=sd>    """</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>    <span class=n>connection_config</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a>        <span class=s2>"url"</span><span class=p>:</span> <span class=n>url</span><span class=p>,</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>    <span class=p>}</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a>    <span class=k>if</span> <span class=n>http_client_config</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>        <span class=n>connection_config</span><span class=p>[</span><span class=s2>"http_client_config"</span><span class=p>]</span> <span class=o>=</span> <span class=n>http_client_config</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>    <span class=k>if</span> <span class=n>terminate_on_close</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>        <span class=n>connection_config</span><span class=p>[</span><span class=s2>"terminate_on_close"</span><span class=p>]</span> <span class=o>=</span> <span class=n>terminate_on_close</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a>    <span class=k>if</span> <span class=n>request_timeout</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>        <span class=n>connection_config</span><span class=p>[</span><span class=s2>"request_timeout"</span><span class=p>]</span> <span class=o>=</span> <span class=n>request_timeout</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>        <span class=n>connection_type</span><span class=o>=</span><span class=s2>"streamable_http"</span><span class=p>,</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a>        <span class=n>connection_config</span><span class=o>=</span><span class=n>connection_config</span><span class=p>,</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a>        <span class=n>tool_names</span><span class=o>=</span><span class=n>tool_names</span><span class=p>,</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpToolSetBuilder.build class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">build</span> <a href=#bridgic.protocols.mcp.McpToolSetBuilder.build class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>build</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ToolSetResponse</span> (<code>bridgic.core.agentic.tool_specs._base_tool_spec.ToolSetResponse</code>)' href=../../../../bridgic-core/bridgic/core/agentic/tool_specs/#bridgic.core.agentic.tool_specs.ToolSetResponse>ToolSetResponse</a></span>
</span></code></pre></div> <p>Build and return McpToolSpec instances from a newly created server connection.</p> <p>This method creates a new connection on each call, ensuring that each call gets its own exclusive connection instance. The builder acts as a factory for creating connections.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ToolSetResponse</span> (<code>bridgic.core.agentic.tool_specs._base_tool_spec.ToolSetResponse</code>)' href=../../../../bridgic-core/bridgic/core/agentic/tool_specs/#bridgic.core.agentic.tool_specs.ToolSetResponse>ToolSetResponse</a></code> </td> <td> <div class=doc-md-description> <p>A response containing the list of McpToolSpec instances with <code>_from_builder=True</code>, along with optional extras.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnectionError</span> (<code>bridgic.protocols.mcp._error.McpServerConnectionError</code>)' href=#bridgic.protocols.mcp.McpServerConnectionError>McpServerConnectionError</a></code> </td> <td> <div class=doc-md-description> <p>If the connection cannot be created or accessed.</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection fails to establish.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_set_builder.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span>
<span class=normal><a href=#__codelineno-0-195>195</a></span>
<span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a><span class=nd>@override</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a><span class=k>def</span><span class=w> </span><span class=nf>build</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ToolSetResponse</span><span class=p>:</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a><span class=sd>    Build and return McpToolSpec instances from a newly created server connection.</span>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a><span class=sd>    This method creates a new connection on each call, ensuring that each call gets its own </span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a><span class=sd>    exclusive connection instance. The builder acts as a factory for creating connections.</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a><span class=sd>    Returns</span>
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194></a><span class=sd>    -------</span>
</span><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195></a><span class=sd>    ToolSetResponse</span>
</span><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196></a><span class=sd>        A response containing the list of McpToolSpec instances with `_from_builder=True`,</span>
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a><span class=sd>        along with optional extras.</span>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a><span class=sd>    Raises</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a><span class=sd>    ------</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a><span class=sd>    McpServerConnectionError</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a><span class=sd>        If the connection cannot be created or accessed.</span>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a><span class=sd>        If the connection fails to establish.</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a><span class=sd>    """</span>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a>    <span class=c1># Create a new connection for this build call.</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a>    <span class=n>connection</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_connection</span><span class=p>()</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a>    <span class=c1># Get all available tools from the connection.</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a>    <span class=n>all_tool_specs</span> <span class=o>=</span> <span class=n>connection</span><span class=o>.</span><span class=n>list_tools</span><span class=p>()</span>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a>    <span class=c1># Filter by tool_names if specified.</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a>        <span class=n>tool_specs</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a>            <span class=n>tool_spec</span> <span class=k>for</span> <span class=n>tool_spec</span> <span class=ow>in</span> <span class=n>all_tool_specs</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a>            <span class=k>if</span> <span class=n>tool_spec</span><span class=o>.</span><span class=n>tool_name</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a>        <span class=p>]</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a>        <span class=c1># Check if all requested tools were found.</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a>        <span class=n>found_tool_names</span> <span class=o>=</span> <span class=p>{</span><span class=n>tool_spec</span><span class=o>.</span><span class=n>tool_name</span> <span class=k>for</span> <span class=n>tool_spec</span> <span class=ow>in</span> <span class=n>tool_specs</span><span class=p>}</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a>        <span class=n>missing_tool_names</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_names</span><span class=p>)</span> <span class=o>-</span> <span class=n>found_tool_names</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a>        <span class=k>if</span> <span class=n>missing_tool_names</span><span class=p>:</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a>                <span class=sa>f</span><span class=s2>"The following tools were not found in the MCP server connection "</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a>                <span class=sa>f</span><span class=s2>"'</span><span class=si>{</span><span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>': </span><span class=si>{</span><span class=nb>sorted</span><span class=p>(</span><span class=n>missing_tool_names</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a>            <span class=p>)</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a>        <span class=n>tool_specs</span> <span class=o>=</span> <span class=n>all_tool_specs</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a>    <span class=c1># Mark all tool specs as from builder.</span>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a>    <span class=k>for</span> <span class=n>tool_spec</span> <span class=ow>in</span> <span class=n>tool_specs</span><span class=p>:</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a>        <span class=n>tool_spec</span><span class=o>.</span><span class=n>_from_builder</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a>    <span class=k>return</span> <span class=n>ToolSetResponse</span><span class=p>(</span>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a>        <span class=n>tool_specs</span><span class=o>=</span><span class=n>tool_specs</span><span class=p>,</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a>        <span class=n>extras</span><span class=o>=</span><span class=p>{</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a>            <span class=s2>"mcp_server_connection_name"</span><span class=p>:</span> <span class=n>connection</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a>        <span class=p>}</span>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=bridgic.protocols.mcp.McpToolWorker class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">McpToolWorker</span> <a href=#bridgic.protocols.mcp.McpToolWorker class=headerlink title="Permanent link">¶</a></h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Worker</span> (<code>bridgic.core.automa.worker.Worker</code>)' href=../../../../bridgic-core/bridgic/core/automa/worker/#bridgic.core.automa.worker.Worker>Worker</a></code></p> <p>A worker that executes an MCP tool on a connected MCP server.</p> <p>This worker receives tool arguments as keyword arguments and calls the corresponding tool on the MCP server, returning the result.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_worker.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-11> 11</a></span>
<span class=normal><a href=#__codelineno-0-12> 12</a></span>
<span class=normal><a href=#__codelineno-0-13> 13</a></span>
<span class=normal><a href=#__codelineno-0-14> 14</a></span>
<span class=normal><a href=#__codelineno-0-15> 15</a></span>
<span class=normal><a href=#__codelineno-0-16> 16</a></span>
<span class=normal><a href=#__codelineno-0-17> 17</a></span>
<span class=normal><a href=#__codelineno-0-18> 18</a></span>
<span class=normal><a href=#__codelineno-0-19> 19</a></span>
<span class=normal><a href=#__codelineno-0-20> 20</a></span>
<span class=normal><a href=#__codelineno-0-21> 21</a></span>
<span class=normal><a href=#__codelineno-0-22> 22</a></span>
<span class=normal><a href=#__codelineno-0-23> 23</a></span>
<span class=normal><a href=#__codelineno-0-24> 24</a></span>
<span class=normal><a href=#__codelineno-0-25> 25</a></span>
<span class=normal><a href=#__codelineno-0-26> 26</a></span>
<span class=normal><a href=#__codelineno-0-27> 27</a></span>
<span class=normal><a href=#__codelineno-0-28> 28</a></span>
<span class=normal><a href=#__codelineno-0-29> 29</a></span>
<span class=normal><a href=#__codelineno-0-30> 30</a></span>
<span class=normal><a href=#__codelineno-0-31> 31</a></span>
<span class=normal><a href=#__codelineno-0-32> 32</a></span>
<span class=normal><a href=#__codelineno-0-33> 33</a></span>
<span class=normal><a href=#__codelineno-0-34> 34</a></span>
<span class=normal><a href=#__codelineno-0-35> 35</a></span>
<span class=normal><a href=#__codelineno-0-36> 36</a></span>
<span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=k>class</span><span class=w> </span><span class=nc>McpToolWorker</span><span class=p>(</span><span class=n>Worker</span><span class=p>):</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=sd>    A worker that executes an MCP tool on a connected MCP server.</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14></a>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15></a><span class=sd>    This worker receives tool arguments as keyword arguments and calls the</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16></a><span class=sd>    corresponding tool on the MCP server, returning the result.</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=sd>    """</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18></a>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19></a>    <span class=n>_tool_name</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20></a><span class=w>    </span><span class=sd>"""The name of the MCP tool to call."""</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21></a>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22></a>    <span class=n>_server_connection</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>McpServerConnection</span><span class=p>]</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=w>    </span><span class=sd>"""The connection to the MCP server that provides this tool."""</span>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24></a>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25></a>    <span class=n>_server_connection_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=w>    </span><span class=sd>"""The name of the server connection, used for lookup after deserialization."""</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a>        <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a>        <span class=n>server_connection</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>],</span>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a>    <span class=p>):</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span> <span class=o>=</span> <span class=n>tool_name</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a>        <span class=c1># Try to associate with the real connection object.</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_connection</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span> <span class=o>=</span> <span class=n>server_connection</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a>        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>):</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>server_connection</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span> <span class=o>=</span> <span class=n>server_connection</span><span class=o>.</span><span class=n>name</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a>            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Invalid type for server connection: </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a>    <span class=nd>@property</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a>    <span class=k>def</span><span class=w> </span><span class=nf>tool_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=w>        </span><span class=sd>"""Get the name of the tool."""</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a>    <span class=nd>@property</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>    <span class=k>def</span><span class=w> </span><span class=nf>server_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>McpServerConnection</span><span class=p>:</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a><span class=sd>        Get the server connection, loading it from the server connection manager if necessary.</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a><span class=sd>        This property implements lazy loading of the server connection. If the connection </span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a><span class=sd>        is not available (e.g., after deserialization), it will be retrieved from the </span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a><span class=sd>        server connection manager by its name.</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a><span class=sd>        Returns</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a><span class=sd>        -------</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=sd>        McpServerConnection</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a><span class=sd>            The server connection instance.</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a><span class=sd>        Raises</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a><span class=sd>        ------</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a><span class=sd>        McpServerConnectionError</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a><span class=sd>            If the connection cannot be found in the manager.</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a><span class=sd>        """</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>                <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a>                    <span class=sa>f</span><span class=s2>"Cannot load server connection for McpToolWorker '</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=si>}</span><span class=s2>': "</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a>                    <span class=sa>f</span><span class=s2>"connection name is not available."</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>                <span class=p>)</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a>                <span class=n>connection</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_connection</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span><span class=p>)</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>            <span class=k>except</span> <span class=ne>KeyError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>                <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a>                    <span class=sa>f</span><span class=s2>"Failed to load the server connection for McpToolWorker </span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=si>}</span><span class=se>\"</span><span class=s2>, because the "</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>                    <span class=sa>f</span><span class=s2>"connection named </span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span><span class=si>}</span><span class=se>\"</span><span class=s2> was not found in any connection manager. "</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a>                    <span class=sa>f</span><span class=s2>"You must create a McpServerConnection with name </span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span><span class=si>}</span><span class=se>\"</span><span class=s2> and "</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a>                    <span class=sa>f</span><span class=s2>"ensure it is properly registered in a connection manager before using this worker."</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a>                <span class=p>)</span> <span class=kn>from</span><span class=w> </span><span class=nn>e</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>connection</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>arun</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>CallToolResult</span><span class=p>:</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a><span class=sd>        Asynchronously execute the MCP tool with the provided arguments.</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=sd>        Parameters</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=sd>        ----------</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=sd>        **kwargs : Dict[str, Any]</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a><span class=sd>            The arguments to pass to the tool. These are typically provided</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=sd>            from the tool call arguments generated by the LLM.</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>        Returns</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a><span class=sd>        -------</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=sd>        CallToolResult</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=sd>            The result of the tool call from the MCP server, containing content</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>            and optionally structured content.</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>        Raises</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=sd>        ------</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>        RuntimeError</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>            If the connection is not established and cannot be established.</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a><span class=sd>        """</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>            <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>server_connection</span><span class=o>.</span><span class=n>acall_tool</span><span class=p>(</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>                <span class=n>tool_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=p>,</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a>                <span class=n>arguments</span><span class=o>=</span><span class=n>kwargs</span> <span class=k>if</span> <span class=n>kwargs</span> <span class=k>else</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>            <span class=p>)</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>            <span class=n>result</span> <span class=o>=</span> <span class=n>CallToolResult</span><span class=p>(</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>                <span class=n>content</span><span class=o>=</span><span class=p>[</span><span class=n>TextContent</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=sa>f</span><span class=s2>"[MCP Tool Error] </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)],</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a>                <span class=n>structuredContent</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>                <span class=n>isError</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>            <span class=p>)</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>        <span class=k>return</span> <span class=n>result</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>    <span class=nd>@override</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>    <span class=k>def</span><span class=w> </span><span class=nf>dump_to_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>        <span class=n>state_dict</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>dump_to_dict</span><span class=p>()</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>        <span class=n>state_dict</span><span class=p>[</span><span class=s2>"tool_name"</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>        <span class=n>state_dict</span><span class=p>[</span><span class=s2>"server_connection_name"</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>        <span class=k>return</span> <span class=n>state_dict</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>    <span class=nd>@override</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>    <span class=k>def</span><span class=w> </span><span class=nf>load_from_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>state_dict</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>load_from_dict</span><span class=p>(</span><span class=n>state_dict</span><span class=p>)</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span> <span class=o>=</span> <span class=n>state_dict</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"tool_name"</span><span class=p>)</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>        <span class=n>connection_name</span> <span class=o>=</span> <span class=n>state_dict</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"server_connection_name"</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>        <span class=k>if</span> <span class=n>connection_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>            <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>                <span class=sa>f</span><span class=s2>"Cannot load server connection for McpToolWorker </span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=si>}</span><span class=se>\"</span><span class=s2>, because "</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>                <span class=sa>f</span><span class=s2>"its connection name is not available."</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>            <span class=p>)</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>        <span class=c1># Try to reload the server connection from the global manager.</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_connection</span><span class=p>(</span><span class=n>connection_name</span><span class=p>)</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection_name</span> <span class=o>=</span> <span class=n>connection_name</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>        <span class=k>except</span> <span class=ne>KeyError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a>            <span class=k>raise</span> <span class=n>McpServerConnectionError</span><span class=p>(</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a>                <span class=sa>f</span><span class=s2>"Failed to load the server connection for McpToolWorker </span><span class=se>\"</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=si>}</span><span class=se>\"</span><span class=s2>, because the "</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>                <span class=sa>f</span><span class=s2>"connection named </span><span class=se>\"</span><span class=si>{</span><span class=n>connection_name</span><span class=si>}</span><span class=se>\"</span><span class=s2> was not found in any connection manager. "</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>                <span class=sa>f</span><span class=s2>"You must create a McpServerConnection with name </span><span class=se>\"</span><span class=si>{</span><span class=n>connection_name</span><span class=si>}</span><span class=se>\"</span><span class=s2> and "</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>                <span class=sa>f</span><span class=s2>"ensure it is properly registered in a connection manager before using this worker."</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a>            <span class=p>)</span> <span class=kn>from</span><span class=w> </span><span class=nn>e</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpToolWorker.tool_name class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">tool_name</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#bridgic.protocols.mcp.McpToolWorker.tool_name class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>tool_name</span><span class=p>:</span> <span class=n><span title=str>str</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>Get the name of the tool.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpToolWorker.server_connection class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">server_connection</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#bridgic.protocols.mcp.McpToolWorker.server_connection class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>server_connection</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>Get the server connection, loading it from the server connection manager if necessary.</p> <p>This property implements lazy loading of the server connection. If the connection is not available (e.g., after deserialization), it will be retrieved from the server connection manager by its name.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnection</span> (<code>bridgic.protocols.mcp._mcp_server_connection.McpServerConnection</code>)' href=#bridgic.protocols.mcp.McpServerConnection>McpServerConnection</a></code> </td> <td> <div class=doc-md-description> <p>The server connection instance.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">McpServerConnectionError</span> (<code>bridgic.protocols.mcp._error.McpServerConnectionError</code>)' href=#bridgic.protocols.mcp.McpServerConnectionError>McpServerConnectionError</a></code> </td> <td> <div class=doc-md-description> <p>If the connection cannot be found in the manager.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpToolWorker.arun class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">arun</span> <a href=#bridgic.protocols.mcp.McpToolWorker.arun class=headerlink title="Permanent link">¶</a></h3> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>arun</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><span title=typing.Dict>Dict</span></span><span class=p>[</span><span class=n><span title=str>str</span></span><span class=p>,</span> <span class=n><span title=typing.Any>Any</span></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><span title=mcp.types.CallToolResult>CallToolResult</span></span>
</span></code></pre></div> <p>Asynchronously execute the MCP tool with the provided arguments.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>**kwargs</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>The arguments to pass to the tool. These are typically provided from the tool call arguments generated by the LLM.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=mcp.types.CallToolResult>CallToolResult</span></code> </td> <td> <div class=doc-md-description> <p>The result of the tool call from the MCP server, containing content and optionally structured content.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>If the connection is not established and cannot be established.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_tool_worker.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>arun</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>CallToolResult</span><span class=p>:</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a><span class=sd>    Asynchronously execute the MCP tool with the provided arguments.</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=sd>    Parameters</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=sd>    ----------</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=sd>    **kwargs : Dict[str, Any]</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a><span class=sd>        The arguments to pass to the tool. These are typically provided</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=sd>        from the tool call arguments generated by the LLM.</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>    Returns</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a><span class=sd>    -------</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=sd>    CallToolResult</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=sd>        The result of the tool call from the MCP server, containing content</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>        and optionally structured content.</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>    Raises</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=sd>    ------</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>    RuntimeError</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>        If the connection is not established and cannot be established.</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a><span class=sd>    """</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>server_connection</span><span class=o>.</span><span class=n>acall_tool</span><span class=p>(</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>            <span class=n>tool_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_tool_name</span><span class=p>,</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a>            <span class=n>arguments</span><span class=o>=</span><span class=n>kwargs</span> <span class=k>if</span> <span class=n>kwargs</span> <span class=k>else</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>        <span class=p>)</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>        <span class=n>result</span> <span class=o>=</span> <span class=n>CallToolResult</span><span class=p>(</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>            <span class=n>content</span><span class=o>=</span><span class=p>[</span><span class=n>TextContent</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=sa>f</span><span class=s2>"[MCP Tool Error] </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)],</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a>            <span class=n>structuredContent</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>            <span class=n>isError</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>        <span class=p>)</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>    <span class=k>return</span> <span class=n>result</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=bridgic.protocols.mcp.McpPromptTemplate class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">McpPromptTemplate</span> <a href=#bridgic.protocols.mcp.McpPromptTemplate class=headerlink title="Permanent link">¶</a></h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BasePromptTemplate</span> (<code>bridgic.core.prompt._base_template.BasePromptTemplate</code>)' href=../../../../bridgic-core/bridgic/core/prompt/#bridgic.core.prompt.BasePromptTemplate>BasePromptTemplate</a></code></p> <p>This template implementation is used to generate a prompt from a connected MCP server.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_template.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-9> 9</a></span>
<span class=normal><a href=#__codelineno-0-10>10</a></span>
<span class=normal><a href=#__codelineno-0-11>11</a></span>
<span class=normal><a href=#__codelineno-0-12>12</a></span>
<span class=normal><a href=#__codelineno-0-13>13</a></span>
<span class=normal><a href=#__codelineno-0-14>14</a></span>
<span class=normal><a href=#__codelineno-0-15>15</a></span>
<span class=normal><a href=#__codelineno-0-16>16</a></span>
<span class=normal><a href=#__codelineno-0-17>17</a></span>
<span class=normal><a href=#__codelineno-0-18>18</a></span>
<span class=normal><a href=#__codelineno-0-19>19</a></span>
<span class=normal><a href=#__codelineno-0-20>20</a></span>
<span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9></a><span class=k>class</span><span class=w> </span><span class=nc>McpPromptTemplate</span><span class=p>(</span><span class=n>BasePromptTemplate</span><span class=p>):</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=sd>    This template implementation is used to generate a prompt from a connected MCP server.</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=sd>    """</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13></a>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14></a>    <span class=n>prompt_name</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15></a><span class=w>    </span><span class=sd>"""The name of the prompt template."""</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16></a>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17></a>    <span class=n>prompt_info</span><span class=p>:</span> <span class=n>Prompt</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=w>    </span><span class=sd>"""The raw information of the prompt."""</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19></a>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20></a>    <span class=n>_server_connection</span><span class=p>:</span> <span class=n>McpServerConnection</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21></a><span class=w>    </span><span class=sd>"""The connection to the MCP server."""</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22></a>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25></a>        <span class=n>prompt_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26></a>        <span class=n>prompt_info</span><span class=p>:</span> <span class=n>Prompt</span><span class=p>,</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a>        <span class=n>server_connection</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>],</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a>    <span class=p>):</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a>        <span class=bp>self</span><span class=o>.</span><span class=n>prompt_name</span> <span class=o>=</span> <span class=n>prompt_name</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a>        <span class=bp>self</span><span class=o>.</span><span class=n>prompt_info</span> <span class=o>=</span> <span class=n>prompt_info</span>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a>        <span class=c1># Try to associate with the real connection object.</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>McpServerConnectionManager</span><span class=o>.</span><span class=n>get_connection</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a>        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>server_connection</span><span class=p>,</span> <span class=n>McpServerConnection</span><span class=p>):</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=o>=</span> <span class=n>server_connection</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Invalid type for server connection: </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>server_connection</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a>    <span class=k>def</span><span class=w> </span><span class=nf>format_messages</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Message</span><span class=p>]:</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=w>        </span><span class=sd>"""</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=sd>        Format the prompt template from a connected MCP server into messages.</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a><span class=sd>        Parameters</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=sd>        ----------</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a><span class=sd>        **kwargs : Any</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=sd>            The keyword arguments to pass to the prompt template.</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a><span class=sd>        Returns</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=sd>        -------</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a><span class=sd>        List[Message]</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a><span class=sd>            The list of messages.</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a><span class=sd>        """</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span><span class=o>.</span><span class=n>is_connected</span><span class=p>:</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a>            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>"MCP session is not connected, unable to render prompt."</span><span class=p>)</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>        <span class=n>mcp_result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span><span class=o>.</span><span class=n>get_prompt</span><span class=p>(</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a>            <span class=n>prompt_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>prompt_name</span><span class=p>,</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>            <span class=n>arguments</span><span class=o>=</span><span class=n>kwargs</span><span class=p>,</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>        <span class=p>)</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>        <span class=n>mcp_messages</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>PromptMessage</span><span class=p>]</span> <span class=o>=</span> <span class=n>mcp_result</span><span class=o>.</span><span class=n>messages</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>        <span class=n>messages</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Message</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>        <span class=k>if</span> <span class=n>mcp_messages</span><span class=p>:</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>            <span class=k>for</span> <span class=n>msg</span> <span class=ow>in</span> <span class=n>mcp_messages</span><span class=p>:</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>                <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Message</span><span class=o>.</span><span class=n>from_text</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=n>msg</span><span class=o>.</span><span class=n>content</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=n>role</span><span class=o>=</span><span class=n>msg</span><span class=o>.</span><span class=n>role</span><span class=p>))</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>        <span class=k>return</span> <span class=n>messages</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpPromptTemplate.prompt_name class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">prompt_name</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpPromptTemplate.prompt_name class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>prompt_name</span><span class=p>:</span> <span class=n><span title=str>str</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_template.McpPromptTemplate(prompt_name)>prompt_name</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The name of the prompt template.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=bridgic.protocols.mcp.McpPromptTemplate.prompt_info class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">prompt_info</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#bridgic.protocols.mcp.McpPromptTemplate.prompt_info class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>prompt_info</span><span class=p>:</span> <span class=n><span title=mcp.types.Prompt>Prompt</span></span> <span class=o>=</span> <span class=n><span title=bridgic.protocols.mcp._mcp_template.McpPromptTemplate(prompt_info)>prompt_info</span></span>
</span></code></pre></div> <div class="doc doc-contents "> <p>The raw information of the prompt.</p> </div> </div> <div class="doc doc-object doc-function"> <h3 id=bridgic.protocols.mcp.McpPromptTemplate.format_messages class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">format_messages</span> <a href=#bridgic.protocols.mcp.McpPromptTemplate.format_messages class=headerlink title="Permanent link">¶</a></h3> <div class="language-python doc-signature highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>format_messages</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=typing.List>List</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Message</span> (<code>bridgic.core.model.types.Message</code>)' href=../../../../bridgic-core/bridgic/core/model/types/#bridgic.core.model.types.Message>Message</a></span><span class=p>]</span>
</span></code></pre></div> <p>Format the prompt template from a connected MCP server into messages.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>**kwargs</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>The keyword arguments to pass to the prompt template.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.List>List</span>[<a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Message</span> (<code>bridgic.core.model.types.Message</code>)' href=../../../../bridgic-core/bridgic/core/model/types/#bridgic.core.model.types.Message>Message</a>]</code> </td> <td> <div class=doc-md-description> <p>The list of messages.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_mcp_template.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a><span class=k>def</span><span class=w> </span><span class=nf>format_messages</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Message</span><span class=p>]:</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=sd>    Format the prompt template from a connected MCP server into messages.</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a><span class=sd>    Parameters</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=sd>    ----------</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a><span class=sd>    **kwargs : Any</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=sd>        The keyword arguments to pass to the prompt template.</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a><span class=sd>    Returns</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=sd>    -------</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a><span class=sd>    List[Message]</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a><span class=sd>        The list of messages.</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a><span class=sd>    """</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a>    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span><span class=o>.</span><span class=n>is_connected</span><span class=p>:</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a>        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>"MCP session is not connected, unable to render prompt."</span><span class=p>)</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>    <span class=n>mcp_result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_server_connection</span><span class=o>.</span><span class=n>get_prompt</span><span class=p>(</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a>        <span class=n>prompt_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>prompt_name</span><span class=p>,</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>        <span class=n>arguments</span><span class=o>=</span><span class=n>kwargs</span><span class=p>,</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>    <span class=p>)</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>    <span class=n>mcp_messages</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>PromptMessage</span><span class=p>]</span> <span class=o>=</span> <span class=n>mcp_result</span><span class=o>.</span><span class=n>messages</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>    <span class=n>messages</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Message</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=k>if</span> <span class=n>mcp_messages</span><span class=p>:</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>        <span class=k>for</span> <span class=n>msg</span> <span class=ow>in</span> <span class=n>mcp_messages</span><span class=p>:</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>            <span class=n>messages</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Message</span><span class=o>.</span><span class=n>from_text</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=n>msg</span><span class=o>.</span><span class=n>content</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=n>role</span><span class=o>=</span><span class=n>msg</span><span class=o>.</span><span class=n>role</span><span class=p>))</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>    <span class=k>return</span> <span class=n>messages</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=bridgic.protocols.mcp.McpServerConnectionError class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">McpServerConnectionError</span> <a href=#bridgic.protocols.mcp.McpServerConnectionError class=headerlink title="Permanent link">¶</a></h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Raised when the connection to an MCP server fails.</p> <details class=quote> <summary>Source code in <code>bridgic/protocols/mcp/_error.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-5>5</a></span>
<span class=normal><a href=#__codelineno-0-6>6</a></span>
<span class=normal><a href=#__codelineno-0-7>7</a></span>
<span class=normal><a href=#__codelineno-0-8>8</a></span>
<span class=normal><a href=#__codelineno-0-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=k>class</span><span class=w> </span><span class=nc>McpServerConnectionError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=w>    </span><span class=sd>"""</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=sd>    Raised when the connection to an MCP server fails.</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8></a><span class=sd>    """</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9></a>    <span class=k>pass</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div></div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../../../../extras/protocols/ class="md-footer__link md-footer__link--prev" aria-label="Previous: protocols"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> protocols </div> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 BitSky Inc. | Built with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener>Material for MkDocs</a>. </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tabs", "navigation.indexes", "navigation.top", "navigation.footer", "navigation.path", "navigation.tracking", "toc.follow", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.select", "content.code.annotate", "content.tabs.link", "content.tooltips"], "search": "../../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.92b07e13.min.js></script> <script src=../../../../../javascripts/mathjax.js></script> <script src=../../../../../javascripts/polyfill.min.js></script> <script src=../../../../../javascripts/tex-mml-chtml.js></script> <script src=../../../../../javascripts/clipboard.js></script> </body> </html>